[INFO ] 2021-07-14 13:18:44 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 13:18:44 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 13:18:44 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 13:18:44 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 13:18:45 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@b7838a9, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@696f0212, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@5733f295, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@1c3146bc, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@56c698e3, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a86fbb, org.springframework.test.context.transaction.TransactionalTestExecutionListener@f478a81, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@19553973, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@7bb6ab3a, org.springframework.test.context.event.EventPublishingTestExecutionListener@7fe7c640, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@4c4748bf, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@7ce97ee5, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@32c8e539, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@73dce0e6, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@5a85c92, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@32811494, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@4795ded0]
[INFO ] 2021-07-14 13:18:45 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 13:18:46 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 13:18:46 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 13:18:47 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 13:18:47 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 13:18:50 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 13:18:50 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 13:18:50 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 13:18:51 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 13:18:51 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 13:18:56 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 0b021961ea098c5bac0ed87bf67f505f0d6fec7574ef2182c0701de08a3afbca
[INFO ] 2021-07-14 13:19:00 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 0b021961ea098c5bac0ed87bf67f505f0d6fec7574ef2182c0701de08a3afbca
[INFO ] 2021-07-14 13:19:04 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT13.459276S
[INFO ] 2021-07-14 13:19:05 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 77220 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 13:19:05 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 13:19:06 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 13:19:07 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 13:19:07 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 212 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 13:19:10 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@3375b118' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 13:19:10 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 13:19:11 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 13:19:11 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 13:19:11 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 13:19:11 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 13:19:11 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 6049 ms
[INFO ] 2021-07-14 13:19:12 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 13:19:12 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 13:19:13 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 13:19:14 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 13:19:14 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 13:19:14 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 13:19:14 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 13:19:14 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 13:19:14 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 13:19:14 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 87ms
[INFO ] 2021-07-14 13:19:14 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 13:19:14 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 26ms
[INFO ] 2021-07-14 13:19:14 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 13:19:14 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 27ms
[INFO ] 2021-07-14 13:19:14 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 13:19:14 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 26ms
[INFO ] 2021-07-14 13:19:14 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 13:19:14 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 21ms
[INFO ] 2021-07-14 13:19:16 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 13:19:16 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 1142ms
[INFO ] 2021-07-14 13:19:16 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 13:19:16 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 81ms
[INFO ] 2021-07-14 13:19:16 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 13:19:16 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 28ms
[INFO ] 2021-07-14 13:19:16 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 13:19:16 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 13:19:16 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 13:19:17 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 13:19:17 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 13:19:19 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 13:19:19 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 13:19:21 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 13:19:21 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@76aab1e3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4f9e32f2, org.springframework.security.web.context.SecurityContextPersistenceFilter@1ba00c0c, org.springframework.security.web.header.HeaderWriterFilter@5a07088b, org.springframework.web.filter.CorsFilter@432e242d, org.springframework.security.web.authentication.logout.LogoutFilter@4cbf1c30, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@537360e3, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@70f5f6c7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@72f4232, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7fd8f21, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4ec25389, org.springframework.security.web.session.SessionManagementFilter@7ef6a063, org.springframework.security.web.access.ExceptionTranslationFilter@6d5376b7, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4f94b2a8]
[INFO ] 2021-07-14 13:19:23 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 49950 (http) with context path ''
[INFO ] 2021-07-14 13:19:23 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 18.715 seconds (JVM running for 41.039)
[INFO ] 2021-07-14 13:19:23 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 13:19:23 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 13:19:26 [SpringContextShutdownHook] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed from ACCEPTING_TRAFFIC to REFUSING_TRAFFIC
[INFO ] 2021-07-14 13:24:53 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 13:24:53 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 13:24:53 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 13:24:53 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 13:24:54 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@b7838a9, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@696f0212, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@5733f295, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@1c3146bc, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@56c698e3, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a86fbb, org.springframework.test.context.transaction.TransactionalTestExecutionListener@f478a81, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@19553973, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@7bb6ab3a, org.springframework.test.context.event.EventPublishingTestExecutionListener@7fe7c640, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@4c4748bf, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@7ce97ee5, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@32c8e539, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@73dce0e6, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@5a85c92, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@32811494, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@4795ded0]
[INFO ] 2021-07-14 13:24:54 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 13:24:56 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 13:24:56 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 13:24:56 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 13:24:56 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 13:24:59 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 13:24:59 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 13:24:59 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 13:24:59 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 13:24:59 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 13:25:04 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: cb12d74ed3ac45cb7ae33fa023528c4329e169d797fd739b0f5d78ff2db2436d
[INFO ] 2021-07-14 13:25:10 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: cb12d74ed3ac45cb7ae33fa023528c4329e169d797fd739b0f5d78ff2db2436d
[INFO ] 2021-07-14 13:25:13 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT13.715481S
[INFO ] 2021-07-14 13:25:14 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 78012 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 13:25:14 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 13:25:15 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 13:25:17 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 13:25:17 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 138 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 13:25:19 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@5a06904' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 13:25:19 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 13:25:19 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 13:25:19 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 13:25:19 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 13:25:20 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 13:25:20 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 5384 ms
[INFO ] 2021-07-14 13:25:20 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 13:25:21 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 13:25:22 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 13:25:23 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 13:25:23 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 13:25:23 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 13:25:23 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 13:25:23 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 13:25:23 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 13:25:23 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 69ms
[INFO ] 2021-07-14 13:25:23 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 13:25:23 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 18ms
[INFO ] 2021-07-14 13:25:23 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 13:25:23 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 20ms
[INFO ] 2021-07-14 13:25:23 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 13:25:23 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 28ms
[INFO ] 2021-07-14 13:25:23 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 13:25:23 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 75ms
[INFO ] 2021-07-14 13:25:25 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 13:25:25 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 1082ms
[INFO ] 2021-07-14 13:25:25 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 13:25:25 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 69ms
[INFO ] 2021-07-14 13:25:25 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 13:25:25 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 44ms
[INFO ] 2021-07-14 13:25:25 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 13:25:25 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 13:25:25 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 13:25:26 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 13:25:26 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 13:25:28 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 13:25:28 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 13:25:30 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 13:25:30 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@2c99419f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6a73b74c, org.springframework.security.web.context.SecurityContextPersistenceFilter@3b6b9981, org.springframework.security.web.header.HeaderWriterFilter@6311898c, org.springframework.web.filter.CorsFilter@3ce74930, org.springframework.security.web.authentication.logout.LogoutFilter@1cd7bc66, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@4c58212, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@6236beac, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7bdbf06f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2fc2d1f0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1508bc71, org.springframework.security.web.session.SessionManagementFilter@7083e548, org.springframework.security.web.access.ExceptionTranslationFilter@33f5d807, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@16bed816]
[INFO ] 2021-07-14 13:25:32 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 51467 (http) with context path ''
[INFO ] 2021-07-14 13:25:32 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 18.452 seconds (JVM running for 40.495)
[INFO ] 2021-07-14 13:25:32 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 13:25:32 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 13:25:33 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 13:25:33 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 13:25:33 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
[INFO ] 2021-07-14 13:25:33 [http-nio-auto-1-exec-1] INFO  r.n.c.aspects.LoggingAspect - –ü—Ä–∏–Ω—è—Ç –∑–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞–µ—Ç–µ–ª—è max@mail.ru –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ 111.jpeg
[ERROR] 2021-07-14 13:25:33 [http-nio-auto-1-exec-1] ERROR r.n.c.aspects.LoggingAspect - –û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞ 111.jpeg
[INFO ] 2021-07-14 13:26:18 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 13:26:18 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 13:26:19 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 13:26:19 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 13:26:19 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@b7838a9, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@696f0212, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@5733f295, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@1c3146bc, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@56c698e3, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a86fbb, org.springframework.test.context.transaction.TransactionalTestExecutionListener@f478a81, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@19553973, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@7bb6ab3a, org.springframework.test.context.event.EventPublishingTestExecutionListener@7fe7c640, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@4c4748bf, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@7ce97ee5, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@32c8e539, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@73dce0e6, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@5a85c92, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@32811494, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@4795ded0]
[INFO ] 2021-07-14 13:26:20 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 13:26:21 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 13:26:21 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 13:26:21 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 13:26:21 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 13:26:25 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 13:26:25 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 13:26:25 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 13:26:26 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 13:26:26 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 13:26:30 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 6bed65cacab86214b60ccd35e111c569cbbdbe617e88396a345607b46bb6f2e9
[INFO ] 2021-07-14 13:26:35 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 6bed65cacab86214b60ccd35e111c569cbbdbe617e88396a345607b46bb6f2e9
[INFO ] 2021-07-14 13:26:38 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT12.411541S
[INFO ] 2021-07-14 13:26:39 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 78124 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 13:26:39 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 13:26:39 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 13:26:41 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 13:26:41 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 160 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 13:26:42 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@ce561cc' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 13:26:42 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 13:26:43 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 13:26:43 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 13:26:43 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 13:26:43 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 13:26:43 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4415 ms
[INFO ] 2021-07-14 13:26:44 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 13:26:44 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 13:26:45 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 13:26:46 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 13:26:46 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 13:26:46 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 13:26:46 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 13:26:46 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 13:26:46 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 13:26:46 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 63ms
[INFO ] 2021-07-14 13:26:46 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 13:26:46 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 18ms
[INFO ] 2021-07-14 13:26:46 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 13:26:46 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 20ms
[INFO ] 2021-07-14 13:26:47 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 13:26:47 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 21ms
[INFO ] 2021-07-14 13:26:47 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 13:26:47 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 41ms
[INFO ] 2021-07-14 13:26:48 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 13:26:48 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 1144ms
[INFO ] 2021-07-14 13:26:48 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 13:26:48 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 136ms
[INFO ] 2021-07-14 13:26:48 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 13:26:48 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 28ms
[INFO ] 2021-07-14 13:26:48 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 13:26:48 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 13:26:48 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 13:26:49 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 13:26:49 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 13:26:51 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 13:26:51 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 13:26:52 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 13:26:53 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@284e68ae, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@456c6754, org.springframework.security.web.context.SecurityContextPersistenceFilter@1aae50f9, org.springframework.security.web.header.HeaderWriterFilter@6d5376b7, org.springframework.web.filter.CorsFilter@72de1d86, org.springframework.security.web.authentication.logout.LogoutFilter@38d1c7d2, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@9124278, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@524250ec, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@79c9f619, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5a07088b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7432cb37, org.springframework.security.web.session.SessionManagementFilter@6354a50a, org.springframework.security.web.access.ExceptionTranslationFilter@2eb6e166, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6cc91654]
[INFO ] 2021-07-14 13:26:54 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 51814 (http) with context path ''
[INFO ] 2021-07-14 13:26:54 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 16.072 seconds (JVM running for 38.228)
[INFO ] 2021-07-14 13:26:54 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 13:26:54 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 13:26:55 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 13:26:55 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 13:26:55 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
[INFO ] 2021-07-14 13:26:56 [http-nio-auto-1-exec-1] INFO  r.n.c.aspects.LoggingAspect - –ü—Ä–∏–Ω—è—Ç –∑–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞–µ—Ç–µ–ª—è max@mail.ru –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
[INFO ] 2021-07-14 13:27:45 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 13:27:45 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 13:27:46 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 13:27:46 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 13:27:46 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@74a6a609, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5a411614, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@2374d36a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@54d18072, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1506f20f, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a5b70d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@424fd310, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1a45193b, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@38f116f6, org.springframework.test.context.event.EventPublishingTestExecutionListener@5286c33a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@6e6d5d29, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5c530d1e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6c25e6c4, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@85e6769, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@c5ee75e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@bf1ec20]
[INFO ] 2021-07-14 13:27:46 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 13:27:47 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 13:27:47 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 13:27:47 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 13:27:47 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 13:27:50 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 13:27:50 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 13:27:50 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 13:27:50 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 13:27:50 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 13:27:54 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 09ed06eac0d29b50b5c3503716608db520923ee25194cf4170f815c70b161d4b
[INFO ] 2021-07-14 13:27:58 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 09ed06eac0d29b50b5c3503716608db520923ee25194cf4170f815c70b161d4b
[INFO ] 2021-07-14 13:28:00 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT10.22101S
[INFO ] 2021-07-14 13:28:01 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 78287 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 13:28:01 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 13:28:01 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 13:28:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 13:28:03 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 126 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 13:28:04 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@56ec6960' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 13:28:04 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 13:28:04 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 13:28:04 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 13:28:04 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 13:28:05 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 13:28:05 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3469 ms
[INFO ] 2021-07-14 13:28:05 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 13:28:05 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 13:28:06 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 13:28:07 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 13:28:07 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 13:28:07 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 13:28:07 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 13:28:07 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 13:28:07 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 13:28:07 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 71ms
[INFO ] 2021-07-14 13:28:08 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 13:28:08 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 20ms
[INFO ] 2021-07-14 13:28:08 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 13:28:08 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 19ms
[INFO ] 2021-07-14 13:28:08 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 13:28:08 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 20ms
[INFO ] 2021-07-14 13:28:08 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 13:28:08 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 16ms
[INFO ] 2021-07-14 13:28:09 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 13:28:09 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 970ms
[INFO ] 2021-07-14 13:28:09 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 13:28:09 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 57ms
[INFO ] 2021-07-14 13:28:09 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 13:28:09 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 18ms
[INFO ] 2021-07-14 13:28:09 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 13:28:09 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 13:28:09 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 13:28:09 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 13:28:10 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 13:28:11 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 13:28:11 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 13:28:13 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 13:28:13 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@7602da1a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6d985720, org.springframework.security.web.context.SecurityContextPersistenceFilter@3f514364, org.springframework.security.web.header.HeaderWriterFilter@5c14c284, org.springframework.web.filter.CorsFilter@2d1dbf4f, org.springframework.security.web.authentication.logout.LogoutFilter@463e0b6a, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@4f94b2a8, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@2f26634a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@32f35739, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@509e4bc4, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2810d9, org.springframework.security.web.session.SessionManagementFilter@3b30409, org.springframework.security.web.access.ExceptionTranslationFilter@6d5376b7, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@284e68ae]
[INFO ] 2021-07-14 13:28:15 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 52164 (http) with context path ''
[INFO ] 2021-07-14 13:28:15 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 14.382 seconds (JVM running for 30.409)
[INFO ] 2021-07-14 13:28:15 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 13:28:15 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 13:28:16 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 13:28:16 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 13:28:16 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[INFO ] 2021-07-14 13:28:16 [http-nio-auto-1-exec-1] INFO  r.n.c.aspects.LoggingAspect - –ü—Ä–∏–Ω—è—Ç –∑–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞–µ—Ç–µ–ª—è max@mail.ru –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
[INFO ] 2021-07-14 13:30:18 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 13:30:18 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 13:30:18 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 13:30:19 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 13:30:19 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@18c5069b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3a0d172f, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@68ad99fe, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@485e36bc, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@781f10f2, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2a79d4b1, org.springframework.test.context.transaction.TransactionalTestExecutionListener@2e9fda69, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@17cdf2d0, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@1755e85b, org.springframework.test.context.event.EventPublishingTestExecutionListener@736d6a5c, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@2371aaca, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5b529706, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@63fdab07, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@7b5a12ae, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@5553d0f5, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@1af687fe, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@14dda234]
[INFO ] 2021-07-14 13:30:19 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 13:30:20 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 13:30:20 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 13:30:21 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 13:30:21 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 13:30:23 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 13:30:23 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 13:30:23 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 13:30:24 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 13:30:24 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 13:30:28 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 7999768f4859ff79f5786d29dabcce517787cc4293bd965addb8e28b083976fe
[INFO ] 2021-07-14 13:30:32 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 7999768f4859ff79f5786d29dabcce517787cc4293bd965addb8e28b083976fe
[INFO ] 2021-07-14 13:30:34 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT10.510401S
[INFO ] 2021-07-14 13:30:35 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 78570 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 13:30:35 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 13:30:35 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 13:30:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 13:30:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 126 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 13:30:37 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@5d3f99d7' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 13:30:37 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 13:30:38 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 13:30:38 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 13:30:38 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 13:30:38 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 13:30:38 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3447 ms
[INFO ] 2021-07-14 13:30:39 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 13:30:39 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 13:30:40 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 13:30:40 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 13:30:40 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 13:30:41 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 13:30:41 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 13:30:41 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 13:30:41 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 13:30:41 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 52ms
[INFO ] 2021-07-14 13:30:41 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 13:30:41 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 16ms
[INFO ] 2021-07-14 13:30:41 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 13:30:41 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 24ms
[INFO ] 2021-07-14 13:30:41 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 13:30:41 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 13:30:41 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 13:30:41 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 16ms
[INFO ] 2021-07-14 13:30:42 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 13:30:42 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 917ms
[INFO ] 2021-07-14 13:30:42 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 13:30:42 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 104ms
[INFO ] 2021-07-14 13:30:42 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 13:30:42 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 21ms
[INFO ] 2021-07-14 13:30:42 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 13:30:42 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 13:30:42 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 13:30:43 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 13:30:43 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 13:30:44 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 13:30:44 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 13:30:46 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 13:30:46 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@7eaa52d6, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4cbf1c30, org.springframework.security.web.context.SecurityContextPersistenceFilter@7e864a8c, org.springframework.security.web.header.HeaderWriterFilter@4c9ed40, org.springframework.web.filter.CorsFilter@3c5095df, org.springframework.security.web.authentication.logout.LogoutFilter@57b4fc1e, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@5d52a17b, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@71c264e5, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7f6b3f4c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@61d4e070, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4528a871, org.springframework.security.web.session.SessionManagementFilter@3c82bcbd, org.springframework.security.web.access.ExceptionTranslationFilter@27e0906f, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3d2a164e]
[INFO ] 2021-07-14 13:30:47 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 52791 (http) with context path ''
[INFO ] 2021-07-14 13:30:48 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 13.383 seconds (JVM running for 31.121)
[INFO ] 2021-07-14 13:30:48 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 13:30:48 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 13:30:49 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 13:30:49 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 13:30:49 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
[INFO ] 2021-07-14 13:30:49 [http-nio-auto-1-exec-1] INFO  r.n.c.aspects.LoggingAspect - –ü—Ä–∏–Ω—è—Ç –∑–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞–µ—Ç–µ–ª—è max@mail.ru –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
[ERROR] 2021-07-14 13:30:49 [http-nio-auto-1-exec-1] ERROR r.n.c.aspects.LoggingAspect - null
[ERROR] 2021-07-14 13:30:49 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler.uploadToDb(DefaultFileHandler.java:91)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$FastClassBySpringCGLIB$$8d823bb1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$EnhancerBySpringCGLIB$$48099a15.uploadToDb(<generated>)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository.saveFile(DefaultCloudServiceFileRepository.java:53)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$FastClassBySpringCGLIB$$b940889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$EnhancerBySpringCGLIB$$f496bd73.saveFile(<generated>)
	at ru.netology.cloud_service_app.services.FileService.saveFile(FileService.java:33)
	at ru.netology.cloud_service_app.services.FileService$$FastClassBySpringCGLIB$$660dc7a6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.services.FileService$$EnhancerBySpringCGLIB$$b5c68e7e.saveFile(<generated>)
	at ru.netology.cloud_service_app.controllers.FileController.saveFile(FileController.java:58)
	at ru.netology.cloud_service_app.controllers.FileController$$FastClassBySpringCGLIB$$d5e7b2cc.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:58)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.controllers.FileController$$EnhancerBySpringCGLIB$$76ecca2c.saveFile(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 13:30:51 [SpringContextShutdownHook] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed from ACCEPTING_TRAFFIC to REFUSING_TRAFFIC
[INFO ] 2021-07-14 13:32:02 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 13:32:02 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 13:32:02 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 13:32:02 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 13:32:02 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@18c5069b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3a0d172f, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@68ad99fe, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@485e36bc, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@781f10f2, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2a79d4b1, org.springframework.test.context.transaction.TransactionalTestExecutionListener@2e9fda69, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@17cdf2d0, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@1755e85b, org.springframework.test.context.event.EventPublishingTestExecutionListener@736d6a5c, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@2371aaca, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5b529706, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@63fdab07, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@7b5a12ae, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@5553d0f5, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@1af687fe, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@14dda234]
[INFO ] 2021-07-14 13:32:03 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 13:32:04 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 13:32:04 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 13:32:04 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 13:32:04 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 13:32:07 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 13:32:07 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 13:32:07 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 13:32:07 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 13:32:07 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 13:32:12 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: c212b30f302cb300881bb3da45b48f9ffac7fcbf77fe0c4169ece1a74a54fe97
[INFO ] 2021-07-14 13:32:15 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: c212b30f302cb300881bb3da45b48f9ffac7fcbf77fe0c4169ece1a74a54fe97
[INFO ] 2021-07-14 13:32:17 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT9.861349S
[INFO ] 2021-07-14 13:32:18 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 78747 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 13:32:18 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 13:32:18 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 13:32:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 13:32:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 107 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 13:32:20 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@5cc3e49b' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 13:32:20 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 13:32:21 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 13:32:21 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 13:32:21 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 13:32:21 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 13:32:21 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3702 ms
[INFO ] 2021-07-14 13:32:22 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 13:32:22 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 13:32:23 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 13:32:24 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 13:32:24 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 13:32:24 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 13:32:24 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 13:32:24 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 13:32:24 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 13:32:24 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 63ms
[INFO ] 2021-07-14 13:32:24 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 13:32:24 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 13:32:24 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 13:32:24 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 13:32:24 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 13:32:24 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 21ms
[INFO ] 2021-07-14 13:32:24 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 13:32:24 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 20ms
[INFO ] 2021-07-14 13:32:25 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 13:32:25 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 888ms
[INFO ] 2021-07-14 13:32:25 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 13:32:25 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 52ms
[INFO ] 2021-07-14 13:32:25 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 13:32:25 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 13:32:25 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 13:32:25 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 13:32:25 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 13:32:26 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 13:32:26 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 13:32:27 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 13:32:27 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 13:32:28 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 13:32:29 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@6a73b74c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3ce74930, org.springframework.security.web.context.SecurityContextPersistenceFilter@2eb6e166, org.springframework.security.web.header.HeaderWriterFilter@7ea0438c, org.springframework.web.filter.CorsFilter@4c58212, org.springframework.security.web.authentication.logout.LogoutFilter@34b56a5a, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@6236beac, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@1508bc71, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1c1bc904, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@57b4fc1e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1320d929, org.springframework.security.web.session.SessionManagementFilter@1f315f3d, org.springframework.security.web.access.ExceptionTranslationFilter@6a7db16e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4cae7d5]
[INFO ] 2021-07-14 13:32:30 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 53218 (http) with context path ''
[INFO ] 2021-07-14 13:32:30 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 12.745 seconds (JVM running for 29.86)
[INFO ] 2021-07-14 13:32:30 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 13:32:30 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 13:32:31 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 13:32:31 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 13:32:31 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
[INFO ] 2021-07-14 13:32:31 [http-nio-auto-1-exec-1] INFO  r.n.c.aspects.LoggingAspect - –ü—Ä–∏–Ω—è—Ç –∑–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞–µ—Ç–µ–ª—è max@mail.ru –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
[ERROR] 2021-07-14 13:32:31 [http-nio-auto-1-exec-1] ERROR r.n.c.aspects.LoggingAspect - null
[ERROR] 2021-07-14 13:32:31 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler.uploadToDb(DefaultFileHandler.java:91)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$FastClassBySpringCGLIB$$8d823bb1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$EnhancerBySpringCGLIB$$725df83d.uploadToDb(<generated>)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository.saveFile(DefaultCloudServiceFileRepository.java:53)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$FastClassBySpringCGLIB$$b940889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$EnhancerBySpringCGLIB$$9af45df3.saveFile(<generated>)
	at ru.netology.cloud_service_app.services.FileService.saveFile(FileService.java:33)
	at ru.netology.cloud_service_app.services.FileService$$FastClassBySpringCGLIB$$660dc7a6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.services.FileService$$EnhancerBySpringCGLIB$$15824ed2.saveFile(<generated>)
	at ru.netology.cloud_service_app.controllers.FileController.saveFile(FileController.java:58)
	at ru.netology.cloud_service_app.controllers.FileController$$FastClassBySpringCGLIB$$d5e7b2cc.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:58)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.controllers.FileController$$EnhancerBySpringCGLIB$$aa5a3c37.saveFile(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 13:32:33 [SpringContextShutdownHook] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed from ACCEPTING_TRAFFIC to REFUSING_TRAFFIC
[INFO ] 2021-07-14 13:35:39 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 13:35:39 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 13:35:39 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 13:35:39 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 13:35:39 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@b7838a9, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@696f0212, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@5733f295, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@1c3146bc, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@56c698e3, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a86fbb, org.springframework.test.context.transaction.TransactionalTestExecutionListener@f478a81, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@19553973, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@7bb6ab3a, org.springframework.test.context.event.EventPublishingTestExecutionListener@7fe7c640, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@4c4748bf, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@7ce97ee5, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@32c8e539, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@73dce0e6, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@5a85c92, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@32811494, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@4795ded0]
[INFO ] 2021-07-14 13:35:40 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 13:35:41 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 13:35:41 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 13:35:41 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 13:35:41 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 13:35:44 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 13:35:44 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 13:35:44 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 13:35:45 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 13:35:45 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 13:35:49 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: c18fdeae318d58818018099552f3bcb9d56162b01037447cc3e433090e9b087a
[INFO ] 2021-07-14 13:35:55 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: c18fdeae318d58818018099552f3bcb9d56162b01037447cc3e433090e9b087a
[INFO ] 2021-07-14 13:35:57 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT12.130509S
[INFO ] 2021-07-14 13:35:58 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 79197 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 13:35:58 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 13:35:58 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 13:35:59 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 13:35:59 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 126 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 13:36:01 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@3375b118' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 13:36:01 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 13:36:02 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 13:36:02 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 13:36:02 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 13:36:02 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 13:36:02 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4352 ms
[INFO ] 2021-07-14 13:36:03 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 13:36:03 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 13:36:04 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 13:36:05 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 13:36:05 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 13:36:05 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 13:36:05 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 13:36:05 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 13:36:05 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 13:36:05 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 61ms
[INFO ] 2021-07-14 13:36:05 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 13:36:05 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 21ms
[INFO ] 2021-07-14 13:36:05 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 13:36:05 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 13:36:05 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 13:36:05 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 18ms
[INFO ] 2021-07-14 13:36:05 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 13:36:05 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 19ms
[INFO ] 2021-07-14 13:36:06 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 13:36:06 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 940ms
[INFO ] 2021-07-14 13:36:06 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 13:36:06 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 66ms
[INFO ] 2021-07-14 13:36:06 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 13:36:06 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 21ms
[INFO ] 2021-07-14 13:36:06 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 13:36:06 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 13:36:06 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 13:36:07 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 13:36:07 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 13:36:09 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 13:36:09 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 13:36:10 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 13:36:11 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@7432cb37, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7602da1a, org.springframework.security.web.context.SecurityContextPersistenceFilter@24d998ba, org.springframework.security.web.header.HeaderWriterFilter@2cb09f00, org.springframework.web.filter.CorsFilter@6d985720, org.springframework.security.web.authentication.logout.LogoutFilter@613bebb9, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@2d1dbf4f, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@4f94b2a8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5a07088b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@34b56a5a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2f26634a, org.springframework.security.web.session.SessionManagementFilter@2b53d6fc, org.springframework.security.web.access.ExceptionTranslationFilter@49afaf65, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7441eed3]
[INFO ] 2021-07-14 13:36:12 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 54159 (http) with context path ''
[INFO ] 2021-07-14 13:36:12 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 14.976 seconds (JVM running for 35.389)
[INFO ] 2021-07-14 13:36:12 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 13:36:12 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 13:36:13 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 13:36:13 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 13:36:13 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[INFO ] 2021-07-14 13:36:14 [http-nio-auto-1-exec-1] INFO  r.n.c.aspects.LoggingAspect - –ü—Ä–∏–Ω—è—Ç –∑–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞–µ—Ç–µ–ª—è max@mail.ru –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
[ERROR] 2021-07-14 13:36:14 [http-nio-auto-1-exec-1] ERROR r.n.c.aspects.LoggingAspect - null
[ERROR] 2021-07-14 13:36:14 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler.uploadToDb(DefaultFileHandler.java:91)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$FastClassBySpringCGLIB$$8d823bb1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$EnhancerBySpringCGLIB$$8b6f184d.uploadToDb(<generated>)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository.saveFile(DefaultCloudServiceFileRepository.java:53)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$FastClassBySpringCGLIB$$b940889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$EnhancerBySpringCGLIB$$50c2aa17.saveFile(<generated>)
	at ru.netology.cloud_service_app.services.FileService.saveFile(FileService.java:33)
	at ru.netology.cloud_service_app.services.FileService$$FastClassBySpringCGLIB$$660dc7a6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.services.FileService$$EnhancerBySpringCGLIB$$b4172ecc.saveFile(<generated>)
	at ru.netology.cloud_service_app.controllers.FileController.saveFile(FileController.java:58)
	at ru.netology.cloud_service_app.controllers.FileController$$FastClassBySpringCGLIB$$d5e7b2cc.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:58)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.controllers.FileController$$EnhancerBySpringCGLIB$$9e458cd5.saveFile(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 13:43:31 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 13:43:31 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 13:43:32 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 13:43:32 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 13:43:32 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@18c5069b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3a0d172f, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@68ad99fe, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@485e36bc, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@781f10f2, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2a79d4b1, org.springframework.test.context.transaction.TransactionalTestExecutionListener@2e9fda69, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@17cdf2d0, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@1755e85b, org.springframework.test.context.event.EventPublishingTestExecutionListener@736d6a5c, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@2371aaca, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5b529706, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@63fdab07, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@7b5a12ae, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@5553d0f5, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@1af687fe, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@14dda234]
[INFO ] 2021-07-14 13:43:33 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 13:43:34 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 13:43:34 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 13:43:35 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 13:43:35 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 13:43:37 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 13:43:37 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 13:43:37 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 13:43:38 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 13:43:38 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 13:43:43 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 2ccdf66800fa0601f878ea8a894f180f6227a93bef89b98b3090278a1e6ba07d
[INFO ] 2021-07-14 13:43:47 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 2ccdf66800fa0601f878ea8a894f180f6227a93bef89b98b3090278a1e6ba07d
[INFO ] 2021-07-14 13:43:51 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT12.847197S
[INFO ] 2021-07-14 13:43:52 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 80224 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 13:43:52 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 13:43:52 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 13:43:53 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 13:43:54 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 165 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 13:43:55 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@4239262e' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 13:43:55 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 13:43:56 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 13:43:56 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 13:43:56 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 13:43:56 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 13:43:56 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4471 ms
[INFO ] 2021-07-14 13:43:57 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 13:43:57 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 13:43:58 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 13:43:59 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 13:43:59 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 13:43:59 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 13:43:59 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 13:43:59 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 13:43:59 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 13:43:59 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 75ms
[INFO ] 2021-07-14 13:43:59 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 13:43:59 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 19ms
[INFO ] 2021-07-14 13:43:59 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 13:43:59 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 18ms
[INFO ] 2021-07-14 13:43:59 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 13:43:59 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 21ms
[INFO ] 2021-07-14 13:43:59 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 13:43:59 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 31ms
[INFO ] 2021-07-14 13:44:00 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 13:44:00 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 1167ms
[INFO ] 2021-07-14 13:44:00 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 13:44:00 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 113ms
[INFO ] 2021-07-14 13:44:00 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 13:44:00 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 30ms
[INFO ] 2021-07-14 13:44:00 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 13:44:01 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 13:44:01 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 13:44:01 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 13:44:02 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 13:44:03 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 13:44:03 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 13:44:05 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 13:44:06 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@6236beac, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1508bc71, org.springframework.security.web.context.SecurityContextPersistenceFilter@1c1bc904, org.springframework.security.web.header.HeaderWriterFilter@1f315f3d, org.springframework.web.filter.CorsFilter@1320d929, org.springframework.security.web.authentication.logout.LogoutFilter@3a35a792, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@3b5d0c4d, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@6cc91654, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6d5376b7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2cb09f00, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3c72c488, org.springframework.security.web.session.SessionManagementFilter@3b6b9981, org.springframework.security.web.access.ExceptionTranslationFilter@61d4e070, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@230ea983]
[INFO ] 2021-07-14 13:44:07 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 56096 (http) with context path ''
[INFO ] 2021-07-14 13:44:07 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 16.265 seconds (JVM running for 39.03)
[INFO ] 2021-07-14 13:44:07 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 13:44:07 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 13:44:08 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 13:44:08 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 13:44:08 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[INFO ] 2021-07-14 13:44:09 [http-nio-auto-1-exec-1] INFO  r.n.c.aspects.LoggingAspect - –ü—Ä–∏–Ω—è—Ç –∑–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞–µ—Ç–µ–ª—è max@mail.ru –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
[INFO ] 2021-07-14 14:13:45 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 14:13:45 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 14:13:46 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 14:13:46 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 14:13:46 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@14d14731, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@2eced48b, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@47c4ecdc, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@42f33b5d, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@5c8504fd, org.springframework.test.context.support.DirtiesContextTestExecutionListener@4b7e96a, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6475472c, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@3f07b12c, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@4bd1f8dd, org.springframework.test.context.event.EventPublishingTestExecutionListener@7096b474, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@3e14c16d, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@3c989952, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@784b990c, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@3d3ba765, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@25bc0606, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@5d1659ea, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@793138bd]
[INFO ] 2021-07-14 14:13:46 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 14:13:47 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 14:13:47 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 14:13:47 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 14:13:47 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 14:13:49 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 14:13:49 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 14:13:49 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 14:13:50 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 14:13:50 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 14:13:54 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: d18ecd9b74e66703a82abb759eac7691d4fbfd3776c8ef79050b0e87848d6b23
[INFO ] 2021-07-14 14:13:57 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: d18ecd9b74e66703a82abb759eac7691d4fbfd3776c8ef79050b0e87848d6b23
[INFO ] 2021-07-14 14:13:59 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT8.996031S
[INFO ] 2021-07-14 14:13:59 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 83458 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 14:13:59 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 14:13:59 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 14:14:00 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 14:14:00 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 78 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 14:14:01 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@44fb6ebd' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:14:01 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:14:01 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 14:14:01 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 14:14:01 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 14:14:02 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 14:14:02 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2383 ms
[INFO ] 2021-07-14 14:14:02 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 14:14:02 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 14:14:02 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 14:14:03 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 14:14:03 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 14:14:03 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:14:03 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 14:14:03 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 14:14:03 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 14:14:03 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 65ms
[INFO ] 2021-07-14 14:14:03 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 14:14:03 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 14ms
[INFO ] 2021-07-14 14:14:03 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 14:14:03 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 14ms
[INFO ] 2021-07-14 14:14:03 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 14:14:03 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 15ms
[INFO ] 2021-07-14 14:14:03 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 14:14:03 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 15ms
[INFO ] 2021-07-14 14:14:04 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 14:14:04 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 696ms
[INFO ] 2021-07-14 14:14:04 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 14:14:04 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 56ms
[INFO ] 2021-07-14 14:14:04 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 14:14:04 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 25ms
[INFO ] 2021-07-14 14:14:04 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:14:04 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 14:14:04 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 14:14:05 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 14:14:05 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 14:14:06 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 14:14:06 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 14:14:07 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 14:14:07 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@537360e3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@70f5f6c7, org.springframework.security.web.context.SecurityContextPersistenceFilter@72f4232, org.springframework.security.web.header.HeaderWriterFilter@7ef6a063, org.springframework.web.filter.CorsFilter@4ec25389, org.springframework.security.web.authentication.logout.LogoutFilter@71c264e5, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@7cff1930, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@34c31a34, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@41843b88, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@38d1c7d2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6b5f91a5, org.springframework.security.web.session.SessionManagementFilter@509e4bc4, org.springframework.security.web.access.ExceptionTranslationFilter@24d998ba, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@408f3054]
[INFO ] 2021-07-14 14:14:08 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 61395 (http) with context path ''
[INFO ] 2021-07-14 14:14:08 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 9.442 seconds (JVM running for 23.979)
[INFO ] 2021-07-14 14:14:08 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 14:14:08 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 14:14:09 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:14:09 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:14:09 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[INFO ] 2021-07-14 14:14:09 [http-nio-auto-1-exec-1] INFO  r.n.c.aspects.LoggingAspect - –ü—Ä–∏–Ω—è—Ç –∑–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞–µ—Ç–µ–ª—è max@mail.ru –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
[INFO ] 2021-07-14 14:19:59 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 14:19:59 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 14:19:59 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 14:19:59 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 14:19:59 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@74a6a609, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5a411614, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@2374d36a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@54d18072, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1506f20f, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a5b70d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@424fd310, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1a45193b, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@38f116f6, org.springframework.test.context.event.EventPublishingTestExecutionListener@5286c33a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@6e6d5d29, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5c530d1e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6c25e6c4, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@85e6769, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@c5ee75e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@bf1ec20]
[INFO ] 2021-07-14 14:20:00 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 14:20:00 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 14:20:00 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 14:20:00 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 14:20:00 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 14:20:03 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 14:20:03 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 14:20:03 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 14:20:04 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 14:20:04 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 14:20:09 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: c2ea480d455f8efd3608a120a63e325e15267093d31796ed7a51e9f7750beb44
[INFO ] 2021-07-14 14:20:13 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: c2ea480d455f8efd3608a120a63e325e15267093d31796ed7a51e9f7750beb44
[INFO ] 2021-07-14 14:20:16 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT12.015295S
[INFO ] 2021-07-14 14:20:16 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 84442 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 14:20:16 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 14:20:17 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 14:20:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 14:20:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 111 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 14:20:19 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@3eac2e8a' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:20:19 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:20:19 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 14:20:19 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 14:20:19 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 14:20:20 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 14:20:20 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3235 ms
[INFO ] 2021-07-14 14:20:20 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 14:20:20 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 14:20:21 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 14:20:22 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 14:20:22 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 14:20:22 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:20:22 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 14:20:22 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 14:20:22 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 14:20:22 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 51ms
[INFO ] 2021-07-14 14:20:22 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 14:20:22 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 14:20:22 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 14:20:22 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 25ms
[INFO ] 2021-07-14 14:20:22 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 14:20:22 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 20ms
[INFO ] 2021-07-14 14:20:22 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 14:20:22 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 23ms
[INFO ] 2021-07-14 14:20:23 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 14:20:23 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 861ms
[INFO ] 2021-07-14 14:20:23 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 14:20:23 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 135ms
[INFO ] 2021-07-14 14:20:23 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 14:20:23 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 56ms
[INFO ] 2021-07-14 14:20:23 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:20:23 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 14:20:23 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 14:20:24 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 14:20:24 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 14:20:25 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 14:20:25 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 14:20:27 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 14:20:27 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@6cc91654, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3c72c488, org.springframework.security.web.context.SecurityContextPersistenceFilter@2fc2d1f0, org.springframework.security.web.header.HeaderWriterFilter@2eb6e166, org.springframework.web.filter.CorsFilter@290ebbbe, org.springframework.security.web.authentication.logout.LogoutFilter@beac39c, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@7ae2f5b6, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@5ebd3708, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@15c48119, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3b30409, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7441eed3, org.springframework.security.web.session.SessionManagementFilter@1c1bc904, org.springframework.security.web.access.ExceptionTranslationFilter@3831fb48, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3ce74930]
[INFO ] 2021-07-14 14:20:28 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 62999 (http) with context path ''
[INFO ] 2021-07-14 14:20:28 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 12.403 seconds (JVM running for 30.555)
[INFO ] 2021-07-14 14:20:28 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 14:20:28 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 14:20:29 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:20:29 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:20:29 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[INFO ] 2021-07-14 14:20:29 [http-nio-auto-1-exec-1] INFO  r.n.c.aspects.LoggingAspect - –ü—Ä–∏–Ω—è—Ç –∑–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞–µ—Ç–µ–ª—è max@mail.ru –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
[INFO ] 2021-07-14 14:26:09 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 14:26:09 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 14:26:10 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 14:26:10 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 14:26:10 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@18c5069b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3a0d172f, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@68ad99fe, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@485e36bc, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@781f10f2, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2a79d4b1, org.springframework.test.context.transaction.TransactionalTestExecutionListener@2e9fda69, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@17cdf2d0, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@1755e85b, org.springframework.test.context.event.EventPublishingTestExecutionListener@736d6a5c, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@2371aaca, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5b529706, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@63fdab07, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@7b5a12ae, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@5553d0f5, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@1af687fe, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@14dda234]
[INFO ] 2021-07-14 14:26:10 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 14:26:11 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 14:26:11 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 14:26:12 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 14:26:12 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 14:26:15 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 14:26:15 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 14:26:15 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 14:26:15 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 14:26:15 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 14:26:20 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: ab31d360dfc0ac90ad9f0ff4203f24fd32d7ca21845685b279f31398e7447d7e
[INFO ] 2021-07-14 14:26:24 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: ab31d360dfc0ac90ad9f0ff4203f24fd32d7ca21845685b279f31398e7447d7e
[INFO ] 2021-07-14 14:26:27 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT12.366147S
[INFO ] 2021-07-14 14:26:28 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 85470 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 14:26:28 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 14:26:29 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 14:26:30 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 14:26:30 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 105 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 14:26:32 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@6481dce5' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:26:32 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:26:32 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 14:26:32 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 14:26:32 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 14:26:32 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 14:26:32 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4311 ms
[INFO ] 2021-07-14 14:26:33 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 14:26:33 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 14:26:34 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 14:26:35 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 14:26:35 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 14:26:35 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:26:35 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 14:26:35 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 14:26:35 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 14:26:35 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 52ms
[INFO ] 2021-07-14 14:26:35 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 14:26:35 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 14:26:35 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 14:26:35 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 14:26:35 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 14:26:35 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 20ms
[INFO ] 2021-07-14 14:26:35 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 14:26:35 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 22ms
[INFO ] 2021-07-14 14:26:36 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 14:26:37 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 1010ms
[INFO ] 2021-07-14 14:26:37 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 14:26:37 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 66ms
[INFO ] 2021-07-14 14:26:37 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 14:26:37 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 30ms
[INFO ] 2021-07-14 14:26:37 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:26:37 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 14:26:37 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 14:26:37 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 14:26:37 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 14:26:39 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 14:26:39 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 14:26:41 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 14:26:41 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@40e420fe, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7eaa52d6, org.springframework.security.web.context.SecurityContextPersistenceFilter@5748638c, org.springframework.security.web.header.HeaderWriterFilter@1f9009d3, org.springframework.web.filter.CorsFilter@4cbf1c30, org.springframework.security.web.authentication.logout.LogoutFilter@2fc2d1f0, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@3c5095df, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@5d52a17b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6bab65b6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7cfc2a08, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@71c264e5, org.springframework.security.web.session.SessionManagementFilter@23c3f787, org.springframework.security.web.access.ExceptionTranslationFilter@51a3e3b4, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2625eb84]
[INFO ] 2021-07-14 14:26:42 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 64717 (http) with context path ''
[INFO ] 2021-07-14 14:26:42 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 14.723 seconds (JVM running for 34.361)
[INFO ] 2021-07-14 14:26:42 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 14:26:42 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 14:26:43 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:26:43 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:26:43 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[INFO ] 2021-07-14 14:26:44 [http-nio-auto-1-exec-1] INFO  r.n.c.aspects.LoggingAspect - –ü—Ä–∏–Ω—è—Ç –∑–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞–µ—Ç–µ–ª—è max@mail.ru –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
[INFO ] 2021-07-14 14:26:54 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 14:26:54 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 14:26:55 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 14:26:55 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 14:26:55 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@18c5069b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3a0d172f, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@68ad99fe, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@485e36bc, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@781f10f2, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2a79d4b1, org.springframework.test.context.transaction.TransactionalTestExecutionListener@2e9fda69, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@17cdf2d0, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@1755e85b, org.springframework.test.context.event.EventPublishingTestExecutionListener@736d6a5c, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@2371aaca, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5b529706, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@63fdab07, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@7b5a12ae, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@5553d0f5, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@1af687fe, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@14dda234]
[INFO ] 2021-07-14 14:26:56 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 14:26:59 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 14:26:59 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 14:26:59 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 14:26:59 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 14:27:03 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 14:27:03 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 14:27:03 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 14:27:04 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 14:27:04 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 14:27:09 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 8ee160d95d31cd68f8a848883be54ebd1bfeb9a49ff8992cb22f2fda7f1f70db
[INFO ] 2021-07-14 14:27:13 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 8ee160d95d31cd68f8a848883be54ebd1bfeb9a49ff8992cb22f2fda7f1f70db
[INFO ] 2021-07-14 14:27:17 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT12.928835S
[INFO ] 2021-07-14 14:27:18 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 85544 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 14:27:18 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 14:27:18 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 14:27:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 14:27:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 171 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 14:27:21 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@6481dce5' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:27:21 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:27:22 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 14:27:22 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 14:27:22 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 14:27:22 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 14:27:22 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4450 ms
[INFO ] 2021-07-14 14:27:23 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 14:27:23 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 14:27:24 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 14:27:24 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 14:27:24 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 14:27:25 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:27:25 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 14:27:25 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 14:27:25 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 14:27:25 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 71ms
[INFO ] 2021-07-14 14:27:25 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 14:27:25 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 30ms
[INFO ] 2021-07-14 14:27:25 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 14:27:25 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 27ms
[INFO ] 2021-07-14 14:27:25 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 14:27:25 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 25ms
[INFO ] 2021-07-14 14:27:25 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 14:27:25 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 36ms
[INFO ] 2021-07-14 14:27:26 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 14:27:26 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 890ms
[INFO ] 2021-07-14 14:27:26 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 14:27:26 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 115ms
[INFO ] 2021-07-14 14:27:26 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 14:27:26 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 39ms
[INFO ] 2021-07-14 14:27:26 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:27:26 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 14:27:26 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 14:27:27 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 14:27:27 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 14:27:28 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 14:27:28 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 14:27:30 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 14:27:30 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@35216a2e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3c51dec5, org.springframework.security.web.context.SecurityContextPersistenceFilter@3c82bcbd, org.springframework.security.web.header.HeaderWriterFilter@14fed48e, org.springframework.web.filter.CorsFilter@51a42767, org.springframework.security.web.authentication.logout.LogoutFilter@53fa630, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@40e420fe, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@7eaa52d6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5748638c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@33f5d807, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4cbf1c30, org.springframework.security.web.session.SessionManagementFilter@331b0bfd, org.springframework.security.web.access.ExceptionTranslationFilter@3c739a9b, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@44bbf5e3]
[INFO ] 2021-07-14 14:27:31 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 64946 (http) with context path ''
[INFO ] 2021-07-14 14:27:31 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 14.495 seconds (JVM running for 39.29)
[INFO ] 2021-07-14 14:27:31 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 14:27:31 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 14:27:32 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:27:32 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:27:32 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[INFO ] 2021-07-14 14:27:33 [http-nio-auto-1-exec-1] INFO  r.n.c.aspects.LoggingAspect - –ü—Ä–∏–Ω—è—Ç –∑–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞–µ—Ç–µ–ª—è max@mail.ru –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
[INFO ] 2021-07-14 14:28:08 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 14:28:08 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 14:28:08 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 14:28:09 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 14:28:09 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@18c5069b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3a0d172f, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@68ad99fe, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@485e36bc, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@781f10f2, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2a79d4b1, org.springframework.test.context.transaction.TransactionalTestExecutionListener@2e9fda69, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@17cdf2d0, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@1755e85b, org.springframework.test.context.event.EventPublishingTestExecutionListener@736d6a5c, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@2371aaca, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5b529706, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@63fdab07, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@7b5a12ae, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@5553d0f5, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@1af687fe, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@14dda234]
[INFO ] 2021-07-14 14:28:09 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 14:28:10 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 14:28:10 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 14:28:10 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 14:28:10 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 14:28:13 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 14:28:13 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 14:28:13 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 14:28:13 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 14:28:13 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 14:28:17 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 16b8860776e42401fd8a470405943706ef53506b6dd6ae97e527de957f3e97fd
[INFO ] 2021-07-14 14:28:21 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 16b8860776e42401fd8a470405943706ef53506b6dd6ae97e527de957f3e97fd
[INFO ] 2021-07-14 14:28:23 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT10.107566S
[INFO ] 2021-07-14 14:28:23 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 85689 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 14:28:23 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 14:28:24 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 14:28:25 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 14:28:25 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 90 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 14:28:25 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@3eac2e8a' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:28:25 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:28:26 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 14:28:26 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 14:28:26 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 14:28:26 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 14:28:26 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2525 ms
[INFO ] 2021-07-14 14:28:26 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 14:28:26 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 14:28:27 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 14:28:28 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 14:28:28 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 14:28:28 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:28:28 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 14:28:28 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 14:28:28 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 14:28:28 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 105ms
[INFO ] 2021-07-14 14:28:28 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 14:28:28 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 20ms
[INFO ] 2021-07-14 14:28:28 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 14:28:28 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 14:28:28 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 14:28:28 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 18ms
[INFO ] 2021-07-14 14:28:28 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 14:28:28 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 14:28:29 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 14:28:29 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 705ms
[INFO ] 2021-07-14 14:28:29 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 14:28:29 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 57ms
[INFO ] 2021-07-14 14:28:29 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 14:28:29 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 15ms
[INFO ] 2021-07-14 14:28:29 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:28:29 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 14:28:29 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 14:28:29 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 14:28:29 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 14:28:30 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 14:28:30 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 14:28:31 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 14:28:32 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@6a73b74c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3ce74930, org.springframework.security.web.context.SecurityContextPersistenceFilter@2eb6e166, org.springframework.security.web.header.HeaderWriterFilter@7ea0438c, org.springframework.web.filter.CorsFilter@4c58212, org.springframework.security.web.authentication.logout.LogoutFilter@34b56a5a, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@6236beac, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@1508bc71, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1c1bc904, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@57b4fc1e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1320d929, org.springframework.security.web.session.SessionManagementFilter@1f315f3d, org.springframework.security.web.access.ExceptionTranslationFilter@6a7db16e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4cae7d5]
[INFO ] 2021-07-14 14:28:33 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 65214 (http) with context path ''
[INFO ] 2021-07-14 14:28:33 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 9.937 seconds (JVM running for 26.061)
[INFO ] 2021-07-14 14:28:33 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 14:28:33 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 14:28:34 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:28:34 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:28:34 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[INFO ] 2021-07-14 14:28:34 [http-nio-auto-1-exec-1] INFO  r.n.c.aspects.LoggingAspect - –ü—Ä–∏–Ω—è—Ç –∑–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞–µ—Ç–µ–ª—è max@mail.ru –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
[ERROR] 2021-07-14 14:28:34 [http-nio-auto-1-exec-1] ERROR r.n.c.aspects.LoggingAspect - null
[ERROR] 2021-07-14 14:28:34 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler.uploadToDb(DefaultFileHandler.java:91)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$FastClassBySpringCGLIB$$8d823bb1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$EnhancerBySpringCGLIB$$d27c8673.uploadToDb(<generated>)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository.saveFile(DefaultCloudServiceFileRepository.java:53)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$FastClassBySpringCGLIB$$b940889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$EnhancerBySpringCGLIB$$60b86c03.saveFile(<generated>)
	at ru.netology.cloud_service_app.services.FileService.saveFile(FileService.java:33)
	at ru.netology.cloud_service_app.services.FileService$$FastClassBySpringCGLIB$$660dc7a6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.services.FileService$$EnhancerBySpringCGLIB$$376a84c2.saveFile(<generated>)
	at ru.netology.cloud_service_app.controllers.FileController.saveFile(FileController.java:58)
	at ru.netology.cloud_service_app.controllers.FileController$$FastClassBySpringCGLIB$$d5e7b2cc.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:58)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.controllers.FileController$$EnhancerBySpringCGLIB$$5876d295.saveFile(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 14:28:36 [SpringContextShutdownHook] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed from ACCEPTING_TRAFFIC to REFUSING_TRAFFIC
[INFO ] 2021-07-14 14:29:27 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 14:29:27 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 14:29:28 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 14:29:28 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 14:29:28 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@74a6a609, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5a411614, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@2374d36a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@54d18072, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1506f20f, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a5b70d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@424fd310, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1a45193b, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@38f116f6, org.springframework.test.context.event.EventPublishingTestExecutionListener@5286c33a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@6e6d5d29, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5c530d1e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6c25e6c4, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@85e6769, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@c5ee75e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@bf1ec20]
[INFO ] 2021-07-14 14:29:28 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 14:29:29 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 14:29:29 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 14:29:29 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 14:29:29 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 14:29:31 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 14:29:31 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 14:29:31 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 14:29:32 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 14:29:32 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 14:29:36 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 19a00923cc72cab8b2ac328e51d8ec02f1d2e0c52f76eca60a302db40536a266
[INFO ] 2021-07-14 14:29:39 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 19a00923cc72cab8b2ac328e51d8ec02f1d2e0c52f76eca60a302db40536a266
[INFO ] 2021-07-14 14:29:41 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT9.598233S
[INFO ] 2021-07-14 14:29:42 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 85862 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 14:29:42 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 14:29:42 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 14:29:43 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 14:29:43 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 80 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 14:29:43 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@7e848aea' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:29:43 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:29:44 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 14:29:44 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 14:29:44 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 14:29:44 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 14:29:44 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2513 ms
[INFO ] 2021-07-14 14:29:44 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 14:29:45 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 14:29:45 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 14:29:46 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 14:29:46 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 14:29:46 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:29:46 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 14:29:46 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 14:29:46 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 14:29:46 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 32ms
[INFO ] 2021-07-14 14:29:46 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 14:29:46 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 16ms
[INFO ] 2021-07-14 14:29:46 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 14:29:46 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 12ms
[INFO ] 2021-07-14 14:29:46 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 14:29:46 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 14:29:46 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 14:29:46 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 16ms
[INFO ] 2021-07-14 14:29:47 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 14:29:47 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 701ms
[INFO ] 2021-07-14 14:29:47 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 14:29:47 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 61ms
[INFO ] 2021-07-14 14:29:47 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 14:29:47 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 14:29:47 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:29:47 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 14:29:47 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 14:29:48 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 14:29:48 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 14:29:49 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 14:29:49 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 14:29:50 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 14:29:51 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@6236beac, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1508bc71, org.springframework.security.web.context.SecurityContextPersistenceFilter@2eb6e166, org.springframework.security.web.header.HeaderWriterFilter@7ea0438c, org.springframework.web.filter.CorsFilter@1320d929, org.springframework.security.web.authentication.logout.LogoutFilter@34b56a5a, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@3b5d0c4d, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@6cc91654, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1c1bc904, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@57b4fc1e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3c72c488, org.springframework.security.web.session.SessionManagementFilter@1f315f3d, org.springframework.security.web.access.ExceptionTranslationFilter@6a7db16e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4cae7d5]
[INFO ] 2021-07-14 14:29:53 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 49195 (http) with context path ''
[INFO ] 2021-07-14 14:29:53 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 11.362 seconds (JVM running for 26.241)
[INFO ] 2021-07-14 14:29:53 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 14:29:53 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 14:29:54 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:29:54 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:29:54 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
[INFO ] 2021-07-14 14:29:54 [http-nio-auto-1-exec-1] INFO  r.n.c.aspects.LoggingAspect - –ü—Ä–∏–Ω—è—Ç –∑–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞–µ—Ç–µ–ª—è max@mail.ru –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
[ERROR] 2021-07-14 14:29:55 [http-nio-auto-1-exec-1] ERROR r.n.c.aspects.LoggingAspect - null
[ERROR] 2021-07-14 14:29:55 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler.uploadToDb(DefaultFileHandler.java:91)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$FastClassBySpringCGLIB$$8d823bb1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$EnhancerBySpringCGLIB$$f4b6d815.uploadToDb(<generated>)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository.saveFile(DefaultCloudServiceFileRepository.java:53)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$FastClassBySpringCGLIB$$b940889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$EnhancerBySpringCGLIB$$23af88c9.saveFile(<generated>)
	at ru.netology.cloud_service_app.services.FileService.saveFile(FileService.java:33)
	at ru.netology.cloud_service_app.services.FileService$$FastClassBySpringCGLIB$$660dc7a6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.services.FileService$$EnhancerBySpringCGLIB$$9ea9e74f.saveFile(<generated>)
	at ru.netology.cloud_service_app.controllers.FileController.saveFile(FileController.java:58)
	at ru.netology.cloud_service_app.controllers.FileController$$FastClassBySpringCGLIB$$d5e7b2cc.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:58)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.controllers.FileController$$EnhancerBySpringCGLIB$$e98118d0.saveFile(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 14:29:57 [SpringContextShutdownHook] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed from ACCEPTING_TRAFFIC to REFUSING_TRAFFIC
[INFO ] 2021-07-14 14:30:55 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 14:30:55 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 14:30:55 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 14:30:55 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 14:30:55 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@74a6a609, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5a411614, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@2374d36a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@54d18072, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1506f20f, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a5b70d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@424fd310, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1a45193b, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@38f116f6, org.springframework.test.context.event.EventPublishingTestExecutionListener@5286c33a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@6e6d5d29, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5c530d1e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6c25e6c4, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@85e6769, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@c5ee75e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@bf1ec20]
[INFO ] 2021-07-14 14:30:56 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 14:30:56 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 14:30:56 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 14:30:57 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 14:30:57 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 14:30:59 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 14:30:59 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 14:30:59 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 14:30:59 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 14:30:59 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 14:31:03 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 7de501c28c2d07a7f3f89539c01051e99ce226718f52e7e9f80336127761b52a
[INFO ] 2021-07-14 14:31:07 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 7de501c28c2d07a7f3f89539c01051e99ce226718f52e7e9f80336127761b52a
[INFO ] 2021-07-14 14:31:09 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT10.321121S
[INFO ] 2021-07-14 14:31:10 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 86064 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 14:31:10 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 14:31:10 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 14:31:11 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 14:31:11 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 80 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 14:31:11 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@7e848aea' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:31:12 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:31:12 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 14:31:12 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 14:31:12 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 14:31:12 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 14:31:12 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2300 ms
[INFO ] 2021-07-14 14:31:12 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 14:31:12 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 14:31:13 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 14:31:14 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 14:31:14 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 14:31:14 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:31:14 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 14:31:14 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 14:31:14 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 14:31:14 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 62ms
[INFO ] 2021-07-14 14:31:14 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 14:31:14 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 20ms
[INFO ] 2021-07-14 14:31:14 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 14:31:14 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 13ms
[INFO ] 2021-07-14 14:31:14 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 14:31:14 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 23ms
[INFO ] 2021-07-14 14:31:14 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 14:31:14 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 20ms
[INFO ] 2021-07-14 14:31:15 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 14:31:15 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 1285ms
[INFO ] 2021-07-14 14:31:16 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 14:31:16 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 158ms
[INFO ] 2021-07-14 14:31:16 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 14:31:16 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 25ms
[INFO ] 2021-07-14 14:31:16 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:31:16 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 14:31:16 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 14:31:17 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 14:31:17 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 14:31:19 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 14:31:19 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 14:31:20 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 14:31:21 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@3c72c488, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@290ebbbe, org.springframework.security.web.context.SecurityContextPersistenceFilter@2eb6e166, org.springframework.security.web.header.HeaderWriterFilter@7ea0438c, org.springframework.web.filter.CorsFilter@7ae2f5b6, org.springframework.security.web.authentication.logout.LogoutFilter@34b56a5a, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@5ebd3708, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@7441eed3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1c1bc904, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@57b4fc1e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@284e68ae, org.springframework.security.web.session.SessionManagementFilter@1f315f3d, org.springframework.security.web.access.ExceptionTranslationFilter@6a7db16e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4c58212]
[INFO ] 2021-07-14 14:31:22 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 49588 (http) with context path ''
[INFO ] 2021-07-14 14:31:22 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 12.261 seconds (JVM running for 27.591)
[INFO ] 2021-07-14 14:31:22 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 14:31:22 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 14:31:22 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:31:22 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:31:22 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[INFO ] 2021-07-14 14:31:23 [http-nio-auto-1-exec-1] INFO  r.n.c.aspects.LoggingAspect - –ü—Ä–∏–Ω—è—Ç –∑–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞–µ—Ç–µ–ª—è max@mail.ru –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
[ERROR] 2021-07-14 14:31:23 [http-nio-auto-1-exec-1] ERROR r.n.c.aspects.LoggingAspect - null
[ERROR] 2021-07-14 14:31:23 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler.uploadToDb(DefaultFileHandler.java:91)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$FastClassBySpringCGLIB$$8d823bb1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$EnhancerBySpringCGLIB$$f4b6d815.uploadToDb(<generated>)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository.saveFile(DefaultCloudServiceFileRepository.java:53)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$FastClassBySpringCGLIB$$b940889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$EnhancerBySpringCGLIB$$23af88c9.saveFile(<generated>)
	at ru.netology.cloud_service_app.services.FileService.saveFile(FileService.java:33)
	at ru.netology.cloud_service_app.services.FileService$$FastClassBySpringCGLIB$$660dc7a6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.services.FileService$$EnhancerBySpringCGLIB$$9ea9e74f.saveFile(<generated>)
	at ru.netology.cloud_service_app.controllers.FileController.saveFile(FileController.java:58)
	at ru.netology.cloud_service_app.controllers.FileController$$FastClassBySpringCGLIB$$d5e7b2cc.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:58)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.controllers.FileController$$EnhancerBySpringCGLIB$$e98118d0.saveFile(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 14:31:24 [SpringContextShutdownHook] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed from ACCEPTING_TRAFFIC to REFUSING_TRAFFIC
[INFO ] 2021-07-14 14:38:41 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 14:38:41 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 14:38:41 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 14:38:42 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 14:38:42 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@b7838a9, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@696f0212, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@5733f295, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@1c3146bc, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@56c698e3, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a86fbb, org.springframework.test.context.transaction.TransactionalTestExecutionListener@f478a81, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@19553973, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@7bb6ab3a, org.springframework.test.context.event.EventPublishingTestExecutionListener@7fe7c640, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@4c4748bf, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@7ce97ee5, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@32c8e539, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@73dce0e6, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@5a85c92, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@32811494, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@4795ded0]
[INFO ] 2021-07-14 14:38:43 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 14:38:44 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 14:38:44 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 14:38:44 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 14:38:44 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 14:38:47 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 14:38:47 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 14:38:47 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 14:38:47 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 14:38:47 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 14:38:52 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 183f8c5372f0e06151e34e6481e3f654e0230af616f5801825b1c7adf6d031a3
[INFO ] 2021-07-14 14:38:56 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 183f8c5372f0e06151e34e6481e3f654e0230af616f5801825b1c7adf6d031a3
[INFO ] 2021-07-14 14:38:58 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT11.031581S
[INFO ] 2021-07-14 14:38:59 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 87423 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 14:38:59 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 14:38:59 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 14:39:00 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 14:39:00 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 135 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 14:39:01 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@5889fc44' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:39:01 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:39:02 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 14:39:02 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 14:39:02 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 14:39:02 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 14:39:02 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3494 ms
[INFO ] 2021-07-14 14:39:03 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 14:39:03 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 14:39:04 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 14:39:04 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 14:39:04 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 14:39:05 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:39:05 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 14:39:05 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 14:39:05 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 14:39:05 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 47ms
[INFO ] 2021-07-14 14:39:05 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 14:39:05 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 14:39:05 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 14:39:05 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 18ms
[INFO ] 2021-07-14 14:39:05 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 14:39:05 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 20ms
[INFO ] 2021-07-14 14:39:05 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 14:39:05 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 16ms
[INFO ] 2021-07-14 14:39:06 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 14:39:06 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 836ms
[INFO ] 2021-07-14 14:39:06 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 14:39:06 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 87ms
[INFO ] 2021-07-14 14:39:06 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 14:39:06 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 50ms
[INFO ] 2021-07-14 14:39:06 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:39:06 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 14:39:06 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 14:39:06 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 14:39:07 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 14:39:08 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 14:39:08 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 14:39:09 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 14:39:10 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@d56d9f6, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@358f85b1, org.springframework.security.web.context.SecurityContextPersistenceFilter@3d2a164e, org.springframework.security.web.header.HeaderWriterFilter@533ed36e, org.springframework.web.filter.CorsFilter@2b01bb54, org.springframework.security.web.authentication.logout.LogoutFilter@4c58212, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@e822394, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@3520d2db, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3c51dec5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3c5095df, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7c4b7bc3, org.springframework.security.web.session.SessionManagementFilter@44bbf5e3, org.springframework.security.web.access.ExceptionTranslationFilter@41843b88, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@515a897c]
[INFO ] 2021-07-14 14:39:11 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 51564 (http) with context path ''
[INFO ] 2021-07-14 14:39:11 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 12.733 seconds (JVM running for 33.365)
[INFO ] 2021-07-14 14:39:11 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 14:39:11 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 14:39:12 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:39:12 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:39:12 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[ERROR] 2021-07-14 14:39:12 [http-nio-auto-1-exec-1] ERROR r.n.c.aspects.LoggingAspect - null
[ERROR] 2021-07-14 14:39:12 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler.uploadToDb(DefaultFileHandler.java:91)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$FastClassBySpringCGLIB$$8d823bb1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$EnhancerBySpringCGLIB$$6ac81ff1.uploadToDb(<generated>)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository.saveFile(DefaultCloudServiceFileRepository.java:53)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$FastClassBySpringCGLIB$$b940889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$EnhancerBySpringCGLIB$$27603fa7.saveFile(<generated>)
	at ru.netology.cloud_service_app.services.FileService.saveFile(FileService.java:33)
	at ru.netology.cloud_service_app.services.FileService$$FastClassBySpringCGLIB$$660dc7a6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.services.FileService$$EnhancerBySpringCGLIB$$43f09a99.saveFile(<generated>)
	at ru.netology.cloud_service_app.controllers.FileController.saveFile(FileController.java:62)
	at ru.netology.cloud_service_app.controllers.FileController$$FastClassBySpringCGLIB$$d5e7b2cc.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.controllers.FileController$$EnhancerBySpringCGLIB$$c7074f09.saveFile(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 14:40:37 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 14:40:37 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 14:40:37 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 14:40:37 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 14:40:37 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@74a6a609, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5a411614, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@2374d36a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@54d18072, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1506f20f, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a5b70d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@424fd310, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1a45193b, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@38f116f6, org.springframework.test.context.event.EventPublishingTestExecutionListener@5286c33a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@6e6d5d29, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5c530d1e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6c25e6c4, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@85e6769, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@c5ee75e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@bf1ec20]
[INFO ] 2021-07-14 14:40:37 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 14:40:38 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 14:40:38 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 14:40:38 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 14:40:38 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 14:40:40 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 14:40:40 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 14:40:40 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 14:40:40 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 14:40:41 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 14:40:46 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 242c6e6c824b17634c406509665dbc8915d0c0ce785dd6d5a122e432c8bdc5fa
[INFO ] 2021-07-14 14:40:50 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 242c6e6c824b17634c406509665dbc8915d0c0ce785dd6d5a122e432c8bdc5fa
[INFO ] 2021-07-14 14:40:52 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT11.792671S
[INFO ] 2021-07-14 14:40:53 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 87722 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 14:40:53 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 14:40:53 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 14:40:54 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 14:40:55 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 127 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 14:40:56 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@1b4a3a1' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:40:56 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:40:56 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 14:40:56 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 14:40:56 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 14:40:56 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 14:40:56 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3408 ms
[INFO ] 2021-07-14 14:40:57 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 14:40:57 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 14:40:58 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 14:40:59 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 14:40:59 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 14:40:59 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:40:59 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 14:40:59 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 14:40:59 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 14:40:59 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 54ms
[INFO ] 2021-07-14 14:40:59 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 14:40:59 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 19ms
[INFO ] 2021-07-14 14:40:59 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 14:40:59 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 21ms
[INFO ] 2021-07-14 14:40:59 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 14:40:59 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 22ms
[INFO ] 2021-07-14 14:40:59 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 14:40:59 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 19ms
[INFO ] 2021-07-14 14:41:00 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 14:41:00 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 792ms
[INFO ] 2021-07-14 14:41:00 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 14:41:00 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 60ms
[INFO ] 2021-07-14 14:41:00 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 14:41:00 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 21ms
[INFO ] 2021-07-14 14:41:00 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:41:00 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 14:41:00 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 14:41:00 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 14:41:01 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 14:41:02 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 14:41:02 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 14:41:03 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 14:41:03 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@5100fe55, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3ef97efc, org.springframework.security.web.context.SecurityContextPersistenceFilter@5d52a17b, org.springframework.security.web.header.HeaderWriterFilter@35216a2e, org.springframework.web.filter.CorsFilter@46244e65, org.springframework.security.web.authentication.logout.LogoutFilter@5ebd3708, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@20c1cb0c, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@76e56b17, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7d6e2366, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@16bed816, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@31ee5a9, org.springframework.security.web.session.SessionManagementFilter@40e420fe, org.springframework.security.web.access.ExceptionTranslationFilter@44bbf5e3, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@e822394]
[INFO ] 2021-07-14 14:41:04 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 52058 (http) with context path ''
[INFO ] 2021-07-14 14:41:04 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 11.898 seconds (JVM running for 28.517)
[INFO ] 2021-07-14 14:41:04 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 14:41:04 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 14:41:05 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:41:05 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:41:05 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[ERROR] 2021-07-14 14:41:05 [http-nio-auto-1-exec-1] ERROR r.n.c.aspects.LoggingAspect - null
[ERROR] 2021-07-14 14:41:05 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler.uploadToDb(DefaultFileHandler.java:91)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$FastClassBySpringCGLIB$$8d823bb1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$EnhancerBySpringCGLIB$$b186be6c.uploadToDb(<generated>)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository.saveFile(DefaultCloudServiceFileRepository.java:53)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$FastClassBySpringCGLIB$$b940889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$EnhancerBySpringCGLIB$$b9a38994.saveFile(<generated>)
	at ru.netology.cloud_service_app.services.FileService.saveFile(FileService.java:33)
	at ru.netology.cloud_service_app.services.FileService$$FastClassBySpringCGLIB$$660dc7a6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.services.FileService$$EnhancerBySpringCGLIB$$dde87edb.saveFile(<generated>)
	at ru.netology.cloud_service_app.controllers.FileController.saveFile(FileController.java:62)
	at ru.netology.cloud_service_app.controllers.FileController$$FastClassBySpringCGLIB$$d5e7b2cc.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.controllers.FileController$$EnhancerBySpringCGLIB$$c1484012.saveFile(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 14:42:46 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 14:42:46 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 14:42:46 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 14:42:46 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 14:42:46 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@74a6a609, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5a411614, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@2374d36a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@54d18072, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1506f20f, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a5b70d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@424fd310, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1a45193b, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@38f116f6, org.springframework.test.context.event.EventPublishingTestExecutionListener@5286c33a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@6e6d5d29, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5c530d1e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6c25e6c4, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@85e6769, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@c5ee75e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@bf1ec20]
[INFO ] 2021-07-14 14:42:47 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 14:42:48 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 14:42:48 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 14:42:48 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 14:42:48 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 14:42:50 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 14:42:50 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 14:42:50 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 14:42:50 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 14:42:50 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 14:42:54 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 5f08d2de8edffab1e896e48e7ec4b01eecd6a2b6cf2bbb36f10147ad72a0bfae
[INFO ] 2021-07-14 14:42:58 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 5f08d2de8edffab1e896e48e7ec4b01eecd6a2b6cf2bbb36f10147ad72a0bfae
[INFO ] 2021-07-14 14:43:00 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT10.335173S
[INFO ] 2021-07-14 14:43:01 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 88033 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 14:43:01 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 14:43:01 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 14:43:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 14:43:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 96 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 14:43:03 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@10dfa7ef' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:43:03 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:43:03 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 14:43:03 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 14:43:03 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 14:43:03 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 14:43:03 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2515 ms
[INFO ] 2021-07-14 14:43:04 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 14:43:04 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 14:43:04 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 14:43:05 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 14:43:05 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 14:43:05 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:43:05 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 14:43:05 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 14:43:05 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 14:43:05 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 45ms
[INFO ] 2021-07-14 14:43:05 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 14:43:05 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 11ms
[INFO ] 2021-07-14 14:43:05 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 14:43:05 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 14ms
[INFO ] 2021-07-14 14:43:05 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 14:43:05 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 18ms
[INFO ] 2021-07-14 14:43:05 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 14:43:05 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 14:43:06 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 14:43:06 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 675ms
[INFO ] 2021-07-14 14:43:06 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 14:43:06 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 62ms
[INFO ] 2021-07-14 14:43:06 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 14:43:06 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 14:43:06 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:43:06 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 14:43:06 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 14:43:07 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 14:43:07 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 14:43:08 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 14:43:08 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 14:43:09 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 14:43:09 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@72de1d86, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@9124278, org.springframework.security.web.context.SecurityContextPersistenceFilter@3b30409, org.springframework.security.web.header.HeaderWriterFilter@57b4fc1e, org.springframework.web.filter.CorsFilter@524250ec, org.springframework.security.web.authentication.logout.LogoutFilter@3b538e2a, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@7432cb37, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@7602da1a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@24d998ba, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@70c6860, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6d985720, org.springframework.security.web.session.SessionManagementFilter@2cb09f00, org.springframework.security.web.access.ExceptionTranslationFilter@7bdbf06f, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@290ebbbe]
[INFO ] 2021-07-14 14:43:10 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 52586 (http) with context path ''
[INFO ] 2021-07-14 14:43:10 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 9.853 seconds (JVM running for 25.202)
[INFO ] 2021-07-14 14:43:10 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 14:43:10 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 14:43:11 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:43:11 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:43:11 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[ERROR] 2021-07-14 14:43:11 [http-nio-auto-1-exec-1] ERROR r.n.c.aspects.LoggingAspect - null
[ERROR] 2021-07-14 14:43:11 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler.uploadToDb(DefaultFileHandler.java:91)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$FastClassBySpringCGLIB$$8d823bb1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$EnhancerBySpringCGLIB$$44ed914e.uploadToDb(<generated>)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository.saveFile(DefaultCloudServiceFileRepository.java:53)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$FastClassBySpringCGLIB$$b940889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$EnhancerBySpringCGLIB$$2d2fb646.saveFile(<generated>)
	at ru.netology.cloud_service_app.services.FileService.saveFile(FileService.java:33)
	at ru.netology.cloud_service_app.services.FileService$$FastClassBySpringCGLIB$$660dc7a6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.services.FileService$$EnhancerBySpringCGLIB$$68a0612f.saveFile(<generated>)
	at ru.netology.cloud_service_app.controllers.FileController.saveFile(FileController.java:65)
	at ru.netology.cloud_service_app.controllers.FileController$$FastClassBySpringCGLIB$$d5e7b2cc.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.controllers.FileController$$EnhancerBySpringCGLIB$$c2d93937.saveFile(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 14:44:01 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 14:44:01 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 14:44:01 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 14:44:01 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 14:44:01 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@74a6a609, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5a411614, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@2374d36a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@54d18072, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1506f20f, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a5b70d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@424fd310, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1a45193b, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@38f116f6, org.springframework.test.context.event.EventPublishingTestExecutionListener@5286c33a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@6e6d5d29, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5c530d1e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6c25e6c4, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@85e6769, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@c5ee75e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@bf1ec20]
[INFO ] 2021-07-14 14:44:02 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 14:44:02 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 14:44:02 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 14:44:02 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 14:44:02 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 14:44:05 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 14:44:05 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 14:44:05 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 14:44:05 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 14:44:05 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 14:44:09 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 4c8c7c1fc345065063cc8dfcd3ee2cdf08678a37558667a884b4c02f26f06280
[INFO ] 2021-07-14 14:44:12 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 4c8c7c1fc345065063cc8dfcd3ee2cdf08678a37558667a884b4c02f26f06280
[INFO ] 2021-07-14 14:44:14 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT9.326162S
[INFO ] 2021-07-14 14:44:15 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 88201 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 14:44:15 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 14:44:15 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 14:44:16 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 14:44:16 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 82 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 14:44:16 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@44384b4a' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:44:16 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:44:17 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 14:44:17 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 14:44:17 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 14:44:17 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 14:44:17 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2244 ms
[INFO ] 2021-07-14 14:44:17 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 14:44:17 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 14:44:18 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 14:44:18 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 14:44:18 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 14:44:19 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:44:19 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 14:44:19 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 14:44:19 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 14:44:19 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 33ms
[INFO ] 2021-07-14 14:44:19 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 14:44:19 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 10ms
[INFO ] 2021-07-14 14:44:19 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 14:44:19 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 9ms
[INFO ] 2021-07-14 14:44:19 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 14:44:19 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 14ms
[INFO ] 2021-07-14 14:44:19 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 14:44:19 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 30ms
[INFO ] 2021-07-14 14:44:19 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 14:44:19 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 649ms
[INFO ] 2021-07-14 14:44:19 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 14:44:19 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 47ms
[INFO ] 2021-07-14 14:44:19 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 14:44:19 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 15ms
[INFO ] 2021-07-14 14:44:19 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:44:20 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 14:44:20 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 14:44:20 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 14:44:20 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 14:44:21 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 14:44:21 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 14:44:23 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 14:44:23 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@2810d9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@408f3054, org.springframework.security.web.context.SecurityContextPersistenceFilter@7ef6a063, org.springframework.security.web.header.HeaderWriterFilter@11885841, org.springframework.web.filter.CorsFilter@2a64cb1f, org.springframework.security.web.authentication.logout.LogoutFilter@3c51dec5, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@3644d12a, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@76aab1e3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@509e4bc4, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1c74eeb7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4f9e32f2, org.springframework.security.web.session.SessionManagementFilter@99e03a9, org.springframework.security.web.access.ExceptionTranslationFilter@2cb09f00, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7432cb37]
[INFO ] 2021-07-14 14:44:24 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 52902 (http) with context path ''
[INFO ] 2021-07-14 14:44:24 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 9.628 seconds (JVM running for 24.138)
[INFO ] 2021-07-14 14:44:24 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 14:44:24 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 14:44:25 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:44:25 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:44:25 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
[ERROR] 2021-07-14 14:44:25 [http-nio-auto-1-exec-1] ERROR r.n.c.aspects.LoggingAspect - null
[ERROR] 2021-07-14 14:44:25 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler.uploadToDb(DefaultFileHandler.java:91)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$FastClassBySpringCGLIB$$8d823bb1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$EnhancerBySpringCGLIB$$7130f80e.uploadToDb(<generated>)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository.saveFile(DefaultCloudServiceFileRepository.java:53)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$FastClassBySpringCGLIB$$b940889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$EnhancerBySpringCGLIB$$3c90653e.saveFile(<generated>)
	at ru.netology.cloud_service_app.services.FileService.saveFile(FileService.java:33)
	at ru.netology.cloud_service_app.services.FileService$$FastClassBySpringCGLIB$$660dc7a6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.services.FileService$$EnhancerBySpringCGLIB$$2ece00ea.saveFile(<generated>)
	at ru.netology.cloud_service_app.controllers.FileController.saveFile(FileController.java:65)
	at ru.netology.cloud_service_app.controllers.FileController$$FastClassBySpringCGLIB$$d5e7b2cc.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.controllers.FileController$$EnhancerBySpringCGLIB$$b3067ada.saveFile(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 14:44:27 [SpringContextShutdownHook] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed from ACCEPTING_TRAFFIC to REFUSING_TRAFFIC
[INFO ] 2021-07-14 14:46:33 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 14:46:33 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 14:46:33 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 14:46:33 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 14:46:33 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@74a6a609, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5a411614, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@2374d36a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@54d18072, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1506f20f, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a5b70d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@424fd310, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1a45193b, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@38f116f6, org.springframework.test.context.event.EventPublishingTestExecutionListener@5286c33a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@6e6d5d29, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5c530d1e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6c25e6c4, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@85e6769, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@c5ee75e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@bf1ec20]
[INFO ] 2021-07-14 14:46:33 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 14:46:34 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 14:46:34 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 14:46:34 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 14:46:34 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 14:46:36 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 14:46:36 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 14:46:36 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 14:46:36 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 14:46:36 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 14:46:40 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: be95a089436c07ab59f0e2b57d1e662663d940d6aa8d2d0d3fda06789e00ac2f
[INFO ] 2021-07-14 14:46:43 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: be95a089436c07ab59f0e2b57d1e662663d940d6aa8d2d0d3fda06789e00ac2f
[INFO ] 2021-07-14 14:46:45 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT8.817126S
[INFO ] 2021-07-14 14:46:45 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 88611 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 14:46:45 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 14:46:45 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 14:46:46 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 14:46:46 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 71 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 14:46:47 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@7f8c3646' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:46:47 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:46:47 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 14:46:47 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 14:46:47 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 14:46:47 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 14:46:47 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2118 ms
[INFO ] 2021-07-14 14:46:48 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 14:46:48 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 14:46:48 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 14:46:49 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 14:46:49 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 14:46:49 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:46:49 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 14:46:49 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 14:46:49 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 14:46:49 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 32ms
[INFO ] 2021-07-14 14:46:49 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 14:46:49 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 12ms
[INFO ] 2021-07-14 14:46:49 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 14:46:49 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 10ms
[INFO ] 2021-07-14 14:46:49 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 14:46:49 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 16ms
[INFO ] 2021-07-14 14:46:49 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 14:46:49 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 20ms
[INFO ] 2021-07-14 14:46:50 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 14:46:50 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 638ms
[INFO ] 2021-07-14 14:46:50 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 14:46:50 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 45ms
[INFO ] 2021-07-14 14:46:50 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 14:46:50 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 15ms
[INFO ] 2021-07-14 14:46:50 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:46:50 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 14:46:50 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 14:46:50 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 14:46:50 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 14:46:51 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 14:46:51 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 14:46:52 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 14:46:53 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@375dc95c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@33ef701e, org.springframework.security.web.context.SecurityContextPersistenceFilter@5a564a61, org.springframework.security.web.header.HeaderWriterFilter@254dfd34, org.springframework.web.filter.CorsFilter@1fd1deed, org.springframework.security.web.authentication.logout.LogoutFilter@5b6a9ef6, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@814b60b, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@515a897c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@533ed36e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@463e0b6a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@197d6cc9, org.springframework.security.web.session.SessionManagementFilter@beac39c, org.springframework.security.web.access.ExceptionTranslationFilter@7ef6a063, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@537360e3]
[INFO ] 2021-07-14 14:46:53 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 53520 (http) with context path ''
[INFO ] 2021-07-14 14:46:53 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 8.606 seconds (JVM running for 21.653)
[INFO ] 2021-07-14 14:46:53 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 14:46:53 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 14:46:54 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:46:54 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:46:54 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[ERROR] 2021-07-14 14:46:55 [http-nio-auto-1-exec-1] ERROR r.n.c.aspects.LoggingAspect - null
[ERROR] 2021-07-14 14:46:55 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler.uploadToDb(DefaultFileHandler.java:91)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$FastClassBySpringCGLIB$$8d823bb1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$EnhancerBySpringCGLIB$$28051785.uploadToDb(<generated>)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository.saveFile(DefaultCloudServiceFileRepository.java:53)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$FastClassBySpringCGLIB$$b940889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$EnhancerBySpringCGLIB$$4e61eefb.saveFile(<generated>)
	at ru.netology.cloud_service_app.services.FileService.saveFile(FileService.java:33)
	at ru.netology.cloud_service_app.services.FileService$$FastClassBySpringCGLIB$$660dc7a6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.services.FileService$$EnhancerBySpringCGLIB$$55216c9c.saveFile(<generated>)
	at ru.netology.cloud_service_app.controllers.FileController.saveFile(FileController.java:65)
	at ru.netology.cloud_service_app.controllers.FileController$$FastClassBySpringCGLIB$$d5e7b2cc.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.controllers.FileController$$EnhancerBySpringCGLIB$$9d9aa5e2.saveFile(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 14:47:30 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 14:47:30 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 14:47:30 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 14:47:30 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 14:47:30 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@74a6a609, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5a411614, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@2374d36a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@54d18072, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1506f20f, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a5b70d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@424fd310, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1a45193b, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@38f116f6, org.springframework.test.context.event.EventPublishingTestExecutionListener@5286c33a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@6e6d5d29, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5c530d1e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6c25e6c4, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@85e6769, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@c5ee75e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@bf1ec20]
[INFO ] 2021-07-14 14:47:31 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 14:47:32 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 14:47:32 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 14:47:32 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 14:47:32 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 14:47:34 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 14:47:34 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 14:47:34 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 14:47:34 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 14:47:34 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 14:47:38 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: b3f408f9a656d03bdd859100141962af48fc3cee943fa78846435c0287498af7
[INFO ] 2021-07-14 14:47:41 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: b3f408f9a656d03bdd859100141962af48fc3cee943fa78846435c0287498af7
[INFO ] 2021-07-14 14:47:43 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT8.990681S
[INFO ] 2021-07-14 14:47:44 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 88751 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 14:47:44 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 14:47:44 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 14:47:45 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 14:47:45 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 76 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 14:47:45 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@5a06904' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:47:45 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:47:46 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 14:47:46 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 14:47:46 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 14:47:46 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 14:47:46 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2333 ms
[INFO ] 2021-07-14 14:47:46 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 14:47:46 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 14:47:47 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 14:47:47 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 14:47:47 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 14:47:47 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:47:47 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 14:47:47 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 14:47:47 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 14:47:47 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 31ms
[INFO ] 2021-07-14 14:47:47 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 14:47:47 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 10ms
[INFO ] 2021-07-14 14:47:47 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 14:47:47 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 10ms
[INFO ] 2021-07-14 14:47:47 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 14:47:47 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 14ms
[INFO ] 2021-07-14 14:47:47 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 14:47:47 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 14ms
[INFO ] 2021-07-14 14:47:48 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 14:47:48 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 593ms
[INFO ] 2021-07-14 14:47:48 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 14:47:48 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 41ms
[INFO ] 2021-07-14 14:47:48 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 14:47:48 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 14:47:48 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:47:48 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 14:47:48 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 14:47:49 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 14:47:49 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 14:47:50 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 14:47:50 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 14:47:51 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 14:47:51 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@537360e3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@70f5f6c7, org.springframework.security.web.context.SecurityContextPersistenceFilter@72f4232, org.springframework.security.web.header.HeaderWriterFilter@7ef6a063, org.springframework.web.filter.CorsFilter@4ec25389, org.springframework.security.web.authentication.logout.LogoutFilter@71c264e5, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@7cff1930, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@34c31a34, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@41843b88, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@38d1c7d2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6b5f91a5, org.springframework.security.web.session.SessionManagementFilter@509e4bc4, org.springframework.security.web.access.ExceptionTranslationFilter@24d998ba, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@408f3054]
[INFO ] 2021-07-14 14:47:52 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 53775 (http) with context path ''
[INFO ] 2021-07-14 14:47:52 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 8.931 seconds (JVM running for 23.018)
[INFO ] 2021-07-14 14:47:52 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 14:47:52 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 14:47:53 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:47:53 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:47:53 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[ERROR] 2021-07-14 14:47:53 [http-nio-auto-1-exec-1] ERROR r.n.c.aspects.LoggingAspect - null
[ERROR] 2021-07-14 14:47:53 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler.uploadToDb(DefaultFileHandler.java:91)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$FastClassBySpringCGLIB$$8d823bb1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$EnhancerBySpringCGLIB$$9dc30603.uploadToDb(<generated>)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository.saveFile(DefaultCloudServiceFileRepository.java:53)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$FastClassBySpringCGLIB$$b940889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$EnhancerBySpringCGLIB$$adc623a9.saveFile(<generated>)
	at ru.netology.cloud_service_app.services.FileService.saveFile(FileService.java:33)
	at ru.netology.cloud_service_app.services.FileService$$FastClassBySpringCGLIB$$660dc7a6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.services.FileService$$EnhancerBySpringCGLIB$$ce841e20.saveFile(<generated>)
	at ru.netology.cloud_service_app.controllers.FileController.saveFile(FileController.java:65)
	at ru.netology.cloud_service_app.controllers.FileController$$FastClassBySpringCGLIB$$d5e7b2cc.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.controllers.FileController$$EnhancerBySpringCGLIB$$be05350e.saveFile(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 14:51:37 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 14:51:37 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 14:51:37 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 14:51:38 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 14:51:38 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@74a6a609, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5a411614, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@2374d36a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@54d18072, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1506f20f, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a5b70d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@424fd310, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1a45193b, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@38f116f6, org.springframework.test.context.event.EventPublishingTestExecutionListener@5286c33a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@6e6d5d29, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5c530d1e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6c25e6c4, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@85e6769, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@c5ee75e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@bf1ec20]
[INFO ] 2021-07-14 14:51:38 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 14:51:39 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 14:51:39 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 14:51:39 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 14:51:39 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 14:51:41 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 14:51:41 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 14:51:41 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 14:51:41 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 14:51:41 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 14:51:45 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 37a9846bc2619126e3cb9bab1e44b5ff64dcbd83c3fecbf4d639b92ff640fcdb
[INFO ] 2021-07-14 14:51:49 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 37a9846bc2619126e3cb9bab1e44b5ff64dcbd83c3fecbf4d639b92ff640fcdb
[INFO ] 2021-07-14 14:51:52 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT10.454309S
[INFO ] 2021-07-14 14:51:52 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 89459 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 14:51:52 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 14:51:53 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 14:51:54 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 14:51:54 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 111 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 14:51:55 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@4239262e' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:51:55 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:51:56 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 14:51:56 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 14:51:56 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 14:51:56 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 14:51:56 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3573 ms
[INFO ] 2021-07-14 14:51:56 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 14:51:57 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 14:51:57 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 14:51:58 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 14:51:58 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 14:51:58 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:51:58 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 14:51:58 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 14:51:58 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 14:51:58 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 69ms
[INFO ] 2021-07-14 14:51:58 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 14:51:58 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 16ms
[INFO ] 2021-07-14 14:51:58 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 14:51:58 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 15ms
[INFO ] 2021-07-14 14:51:58 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 14:51:58 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 18ms
[INFO ] 2021-07-14 14:51:58 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 14:51:58 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 19ms
[INFO ] 2021-07-14 14:51:59 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 14:51:59 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 802ms
[INFO ] 2021-07-14 14:51:59 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 14:51:59 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 72ms
[INFO ] 2021-07-14 14:51:59 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 14:51:59 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 22ms
[INFO ] 2021-07-14 14:51:59 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:52:00 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 14:52:00 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 14:52:00 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 14:52:00 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 14:52:01 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 14:52:01 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 14:52:03 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 14:52:03 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@1508bc71, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1320d929, org.springframework.security.web.context.SecurityContextPersistenceFilter@53fa630, org.springframework.security.web.header.HeaderWriterFilter@63f1d374, org.springframework.web.filter.CorsFilter@3b5d0c4d, org.springframework.security.web.authentication.logout.LogoutFilter@254dfd34, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@6cc91654, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@3c72c488, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2fc2d1f0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5c14c284, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@290ebbbe, org.springframework.security.web.session.SessionManagementFilter@2eb6e166, org.springframework.security.web.access.ExceptionTranslationFilter@66a5cbe5, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@70290678]
[INFO ] 2021-07-14 14:52:04 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 55023 (http) with context path ''
[INFO ] 2021-07-14 14:52:04 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 12.591 seconds (JVM running for 28.056)
[INFO ] 2021-07-14 14:52:04 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 14:52:04 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 14:52:05 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:52:05 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:52:05 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[ERROR] 2021-07-14 14:52:06 [http-nio-auto-1-exec-1] ERROR r.n.c.aspects.LoggingAspect - null
[ERROR] 2021-07-14 14:52:06 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler.uploadToDb(DefaultFileHandler.java:91)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$FastClassBySpringCGLIB$$8d823bb1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$EnhancerBySpringCGLIB$$854a7e8a.uploadToDb(<generated>)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository.saveFile(DefaultCloudServiceFileRepository.java:53)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$FastClassBySpringCGLIB$$b940889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$EnhancerBySpringCGLIB$$191906c8.saveFile(<generated>)
	at ru.netology.cloud_service_app.services.FileService.saveFile(FileService.java:33)
	at ru.netology.cloud_service_app.services.FileService$$FastClassBySpringCGLIB$$660dc7a6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.services.FileService$$EnhancerBySpringCGLIB$$12a301d6.saveFile(<generated>)
	at ru.netology.cloud_service_app.controllers.FileController.saveFile(FileController.java:65)
	at ru.netology.cloud_service_app.controllers.FileController$$FastClassBySpringCGLIB$$d5e7b2cc.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.controllers.FileController$$EnhancerBySpringCGLIB$$892205aa.saveFile(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 14:53:10 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 14:53:10 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 14:53:10 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 14:53:11 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 14:53:11 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@74a6a609, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5a411614, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@2374d36a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@54d18072, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1506f20f, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a5b70d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@424fd310, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1a45193b, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@38f116f6, org.springframework.test.context.event.EventPublishingTestExecutionListener@5286c33a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@6e6d5d29, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5c530d1e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6c25e6c4, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@85e6769, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@c5ee75e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@bf1ec20]
[INFO ] 2021-07-14 14:53:11 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 14:53:12 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 14:53:12 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 14:53:12 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 14:53:12 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 14:53:14 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 14:53:14 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 14:53:14 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 14:53:14 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 14:53:14 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 14:53:18 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 25e3edde1e68624f624176ab73044dfa72af134be9278a88fbf3a0c04060b59d
[INFO ] 2021-07-14 14:53:21 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 25e3edde1e68624f624176ab73044dfa72af134be9278a88fbf3a0c04060b59d
[INFO ] 2021-07-14 14:53:23 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT9.141216S
[INFO ] 2021-07-14 14:53:24 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 89690 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 14:53:24 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 14:53:24 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 14:53:25 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 14:53:25 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 171 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 14:53:26 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@1b4a3a1' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:53:26 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:53:26 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 14:53:26 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 14:53:26 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 14:53:26 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 14:53:26 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2542 ms
[INFO ] 2021-07-14 14:53:26 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 14:53:27 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 14:53:27 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 14:53:28 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 14:53:28 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 14:53:28 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:53:28 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 14:53:28 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 14:53:28 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 14:53:28 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 36ms
[INFO ] 2021-07-14 14:53:28 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 14:53:28 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 12ms
[INFO ] 2021-07-14 14:53:28 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 14:53:28 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 14ms
[INFO ] 2021-07-14 14:53:28 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 14:53:28 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 16ms
[INFO ] 2021-07-14 14:53:28 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 14:53:28 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 14ms
[INFO ] 2021-07-14 14:53:29 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 14:53:29 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 641ms
[INFO ] 2021-07-14 14:53:29 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 14:53:29 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 45ms
[INFO ] 2021-07-14 14:53:29 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 14:53:29 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 14ms
[INFO ] 2021-07-14 14:53:29 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:53:29 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 14:53:29 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 14:53:29 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 14:53:29 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 14:53:30 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 14:53:30 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 14:53:32 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 14:53:32 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@7cff1930, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@34c31a34, org.springframework.security.web.context.SecurityContextPersistenceFilter@41843b88, org.springframework.security.web.header.HeaderWriterFilter@509e4bc4, org.springframework.web.filter.CorsFilter@6b5f91a5, org.springframework.security.web.authentication.logout.LogoutFilter@357f0cc9, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@375dc95c, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@33ef701e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5a564a61, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7262532a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1fd1deed, org.springframework.security.web.session.SessionManagementFilter@254dfd34, org.springframework.security.web.access.ExceptionTranslationFilter@5a07088b, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@76aab1e3]
[INFO ] 2021-07-14 14:53:33 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 55395 (http) with context path ''
[INFO ] 2021-07-14 14:53:33 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 9.848 seconds (JVM running for 23.535)
[INFO ] 2021-07-14 14:53:33 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 14:53:33 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 14:53:34 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:53:34 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:53:34 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[ERROR] 2021-07-14 14:53:34 [http-nio-auto-1-exec-1] ERROR r.n.c.aspects.LoggingAspect - null
[ERROR] 2021-07-14 14:53:34 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler.uploadToDb(DefaultFileHandler.java:91)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$FastClassBySpringCGLIB$$8d823bb1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$EnhancerBySpringCGLIB$$95af7722.uploadToDb(<generated>)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository.saveFile(DefaultCloudServiceFileRepository.java:53)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$FastClassBySpringCGLIB$$b940889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$EnhancerBySpringCGLIB$$588579ba.saveFile(<generated>)
	at ru.netology.cloud_service_app.services.FileService.saveFile(FileService.java:33)
	at ru.netology.cloud_service_app.services.FileService$$FastClassBySpringCGLIB$$660dc7a6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.services.FileService$$EnhancerBySpringCGLIB$$47a95db8.saveFile(<generated>)
	at ru.netology.cloud_service_app.controllers.FileController.saveFile(FileController.java:65)
	at ru.netology.cloud_service_app.controllers.FileController$$FastClassBySpringCGLIB$$d5e7b2cc.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.controllers.FileController$$EnhancerBySpringCGLIB$$40241d15.saveFile(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 14:55:14 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 14:55:14 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 14:55:14 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 14:55:14 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 14:55:14 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@74a6a609, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5a411614, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@2374d36a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@54d18072, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1506f20f, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a5b70d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@424fd310, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1a45193b, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@38f116f6, org.springframework.test.context.event.EventPublishingTestExecutionListener@5286c33a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@6e6d5d29, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5c530d1e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6c25e6c4, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@85e6769, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@c5ee75e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@bf1ec20]
[INFO ] 2021-07-14 14:55:14 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 14:55:15 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 14:55:15 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 14:55:15 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 14:55:15 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 14:55:17 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 14:55:17 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 14:55:17 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 14:55:17 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 14:55:17 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 14:55:21 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 700f2c756375bdbb5986268b8582b0488474dcae010ac42b32af66dfb6de9ac1
[INFO ] 2021-07-14 14:55:24 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 700f2c756375bdbb5986268b8582b0488474dcae010ac42b32af66dfb6de9ac1
[INFO ] 2021-07-14 14:55:26 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT8.707073S
[INFO ] 2021-07-14 14:55:26 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 90064 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 14:55:26 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 14:55:26 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 14:55:27 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 14:55:27 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 75 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 14:55:28 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@1b4a3a1' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:55:28 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 14:55:28 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 14:55:28 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 14:55:28 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 14:55:28 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 14:55:28 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2198 ms
[INFO ] 2021-07-14 14:55:29 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 14:55:29 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 14:55:29 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 14:55:30 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 14:55:30 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 14:55:30 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:55:30 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 14:55:30 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 14:55:30 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 14:55:30 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 42ms
[INFO ] 2021-07-14 14:55:30 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 14:55:30 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 15ms
[INFO ] 2021-07-14 14:55:30 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 14:55:30 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 16ms
[INFO ] 2021-07-14 14:55:30 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 14:55:30 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 19ms
[INFO ] 2021-07-14 14:55:30 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 14:55:30 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 14:55:31 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 14:55:31 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 636ms
[INFO ] 2021-07-14 14:55:31 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 14:55:31 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 50ms
[INFO ] 2021-07-14 14:55:31 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 14:55:31 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 16ms
[INFO ] 2021-07-14 14:55:31 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 14:55:31 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 14:55:31 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 14:55:32 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 14:55:32 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 14:55:33 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 14:55:33 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 14:55:34 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 14:55:34 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@34c31a34, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6b5f91a5, org.springframework.security.web.context.SecurityContextPersistenceFilter@3cc7cf58, org.springframework.security.web.header.HeaderWriterFilter@1ba00c0c, org.springframework.web.filter.CorsFilter@375dc95c, org.springframework.security.web.authentication.logout.LogoutFilter@57f8a3cf, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@33ef701e, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@1fd1deed, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3aee72d8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@44bbf5e3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@814b60b, org.springframework.security.web.session.SessionManagementFilter@72f4232, org.springframework.security.web.access.ExceptionTranslationFilter@32f35739, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4f9e32f2]
[INFO ] 2021-07-14 14:55:35 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 55931 (http) with context path ''
[INFO ] 2021-07-14 14:55:35 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 9.504 seconds (JVM running for 22.59)
[INFO ] 2021-07-14 14:55:35 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 14:55:35 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 14:55:36 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:55:36 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 14:55:36 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[ERROR] 2021-07-14 14:55:36 [http-nio-auto-1-exec-1] ERROR r.n.c.aspects.LoggingAspect - null
[ERROR] 2021-07-14 14:55:36 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler.uploadToDb(DefaultFileHandler.java:91)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$FastClassBySpringCGLIB$$8d823bb1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$EnhancerBySpringCGLIB$$95af7722.uploadToDb(<generated>)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository.saveFile(DefaultCloudServiceFileRepository.java:53)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$FastClassBySpringCGLIB$$b940889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$EnhancerBySpringCGLIB$$588579ba.saveFile(<generated>)
	at ru.netology.cloud_service_app.services.FileService.saveFile(FileService.java:33)
	at ru.netology.cloud_service_app.services.FileService$$FastClassBySpringCGLIB$$660dc7a6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.services.FileService$$EnhancerBySpringCGLIB$$47a95db8.saveFile(<generated>)
	at ru.netology.cloud_service_app.controllers.FileController.saveFile(FileController.java:65)
	at ru.netology.cloud_service_app.controllers.FileController$$FastClassBySpringCGLIB$$d5e7b2cc.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.controllers.FileController$$EnhancerBySpringCGLIB$$bceaf53e.saveFile(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 15:01:31 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 15:01:31 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 15:01:31 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 15:01:31 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 15:01:32 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@74a6a609, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5a411614, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@2374d36a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@54d18072, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1506f20f, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a5b70d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@424fd310, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1a45193b, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@38f116f6, org.springframework.test.context.event.EventPublishingTestExecutionListener@5286c33a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@6e6d5d29, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5c530d1e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6c25e6c4, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@85e6769, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@c5ee75e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@bf1ec20]
[INFO ] 2021-07-14 15:01:32 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 15:01:33 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 15:01:33 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 15:01:33 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 15:01:33 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 15:01:35 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 15:01:35 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 15:01:35 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 15:01:35 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 15:01:35 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 15:01:39 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 6ad7ffe3bfe2abc75777b1195ad8c1bf5e7c121271919b4e7a9d8a8687d049cf
[INFO ] 2021-07-14 15:01:43 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 6ad7ffe3bfe2abc75777b1195ad8c1bf5e7c121271919b4e7a9d8a8687d049cf
[INFO ] 2021-07-14 15:01:45 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT10.024899S
[INFO ] 2021-07-14 15:01:46 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 91233 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 15:01:46 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 15:01:46 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 15:01:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 15:01:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 96 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 15:01:48 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@14b95942' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 15:01:48 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 15:01:49 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 15:01:49 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 15:01:49 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 15:01:49 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 15:01:49 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2683 ms
[INFO ] 2021-07-14 15:01:49 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 15:01:49 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 15:01:50 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 15:01:50 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 15:01:50 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 15:01:50 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 15:01:50 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 15:01:50 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 15:01:50 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 15:01:50 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 36ms
[INFO ] 2021-07-14 15:01:50 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 15:01:50 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 13ms
[INFO ] 2021-07-14 15:01:51 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 15:01:51 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 13ms
[INFO ] 2021-07-14 15:01:51 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 15:01:51 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 15:01:51 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 15:01:51 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 18ms
[INFO ] 2021-07-14 15:01:51 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 15:01:51 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 696ms
[INFO ] 2021-07-14 15:01:51 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 15:01:51 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 55ms
[INFO ] 2021-07-14 15:01:51 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 15:01:51 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 15:01:51 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 15:01:52 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 15:01:52 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 15:01:52 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 15:01:52 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 15:01:53 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 15:01:53 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 15:01:54 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 15:01:55 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@33ef701e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1fd1deed, org.springframework.security.web.context.SecurityContextPersistenceFilter@3aee72d8, org.springframework.security.web.header.HeaderWriterFilter@72f4232, org.springframework.web.filter.CorsFilter@814b60b, org.springframework.security.web.authentication.logout.LogoutFilter@16bed816, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@515a897c, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@197d6cc9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3b538e2a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2625eb84, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@8caffbd, org.springframework.security.web.session.SessionManagementFilter@41843b88, org.springframework.security.web.access.ExceptionTranslationFilter@1cd7bc66, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@70f5f6c7]
[INFO ] 2021-07-14 15:01:56 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 57642 (http) with context path ''
[INFO ] 2021-07-14 15:01:56 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 10.386 seconds (JVM running for 25.72)
[INFO ] 2021-07-14 15:01:56 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 15:01:56 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 15:01:57 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 15:01:57 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 15:01:57 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[ERROR] 2021-07-14 15:01:57 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.web.multipart.MultipartException: Failed to parse multipart servlet request; nested exception is org.apache.commons.fileupload.FileUploadException: the request was rejected because no multipart boundary was found] with root cause
org.apache.commons.fileupload.FileUploadException: the request was rejected because no multipart boundary was found
	at org.apache.commons.fileupload.FileUploadBase$FileItemIteratorImpl.<init>(FileUploadBase.java:990)
	at org.apache.commons.fileupload.FileUploadBase.getItemIterator(FileUploadBase.java:310)
	at org.apache.commons.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:334)
	at org.apache.commons.fileupload.servlet.ServletFileUpload.parseRequest(ServletFileUpload.java:115)
	at org.springframework.web.multipart.commons.CommonsMultipartResolver.parseRequest(CommonsMultipartResolver.java:159)
	at org.springframework.web.multipart.commons.CommonsMultipartResolver.resolveMultipart(CommonsMultipartResolver.java:143)
	at org.springframework.web.servlet.DispatcherServlet.checkMultipart(DispatcherServlet.java:1201)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1035)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 15:01:58 [SpringContextShutdownHook] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed from ACCEPTING_TRAFFIC to REFUSING_TRAFFIC
[INFO ] 2021-07-14 15:02:50 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 15:02:50 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 15:02:50 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 15:02:51 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 15:02:51 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@74a6a609, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5a411614, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@2374d36a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@54d18072, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1506f20f, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a5b70d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@424fd310, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1a45193b, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@38f116f6, org.springframework.test.context.event.EventPublishingTestExecutionListener@5286c33a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@6e6d5d29, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5c530d1e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6c25e6c4, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@85e6769, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@c5ee75e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@bf1ec20]
[INFO ] 2021-07-14 15:02:51 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 15:02:52 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 15:02:52 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 15:02:52 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 15:02:52 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 15:02:54 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 15:02:54 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 15:02:54 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 15:02:55 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 15:02:55 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 15:02:59 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: cfb334379e65655855b69d37231e474534bb311c9d814af23da8ad1167354048
[INFO ] 2021-07-14 15:03:02 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: cfb334379e65655855b69d37231e474534bb311c9d814af23da8ad1167354048
[INFO ] 2021-07-14 15:03:04 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT9.709836S
[INFO ] 2021-07-14 15:03:05 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 91421 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 15:03:05 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 15:03:05 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 15:03:06 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 15:03:06 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 79 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 15:03:07 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@5f883d90' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 15:03:07 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 15:03:07 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 15:03:07 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 15:03:07 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 15:03:07 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 15:03:07 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2504 ms
[INFO ] 2021-07-14 15:03:08 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 15:03:08 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 15:03:08 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 15:03:09 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 15:03:09 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 15:03:09 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 15:03:09 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 15:03:09 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 15:03:09 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 15:03:09 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 31ms
[INFO ] 2021-07-14 15:03:09 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 15:03:09 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 13ms
[INFO ] 2021-07-14 15:03:09 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 15:03:09 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 13ms
[INFO ] 2021-07-14 15:03:09 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 15:03:09 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 14ms
[INFO ] 2021-07-14 15:03:09 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 15:03:09 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 14ms
[INFO ] 2021-07-14 15:03:10 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 15:03:10 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 771ms
[INFO ] 2021-07-14 15:03:10 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 15:03:10 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 58ms
[INFO ] 2021-07-14 15:03:10 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 15:03:10 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 20ms
[INFO ] 2021-07-14 15:03:10 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 15:03:10 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 15:03:10 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 15:03:10 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 15:03:11 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 15:03:12 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 15:03:12 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 15:03:13 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 15:03:13 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@7ae2f5b6, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5ebd3708, org.springframework.security.web.context.SecurityContextPersistenceFilter@15c48119, org.springframework.security.web.header.HeaderWriterFilter@1c1bc904, org.springframework.web.filter.CorsFilter@7441eed3, org.springframework.security.web.authentication.logout.LogoutFilter@7fd8f21, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@284e68ae, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@456c6754, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1aae50f9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@24d998ba, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@72de1d86, org.springframework.security.web.session.SessionManagementFilter@6d5376b7, org.springframework.security.web.access.ExceptionTranslationFilter@63f1d374, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@1508bc71]
[INFO ] 2021-07-14 15:03:14 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 57993 (http) with context path ''
[INFO ] 2021-07-14 15:03:14 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 9.519 seconds (JVM running for 24.767)
[INFO ] 2021-07-14 15:03:14 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 15:03:14 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 15:03:15 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 15:03:15 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 15:03:15 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
[ERROR] 2021-07-14 15:03:15 [http-nio-auto-1-exec-1] ERROR r.n.c.aspects.LoggingAspect - null
[ERROR] 2021-07-14 15:03:15 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler.uploadToDb(DefaultFileHandler.java:91)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$FastClassBySpringCGLIB$$8d823bb1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$EnhancerBySpringCGLIB$$eac6957b.uploadToDb(<generated>)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository.saveFile(DefaultCloudServiceFileRepository.java:53)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$FastClassBySpringCGLIB$$b940889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$EnhancerBySpringCGLIB$$9067fc5b.saveFile(<generated>)
	at ru.netology.cloud_service_app.services.FileService.saveFile(FileService.java:33)
	at ru.netology.cloud_service_app.services.FileService$$FastClassBySpringCGLIB$$660dc7a6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.services.FileService$$EnhancerBySpringCGLIB$$faa19d8b.saveFile(<generated>)
	at ru.netology.cloud_service_app.controllers.FileController.saveFile(FileController.java:65)
	at ru.netology.cloud_service_app.controllers.FileController$$FastClassBySpringCGLIB$$d5e7b2cc.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.controllers.FileController$$EnhancerBySpringCGLIB$$f86202f4.saveFile(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 15:04:19 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 15:04:19 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 15:04:19 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 15:04:19 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 15:04:19 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@74a6a609, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5a411614, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@2374d36a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@54d18072, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1506f20f, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a5b70d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@424fd310, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1a45193b, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@38f116f6, org.springframework.test.context.event.EventPublishingTestExecutionListener@5286c33a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@6e6d5d29, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5c530d1e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6c25e6c4, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@85e6769, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@c5ee75e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@bf1ec20]
[INFO ] 2021-07-14 15:04:20 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 15:04:20 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 15:04:20 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 15:04:20 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 15:04:20 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 15:04:22 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 15:04:22 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 15:04:22 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 15:04:23 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 15:04:23 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 15:04:27 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: a74c51bef10c4e6fdde9146f1bb0643c9e69d47136a2d5323363e6292d0865a3
[INFO ] 2021-07-14 15:04:31 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: a74c51bef10c4e6fdde9146f1bb0643c9e69d47136a2d5323363e6292d0865a3
[INFO ] 2021-07-14 15:04:33 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT10.125917S
[INFO ] 2021-07-14 15:04:33 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 91624 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 15:04:33 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 15:04:34 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 15:04:34 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 15:04:34 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 76 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 15:04:35 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@1b4a3a1' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 15:04:35 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 15:04:35 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 15:04:35 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 15:04:35 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 15:04:36 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 15:04:36 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2301 ms
[INFO ] 2021-07-14 15:04:36 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 15:04:36 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 15:04:37 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 15:04:37 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 15:04:37 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 15:04:37 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 15:04:37 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 15:04:37 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 15:04:37 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 15:04:37 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 36ms
[INFO ] 2021-07-14 15:04:37 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 15:04:37 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 11ms
[INFO ] 2021-07-14 15:04:37 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 15:04:37 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 19ms
[INFO ] 2021-07-14 15:04:37 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 15:04:37 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 18ms
[INFO ] 2021-07-14 15:04:37 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 15:04:37 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 18ms
[INFO ] 2021-07-14 15:04:38 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 15:04:38 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 661ms
[INFO ] 2021-07-14 15:04:38 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 15:04:38 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 47ms
[INFO ] 2021-07-14 15:04:38 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 15:04:38 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 15:04:38 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 15:04:38 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 15:04:38 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 15:04:39 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 15:04:39 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 15:04:40 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 15:04:40 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 15:04:41 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 15:04:42 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@4f94b2a8, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2f26634a, org.springframework.security.web.context.SecurityContextPersistenceFilter@32f35739, org.springframework.security.web.header.HeaderWriterFilter@3b30409, org.springframework.web.filter.CorsFilter@2810d9, org.springframework.security.web.authentication.logout.LogoutFilter@3725471, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@408f3054, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@2a64cb1f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1cd7bc66, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@254dfd34, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3644d12a, org.springframework.security.web.session.SessionManagementFilter@24d998ba, org.springframework.security.web.access.ExceptionTranslationFilter@6354a50a, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@9124278]
[INFO ] 2021-07-14 15:04:43 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 58381 (http) with context path ''
[INFO ] 2021-07-14 15:04:43 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 10.027 seconds (JVM running for 25.051)
[INFO ] 2021-07-14 15:04:43 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 15:04:43 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 15:04:44 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 15:04:44 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 15:04:44 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[ERROR] 2021-07-14 15:04:44 [http-nio-auto-1-exec-1] ERROR r.n.c.aspects.LoggingAspect - null
[ERROR] 2021-07-14 15:04:44 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler.uploadToDb(DefaultFileHandler.java:91)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$FastClassBySpringCGLIB$$8d823bb1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$EnhancerBySpringCGLIB$$95af7722.uploadToDb(<generated>)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository.saveFile(DefaultCloudServiceFileRepository.java:53)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$FastClassBySpringCGLIB$$b940889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$EnhancerBySpringCGLIB$$588579ba.saveFile(<generated>)
	at ru.netology.cloud_service_app.services.FileService.saveFile(FileService.java:33)
	at ru.netology.cloud_service_app.services.FileService$$FastClassBySpringCGLIB$$660dc7a6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.services.FileService$$EnhancerBySpringCGLIB$$47a95db8.saveFile(<generated>)
	at ru.netology.cloud_service_app.controllers.FileController.saveFile(FileController.java:66)
	at ru.netology.cloud_service_app.controllers.FileController$$FastClassBySpringCGLIB$$d5e7b2cc.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.controllers.FileController$$EnhancerBySpringCGLIB$$bf59e9e4.saveFile(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 15:04:45 [SpringContextShutdownHook] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed from ACCEPTING_TRAFFIC to REFUSING_TRAFFIC
[INFO ] 2021-07-14 15:04:56 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 15:04:56 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 15:04:56 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 15:04:56 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 15:04:56 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@18c5069b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3a0d172f, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@68ad99fe, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@485e36bc, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@781f10f2, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2a79d4b1, org.springframework.test.context.transaction.TransactionalTestExecutionListener@2e9fda69, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@17cdf2d0, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@1755e85b, org.springframework.test.context.event.EventPublishingTestExecutionListener@736d6a5c, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@2371aaca, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5b529706, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@63fdab07, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@7b5a12ae, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@5553d0f5, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@1af687fe, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@14dda234]
[INFO ] 2021-07-14 15:04:57 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 15:04:58 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 15:04:58 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 15:04:58 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 15:04:58 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 15:05:00 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 15:05:00 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 15:05:00 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 15:05:01 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 15:05:01 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 15:05:05 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 70c0b7327cb8eee7ab7cf51c26f6fc1592ee04e637d362d34b3ad16e7dac2c3b
[INFO ] 2021-07-14 15:05:09 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 70c0b7327cb8eee7ab7cf51c26f6fc1592ee04e637d362d34b3ad16e7dac2c3b
[INFO ] 2021-07-14 15:05:11 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT10.535688S
[INFO ] 2021-07-14 15:05:12 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 91701 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 15:05:12 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 15:05:12 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 15:05:13 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 15:05:13 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 98 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 15:05:14 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@782ac148' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 15:05:14 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 15:05:14 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 15:05:14 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 15:05:14 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 15:05:15 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 15:05:15 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2859 ms
[INFO ] 2021-07-14 15:05:15 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 15:05:15 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 15:05:16 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 15:05:16 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 15:05:16 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 15:05:17 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 15:05:17 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 15:05:17 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 15:05:17 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 15:05:17 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 42ms
[INFO ] 2021-07-14 15:05:17 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 15:05:17 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 19ms
[INFO ] 2021-07-14 15:05:17 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 15:05:17 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 18ms
[INFO ] 2021-07-14 15:05:17 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 15:05:17 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 22ms
[INFO ] 2021-07-14 15:05:17 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 15:05:17 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 18ms
[INFO ] 2021-07-14 15:05:18 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 15:05:18 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 777ms
[INFO ] 2021-07-14 15:05:18 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 15:05:18 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 111ms
[INFO ] 2021-07-14 15:05:18 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 15:05:18 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 45ms
[INFO ] 2021-07-14 15:05:18 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 15:05:18 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 15:05:18 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 15:05:18 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 15:05:18 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 15:05:19 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 15:05:19 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 15:05:21 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 15:05:21 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@230ea983, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@70290678, org.springframework.security.web.context.SecurityContextPersistenceFilter@63f1d374, org.springframework.security.web.header.HeaderWriterFilter@61d4e070, org.springframework.web.filter.CorsFilter@2c99419f, org.springframework.security.web.authentication.logout.LogoutFilter@70c6860, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@6a73b74c, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@3ce74930, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2eb6e166, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@49afaf65, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4c58212, org.springframework.security.web.session.SessionManagementFilter@7ea0438c, org.springframework.security.web.access.ExceptionTranslationFilter@6bab65b6, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5713e261]
[INFO ] 2021-07-14 15:05:22 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 58556 (http) with context path ''
[INFO ] 2021-07-14 15:05:22 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 10.937 seconds (JVM running for 27.94)
[INFO ] 2021-07-14 15:05:22 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 15:05:22 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 15:05:23 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 15:05:23 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 15:05:23 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
[WARN ] 2021-07-14 15:05:23 [http-nio-auto-1-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Failure in @ExceptionHandler ru.netology.cloud_service_app.advices.FileControllerAdvice#handleConstraintViolationException()
org.springframework.web.HttpMediaTypeNotAcceptableException: Could not find acceptable representation
	at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:246)
	at org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor.handleReturnValue(HttpEntityMethodProcessor.java:219)
	at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:124)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:428)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:75)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:141)
	at org.springframework.web.servlet.handler.HandlerExceptionResolverComposite.resolveException(HandlerExceptionResolverComposite.java:80)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1323)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1134)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[ERROR] 2021-07-14 15:05:23 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is javax.validation.ConstraintViolationException: saveFile.file: –Ω–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–≤–Ω—è—Ç—å—Å—è null] with root cause
javax.validation.ConstraintViolationException: saveFile.file: –Ω–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–≤–Ω—è—Ç—å—Å—è null
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:120)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.controllers.FileController$$EnhancerBySpringCGLIB$$f7d27d0a.saveFile(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 15:05:46 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 15:05:46 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 15:05:46 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 15:05:46 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 15:05:46 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@74a6a609, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5a411614, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@2374d36a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@54d18072, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1506f20f, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a5b70d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@424fd310, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1a45193b, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@38f116f6, org.springframework.test.context.event.EventPublishingTestExecutionListener@5286c33a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@6e6d5d29, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5c530d1e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6c25e6c4, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@85e6769, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@c5ee75e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@bf1ec20]
[INFO ] 2021-07-14 15:05:46 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 15:05:47 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 15:05:47 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 15:05:47 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 15:05:47 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 15:05:50 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 15:05:50 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 15:05:50 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 15:05:50 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 15:05:50 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 15:05:54 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: df2030170bb30a066908b6e83929370d118f37dc62254bce922cef881b122e0a
[INFO ] 2021-07-14 15:05:58 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: df2030170bb30a066908b6e83929370d118f37dc62254bce922cef881b122e0a
[INFO ] 2021-07-14 15:06:01 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT10.645074S
[INFO ] 2021-07-14 15:06:01 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 91813 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 15:06:01 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 15:06:02 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 15:06:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 15:06:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 83 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 15:06:03 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@56ec6960' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 15:06:03 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 15:06:04 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 15:06:04 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 15:06:04 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 15:06:04 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 15:06:04 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2592 ms
[INFO ] 2021-07-14 15:06:04 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 15:06:04 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 15:06:05 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 15:06:05 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 15:06:05 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 15:06:06 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 15:06:06 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 15:06:06 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 15:06:06 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 15:06:06 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 38ms
[INFO ] 2021-07-14 15:06:06 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 15:06:06 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 13ms
[INFO ] 2021-07-14 15:06:06 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 15:06:06 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 14ms
[INFO ] 2021-07-14 15:06:06 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 15:06:06 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 15ms
[INFO ] 2021-07-14 15:06:06 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 15:06:06 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 18ms
[INFO ] 2021-07-14 15:06:06 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 15:06:06 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 670ms
[INFO ] 2021-07-14 15:06:06 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 15:06:06 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 50ms
[INFO ] 2021-07-14 15:06:06 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 15:06:06 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 15:06:06 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 15:06:07 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 15:06:07 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 15:06:07 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 15:06:07 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 15:06:08 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 15:06:08 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 15:06:09 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 15:06:09 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@3c72c488, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@290ebbbe, org.springframework.security.web.context.SecurityContextPersistenceFilter@57b4fc1e, org.springframework.security.web.header.HeaderWriterFilter@43b1fdb7, org.springframework.web.filter.CorsFilter@7ae2f5b6, org.springframework.security.web.authentication.logout.LogoutFilter@41843b88, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@5ebd3708, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@7441eed3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2cb09f00, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@79c9f619, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@284e68ae, org.springframework.security.web.session.SessionManagementFilter@53fa630, org.springframework.security.web.access.ExceptionTranslationFilter@7083e548, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4c58212]
[INFO ] 2021-07-14 15:06:10 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 58770 (http) with context path ''
[INFO ] 2021-07-14 15:06:10 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 9.47 seconds (JVM running for 25.86)
[INFO ] 2021-07-14 15:06:10 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 15:06:10 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 15:06:11 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 15:06:11 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 15:06:11 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
[INFO ] 2021-07-14 15:06:11 [http-nio-auto-1-exec-1] INFO  r.n.c.aspects.LoggingAspect - –ü—Ä–∏–Ω—è—Ç –∑–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞–µ—Ç–µ–ª—è max@mail.ru –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
[WARN ] 2021-07-14 15:06:11 [http-nio-auto-1-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Failure in @ExceptionHandler ru.netology.cloud_service_app.advices.FileControllerAdvice#handleConstraintViolationException()
org.springframework.web.HttpMediaTypeNotAcceptableException: Could not find acceptable representation
	at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:246)
	at org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor.handleReturnValue(HttpEntityMethodProcessor.java:219)
	at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:124)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:428)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:75)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:141)
	at org.springframework.web.servlet.handler.HandlerExceptionResolverComposite.resolveException(HandlerExceptionResolverComposite.java:80)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1323)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1134)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[ERROR] 2021-07-14 15:06:11 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is javax.validation.ConstraintViolationException: saveFile.file: –Ω–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–≤–Ω—è—Ç—å—Å—è null] with root cause
javax.validation.ConstraintViolationException: saveFile.file: –Ω–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–≤–Ω—è—Ç—å—Å—è null
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:120)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:58)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.controllers.FileController$$EnhancerBySpringCGLIB$$2aa42618.saveFile(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 15:06:53 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 15:06:53 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 15:06:53 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 15:06:53 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 15:06:53 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@74a6a609, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5a411614, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@2374d36a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@54d18072, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1506f20f, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a5b70d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@424fd310, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1a45193b, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@38f116f6, org.springframework.test.context.event.EventPublishingTestExecutionListener@5286c33a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@6e6d5d29, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5c530d1e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6c25e6c4, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@85e6769, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@c5ee75e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@bf1ec20]
[INFO ] 2021-07-14 15:06:54 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 15:06:54 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 15:06:54 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 15:06:54 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 15:06:54 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 15:06:56 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 15:06:56 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 15:06:56 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 15:06:57 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 15:06:57 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 15:07:01 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 183476609fcbe55b695fd612ca9acf964dc331ba6a896da4b62f81f33988b02b
[INFO ] 2021-07-14 15:07:04 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 183476609fcbe55b695fd612ca9acf964dc331ba6a896da4b62f81f33988b02b
[INFO ] 2021-07-14 15:07:06 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT9.512558S
[INFO ] 2021-07-14 15:07:07 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 91969 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 15:07:07 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 15:07:07 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 15:07:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 15:07:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 84 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 15:07:08 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@184751f3' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 15:07:08 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 15:07:09 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 15:07:09 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 15:07:09 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 15:07:09 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 15:07:09 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2389 ms
[INFO ] 2021-07-14 15:07:09 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 15:07:09 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 15:07:10 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 15:07:11 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 15:07:11 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 15:07:11 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 15:07:11 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 15:07:11 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 15:07:11 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 15:07:11 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 39ms
[INFO ] 2021-07-14 15:07:11 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 15:07:11 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 11ms
[INFO ] 2021-07-14 15:07:11 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 15:07:11 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 14ms
[INFO ] 2021-07-14 15:07:11 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 15:07:11 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 16ms
[INFO ] 2021-07-14 15:07:11 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 15:07:11 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 18ms
[INFO ] 2021-07-14 15:07:12 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 15:07:12 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 644ms
[INFO ] 2021-07-14 15:07:12 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 15:07:12 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 57ms
[INFO ] 2021-07-14 15:07:12 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 15:07:12 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 19ms
[INFO ] 2021-07-14 15:07:12 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 15:07:12 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 15:07:12 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 15:07:12 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 15:07:13 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 15:07:14 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 15:07:14 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 15:07:14 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 15:07:15 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@524250ec, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7432cb37, org.springframework.security.web.context.SecurityContextPersistenceFilter@11885841, org.springframework.security.web.header.HeaderWriterFilter@15c48119, org.springframework.web.filter.CorsFilter@7602da1a, org.springframework.security.web.authentication.logout.LogoutFilter@44bbf5e3, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@6d985720, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@2d1dbf4f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@99e03a9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1cd7bc66, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4f94b2a8, org.springframework.security.web.session.SessionManagementFilter@1aae50f9, org.springframework.security.web.access.ExceptionTranslationFilter@53fa630, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5ebd3708]
[INFO ] 2021-07-14 15:07:16 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 59064 (http) with context path ''
[INFO ] 2021-07-14 15:07:16 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 9.44 seconds (JVM running for 23.676)
[INFO ] 2021-07-14 15:07:16 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 15:07:16 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 15:07:16 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 15:07:16 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 15:07:16 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[INFO ] 2021-07-14 15:07:16 [http-nio-auto-1-exec-1] INFO  r.n.c.aspects.LoggingAspect - –ü—Ä–∏–Ω—è—Ç –∑–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞–µ—Ç–µ–ª—è max@mail.ru –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
[INFO ] 2021-07-14 15:07:59 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 15:07:59 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 15:08:00 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 15:08:00 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 15:08:00 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@74a6a609, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5a411614, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@2374d36a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@54d18072, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1506f20f, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a5b70d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@424fd310, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1a45193b, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@38f116f6, org.springframework.test.context.event.EventPublishingTestExecutionListener@5286c33a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@6e6d5d29, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5c530d1e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6c25e6c4, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@85e6769, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@c5ee75e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@bf1ec20]
[INFO ] 2021-07-14 15:08:00 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 15:08:01 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 15:08:01 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 15:08:01 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 15:08:01 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 15:08:03 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 15:08:03 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 15:08:03 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 15:08:04 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 15:08:04 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 15:08:08 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: a05269c8c0fd08226a9092b84743e0084b216d165faab73df0c037cf5bf9258c
[INFO ] 2021-07-14 15:08:11 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: a05269c8c0fd08226a9092b84743e0084b216d165faab73df0c037cf5bf9258c
[INFO ] 2021-07-14 15:08:13 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT9.211398S
[INFO ] 2021-07-14 15:08:13 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 92138 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 15:08:13 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 15:08:14 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 15:08:14 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 15:08:14 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 77 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 15:08:15 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@4fd80300' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 15:08:15 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 15:08:15 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 15:08:15 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 15:08:15 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 15:08:16 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 15:08:16 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2258 ms
[INFO ] 2021-07-14 15:08:16 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 15:08:16 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 15:08:17 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 15:08:17 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 15:08:17 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 15:08:17 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 15:08:17 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 15:08:17 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 15:08:17 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 15:08:17 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 40ms
[INFO ] 2021-07-14 15:08:17 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 15:08:17 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 18ms
[INFO ] 2021-07-14 15:08:17 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 15:08:17 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 18ms
[INFO ] 2021-07-14 15:08:17 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 15:08:17 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 28ms
[INFO ] 2021-07-14 15:08:17 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 15:08:17 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 29ms
[INFO ] 2021-07-14 15:08:18 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 15:08:18 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 650ms
[INFO ] 2021-07-14 15:08:18 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 15:08:18 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 43ms
[INFO ] 2021-07-14 15:08:18 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 15:08:18 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 18ms
[INFO ] 2021-07-14 15:08:18 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 15:08:18 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 15:08:18 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 15:08:19 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 15:08:19 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 15:08:20 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 15:08:20 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 15:08:21 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 15:08:21 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@1508bc71, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1320d929, org.springframework.security.web.context.SecurityContextPersistenceFilter@53fa630, org.springframework.security.web.header.HeaderWriterFilter@63f1d374, org.springframework.web.filter.CorsFilter@3b5d0c4d, org.springframework.security.web.authentication.logout.LogoutFilter@254dfd34, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@6cc91654, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@3c72c488, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2fc2d1f0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5c14c284, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@290ebbbe, org.springframework.security.web.session.SessionManagementFilter@2eb6e166, org.springframework.security.web.access.ExceptionTranslationFilter@66a5cbe5, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@70290678]
[INFO ] 2021-07-14 15:08:22 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 59348 (http) with context path ''
[INFO ] 2021-07-14 15:08:22 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 8.917 seconds (JVM running for 23.361)
[INFO ] 2021-07-14 15:08:22 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 15:08:22 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 15:08:23 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 15:08:23 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 15:08:23 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[INFO ] 2021-07-14 15:08:23 [http-nio-auto-1-exec-1] INFO  r.n.c.aspects.LoggingAspect - –ü—Ä–∏–Ω—è—Ç –∑–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞–µ—Ç–µ–ª—è max@mail.ru –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
[ERROR] 2021-07-14 15:08:23 [http-nio-auto-1-exec-1] ERROR r.n.c.aspects.LoggingAspect - null
[ERROR] 2021-07-14 15:08:23 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler.uploadToDb(DefaultFileHandler.java:91)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$FastClassBySpringCGLIB$$8d823bb1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$EnhancerBySpringCGLIB$$50dde7ac.uploadToDb(<generated>)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository.saveFile(DefaultCloudServiceFileRepository.java:53)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$FastClassBySpringCGLIB$$b940889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$EnhancerBySpringCGLIB$$daae2456.saveFile(<generated>)
	at ru.netology.cloud_service_app.services.FileService.saveFile(FileService.java:33)
	at ru.netology.cloud_service_app.services.FileService$$FastClassBySpringCGLIB$$660dc7a6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.services.FileService$$EnhancerBySpringCGLIB$$83c7c5a8.saveFile(<generated>)
	at ru.netology.cloud_service_app.controllers.FileController.saveFile(FileController.java:67)
	at ru.netology.cloud_service_app.controllers.FileController$$FastClassBySpringCGLIB$$d5e7b2cc.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:58)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.controllers.FileController$$EnhancerBySpringCGLIB$$d205d332.saveFile(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 15:09:10 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 15:09:10 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 15:09:11 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 15:09:11 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 15:09:11 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@b7838a9, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@696f0212, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@5733f295, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@1c3146bc, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@56c698e3, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a86fbb, org.springframework.test.context.transaction.TransactionalTestExecutionListener@f478a81, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@19553973, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@7bb6ab3a, org.springframework.test.context.event.EventPublishingTestExecutionListener@7fe7c640, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@4c4748bf, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@7ce97ee5, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@32c8e539, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@73dce0e6, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@5a85c92, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@32811494, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@4795ded0]
[INFO ] 2021-07-14 15:09:11 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 15:09:12 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 15:09:12 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 15:09:12 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 15:09:12 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 15:09:15 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 15:09:15 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 15:09:15 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 15:09:15 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 15:09:15 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 15:09:19 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 3da0b6e5a1fb9cb48e9ceded4ff7707b780dbb078505ca499b2aadfd28120905
[INFO ] 2021-07-14 15:09:23 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 3da0b6e5a1fb9cb48e9ceded4ff7707b780dbb078505ca499b2aadfd28120905
[INFO ] 2021-07-14 15:09:25 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT9.734764S
[INFO ] 2021-07-14 15:09:25 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 92306 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 15:09:25 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 15:09:25 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 15:09:26 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 15:09:26 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 79 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 15:09:27 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@7e27f603' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 15:09:27 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 15:09:27 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 15:09:27 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 15:09:27 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 15:09:27 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 15:09:27 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2337 ms
[INFO ] 2021-07-14 15:09:28 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 15:09:28 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 15:09:28 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 15:09:29 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 15:09:29 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 15:09:29 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 15:09:29 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 15:09:29 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 15:09:29 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 15:09:29 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 41ms
[INFO ] 2021-07-14 15:09:29 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 15:09:29 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 13ms
[INFO ] 2021-07-14 15:09:29 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 15:09:29 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 13ms
[INFO ] 2021-07-14 15:09:29 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 15:09:29 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 15:09:29 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 15:09:29 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 14ms
[INFO ] 2021-07-14 15:09:30 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 15:09:30 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 637ms
[INFO ] 2021-07-14 15:09:30 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 15:09:30 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 51ms
[INFO ] 2021-07-14 15:09:30 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 15:09:30 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 19ms
[INFO ] 2021-07-14 15:09:30 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 15:09:30 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 15:09:30 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 15:09:30 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 15:09:30 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 15:09:31 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 15:09:31 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 15:09:32 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 15:09:33 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@491afa9b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@147a8d7c, org.springframework.security.web.context.SecurityContextPersistenceFilter@5b6a9ef6, org.springframework.security.web.header.HeaderWriterFilter@5d52a17b, org.springframework.web.filter.CorsFilter@60bd11f7, org.springframework.security.web.authentication.logout.LogoutFilter@7432cb37, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@693f9ab5, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@77ef7b2b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4c821dc7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6a73b74c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@373e09c7, org.springframework.security.web.session.SessionManagementFilter@7d6e2366, org.springframework.security.web.access.ExceptionTranslationFilter@3c51dec5, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3ef97efc]
[INFO ] 2021-07-14 15:09:33 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 59668 (http) with context path ''
[INFO ] 2021-07-14 15:09:33 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 8.903 seconds (JVM running for 24.41)
[INFO ] 2021-07-14 15:09:33 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 15:09:33 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 15:09:34 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 15:09:34 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 15:09:34 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[INFO ] 2021-07-14 15:09:50 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 15:09:50 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 15:09:51 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 15:09:51 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 15:09:51 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@18c5069b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3a0d172f, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@68ad99fe, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@485e36bc, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@781f10f2, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2a79d4b1, org.springframework.test.context.transaction.TransactionalTestExecutionListener@2e9fda69, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@17cdf2d0, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@1755e85b, org.springframework.test.context.event.EventPublishingTestExecutionListener@736d6a5c, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@2371aaca, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5b529706, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@63fdab07, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@7b5a12ae, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@5553d0f5, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@1af687fe, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@14dda234]
[INFO ] 2021-07-14 15:09:52 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 15:09:53 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 15:09:53 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 15:09:53 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 15:09:54 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 15:09:57 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 15:09:57 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 15:09:57 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 15:09:57 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 15:09:57 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 15:10:01 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 5af2bdc6bfc2322e2837565f4e21e5d08986355672caaa73e6cee3523e804ede
[INFO ] 2021-07-14 15:10:05 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 5af2bdc6bfc2322e2837565f4e21e5d08986355672caaa73e6cee3523e804ede
[INFO ] 2021-07-14 15:10:07 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT10.5881S
[INFO ] 2021-07-14 15:10:08 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 92394 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 15:10:08 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 15:10:08 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 15:10:09 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 15:10:09 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 109 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 15:10:10 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@561d88ee' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 15:10:10 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 15:10:11 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 15:10:11 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 15:10:11 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 15:10:11 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 15:10:11 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2630 ms
[INFO ] 2021-07-14 15:10:11 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 15:10:11 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 15:10:12 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 15:10:12 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 15:10:12 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 15:10:13 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 15:10:13 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 15:10:13 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 15:10:13 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 15:10:13 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 38ms
[INFO ] 2021-07-14 15:10:13 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 15:10:13 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 13ms
[INFO ] 2021-07-14 15:10:13 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 15:10:13 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 14ms
[INFO ] 2021-07-14 15:10:13 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 15:10:13 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 18ms
[INFO ] 2021-07-14 15:10:13 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 15:10:13 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 19ms
[INFO ] 2021-07-14 15:10:13 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 15:10:13 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 710ms
[INFO ] 2021-07-14 15:10:14 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 15:10:14 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 57ms
[INFO ] 2021-07-14 15:10:14 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 15:10:14 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 18ms
[INFO ] 2021-07-14 15:10:14 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 15:10:14 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 15:10:14 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 15:10:14 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 15:10:14 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 15:10:15 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 15:10:15 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 15:10:17 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 15:10:17 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@1508bc71, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1320d929, org.springframework.security.web.context.SecurityContextPersistenceFilter@53fa630, org.springframework.security.web.header.HeaderWriterFilter@63f1d374, org.springframework.web.filter.CorsFilter@3b5d0c4d, org.springframework.security.web.authentication.logout.LogoutFilter@254dfd34, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@6cc91654, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@3c72c488, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2fc2d1f0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5c14c284, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@290ebbbe, org.springframework.security.web.session.SessionManagementFilter@2eb6e166, org.springframework.security.web.access.ExceptionTranslationFilter@66a5cbe5, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@70290678]
[INFO ] 2021-07-14 15:10:18 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 60009 (http) with context path ''
[INFO ] 2021-07-14 15:10:18 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 10.603 seconds (JVM running for 30.47)
[INFO ] 2021-07-14 15:10:18 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 15:10:18 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 15:10:19 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 15:10:19 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 15:10:19 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[ERROR] 2021-07-14 15:10:20 [http-nio-auto-1-exec-1] ERROR r.n.c.aspects.LoggingAspect - null
[ERROR] 2021-07-14 15:10:20 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler.uploadToDb(DefaultFileHandler.java:91)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$FastClassBySpringCGLIB$$8d823bb1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$EnhancerBySpringCGLIB$$8d53f2c8.uploadToDb(<generated>)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository.saveFile(DefaultCloudServiceFileRepository.java:53)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$FastClassBySpringCGLIB$$b940889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$EnhancerBySpringCGLIB$$8fc076e0.saveFile(<generated>)
	at ru.netology.cloud_service_app.services.FileService.saveFile(FileService.java:33)
	at ru.netology.cloud_service_app.services.FileService$$FastClassBySpringCGLIB$$660dc7a6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.services.FileService$$EnhancerBySpringCGLIB$$b5c68e7e.saveFile(<generated>)
	at ru.netology.cloud_service_app.controllers.FileController.saveFile(FileController.java:66)
	at ru.netology.cloud_service_app.controllers.FileController$$FastClassBySpringCGLIB$$d5e7b2cc.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.controllers.FileController$$EnhancerBySpringCGLIB$$3065d41a.saveFile(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 15:50:42 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 15:50:42 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 15:50:43 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 15:50:43 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 15:50:43 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@56c698e3, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@47a86fbb, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@f478a81, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@19553973, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@7bb6ab3a, org.springframework.test.context.support.DirtiesContextTestExecutionListener@7fe7c640, org.springframework.test.context.transaction.TransactionalTestExecutionListener@4c4748bf, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@7ce97ee5, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@32c8e539, org.springframework.test.context.event.EventPublishingTestExecutionListener@73dce0e6, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@5a85c92, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@32811494, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@4795ded0, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@53dacd14, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@14d14731, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@2eced48b, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@47c4ecdc]
[INFO ] 2021-07-14 15:50:43 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 15:50:44 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 15:50:44 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 15:50:44 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 15:50:44 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 15:50:47 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 15:50:47 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 15:50:47 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 15:50:47 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 15:50:47 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 15:50:51 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 406ca8daed86cf1a64f611603968ac36f232644df2e3f5d17458ef657899b60b
[INFO ] 2021-07-14 15:50:55 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 406ca8daed86cf1a64f611603968ac36f232644df2e3f5d17458ef657899b60b
[INFO ] 2021-07-14 15:50:58 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT10.514949S
[INFO ] 2021-07-14 15:50:58 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 99512 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 15:50:58 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 15:50:59 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 15:50:59 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 15:50:59 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 87 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 15:51:00 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@32dcfeea' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 15:51:00 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 15:51:01 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 15:51:01 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 15:51:01 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 15:51:01 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 15:51:01 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2539 ms
[INFO ] 2021-07-14 15:51:01 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 15:51:01 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 15:51:02 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 15:51:03 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 15:51:03 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 15:51:03 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 15:51:03 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 15:51:03 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 15:51:03 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 15:51:03 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 43ms
[INFO ] 2021-07-14 15:51:03 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 15:51:03 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 26ms
[INFO ] 2021-07-14 15:51:03 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 15:51:03 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 25ms
[INFO ] 2021-07-14 15:51:03 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 15:51:03 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 15:51:03 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 15:51:03 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 15ms
[INFO ] 2021-07-14 15:51:04 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 15:51:04 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 695ms
[INFO ] 2021-07-14 15:51:04 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 15:51:04 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 50ms
[INFO ] 2021-07-14 15:51:04 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 15:51:04 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 16ms
[INFO ] 2021-07-14 15:51:04 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 15:51:04 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 15:51:04 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 15:51:04 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 15:51:04 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 15:51:05 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 15:51:06 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 15:51:07 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 15:51:07 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@5a36a405, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@45b7b254, org.springframework.security.web.context.SecurityContextPersistenceFilter@7eaa52d6, org.springframework.security.web.header.HeaderWriterFilter@2625eb84, org.springframework.web.filter.CorsFilter@76320633, org.springframework.security.web.authentication.logout.LogoutFilter@3c72c488, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@5100fe55, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@3ef97efc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5d52a17b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@57f8a3cf, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@46244e65, org.springframework.security.web.session.SessionManagementFilter@35216a2e, org.springframework.security.web.access.ExceptionTranslationFilter@533ed36e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@d56d9f6]
[INFO ] 2021-07-14 15:51:08 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 54298 (http) with context path ''
[INFO ] 2021-07-14 15:51:08 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 10.209 seconds (JVM running for 26.866)
[INFO ] 2021-07-14 15:51:08 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 15:51:08 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 15:51:09 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 15:51:09 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 15:51:09 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
[ERROR] 2021-07-14 15:51:09 [http-nio-auto-1-exec-1] ERROR r.n.c.aspects.LoggingAspect - null
[ERROR] 2021-07-14 15:51:09 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler.uploadToDb(DefaultFileHandler.java:91)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$FastClassBySpringCGLIB$$8d823bb1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$EnhancerBySpringCGLIB$$118ebbe8.uploadToDb(<generated>)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository.saveFile(DefaultCloudServiceFileRepository.java:53)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$FastClassBySpringCGLIB$$b940889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$EnhancerBySpringCGLIB$$18d25b8.saveFile(<generated>)
	at ru.netology.cloud_service_app.services.FileService.saveFile(FileService.java:33)
	at ru.netology.cloud_service_app.services.FileService$$FastClassBySpringCGLIB$$660dc7a6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.services.FileService$$EnhancerBySpringCGLIB$$2f5a2c2c.saveFile(<generated>)
	at ru.netology.cloud_service_app.controllers.FileController.saveFile(FileController.java:66)
	at ru.netology.cloud_service_app.controllers.FileController$$FastClassBySpringCGLIB$$d5e7b2cc.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.controllers.FileController$$EnhancerBySpringCGLIB$$297c5bdb.saveFile(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 15:51:55 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 15:51:55 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 15:51:56 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 15:51:56 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 15:51:56 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@74a6a609, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5a411614, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@2374d36a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@54d18072, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1506f20f, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a5b70d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@424fd310, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1a45193b, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@38f116f6, org.springframework.test.context.event.EventPublishingTestExecutionListener@5286c33a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@6e6d5d29, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5c530d1e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6c25e6c4, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@85e6769, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@c5ee75e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@bf1ec20]
[INFO ] 2021-07-14 15:51:56 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 15:51:57 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 15:51:57 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 15:51:57 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 15:51:57 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 15:51:59 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 15:51:59 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 15:51:59 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 15:51:59 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 15:51:59 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 15:52:03 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 27f3660f0d833beba75a5276675c32ac9048c683cb54f2e9caa4e111c9d9590c
[INFO ] 2021-07-14 15:52:07 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 27f3660f0d833beba75a5276675c32ac9048c683cb54f2e9caa4e111c9d9590c
[INFO ] 2021-07-14 15:52:08 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT8.983477S
[INFO ] 2021-07-14 15:52:09 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 99686 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 15:52:09 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 15:52:09 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 15:52:10 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 15:52:10 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 85 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 15:52:11 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@4fd80300' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 15:52:11 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 15:52:11 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 15:52:11 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 15:52:11 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 15:52:11 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 15:52:11 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2376 ms
[INFO ] 2021-07-14 15:52:12 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 15:52:12 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 15:52:12 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 15:52:13 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 15:52:13 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 15:52:13 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 15:52:13 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 15:52:13 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 15:52:13 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 15:52:13 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 32ms
[INFO ] 2021-07-14 15:52:13 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 15:52:13 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 10ms
[INFO ] 2021-07-14 15:52:13 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 15:52:13 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 15ms
[INFO ] 2021-07-14 15:52:13 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 15:52:13 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 14ms
[INFO ] 2021-07-14 15:52:13 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 15:52:13 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 14ms
[INFO ] 2021-07-14 15:52:14 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 15:52:14 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 645ms
[INFO ] 2021-07-14 15:52:14 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 15:52:14 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 50ms
[INFO ] 2021-07-14 15:52:14 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 15:52:14 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 20ms
[INFO ] 2021-07-14 15:52:14 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 15:52:14 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 15:52:14 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 15:52:14 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 15:52:15 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 15:52:16 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 15:52:16 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 15:52:17 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 15:52:17 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@7c4b7bc3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5a36a405, org.springframework.security.web.context.SecurityContextPersistenceFilter@40e420fe, org.springframework.security.web.header.HeaderWriterFilter@463e0b6a, org.springframework.web.filter.CorsFilter@45b7b254, org.springframework.security.web.authentication.logout.LogoutFilter@6cc91654, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@76320633, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@5100fe55, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3c5095df, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@357f0cc9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3ef97efc, org.springframework.security.web.session.SessionManagementFilter@3725471, org.springframework.security.web.access.ExceptionTranslationFilter@38d1c7d2, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@52bef30b]
[INFO ] 2021-07-14 15:52:19 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 54601 (http) with context path ''
[INFO ] 2021-07-14 15:52:19 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 10.057 seconds (JVM running for 24.239)
[INFO ] 2021-07-14 15:52:19 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 15:52:19 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 15:52:19 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 15:52:19 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 15:52:19 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[ERROR] 2021-07-14 15:52:20 [http-nio-auto-1-exec-1] ERROR r.n.c.aspects.LoggingAspect - null
[ERROR] 2021-07-14 15:52:20 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler.uploadToDb(DefaultFileHandler.java:91)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$FastClassBySpringCGLIB$$8d823bb1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$EnhancerBySpringCGLIB$$fb8ac2ef.uploadToDb(<generated>)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository.saveFile(DefaultCloudServiceFileRepository.java:53)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$FastClassBySpringCGLIB$$b940889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$EnhancerBySpringCGLIB$$82ef77c1.saveFile(<generated>)
	at ru.netology.cloud_service_app.services.FileService.saveFile(FileService.java:33)
	at ru.netology.cloud_service_app.services.FileService$$FastClassBySpringCGLIB$$660dc7a6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.services.FileService$$EnhancerBySpringCGLIB$$5e363aa0.saveFile(<generated>)
	at ru.netology.cloud_service_app.controllers.FileController.saveFile(FileController.java:66)
	at ru.netology.cloud_service_app.controllers.FileController$$FastClassBySpringCGLIB$$d5e7b2cc.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.controllers.FileController$$EnhancerBySpringCGLIB$$130bb29.saveFile(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 15:52:22 [SpringContextShutdownHook] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed from ACCEPTING_TRAFFIC to REFUSING_TRAFFIC
[INFO ] 2021-07-14 15:57:10 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 15:57:10 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 15:57:10 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 15:57:10 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 15:57:10 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@74a6a609, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5a411614, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@2374d36a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@54d18072, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1506f20f, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a5b70d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@424fd310, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1a45193b, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@38f116f6, org.springframework.test.context.event.EventPublishingTestExecutionListener@5286c33a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@6e6d5d29, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5c530d1e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6c25e6c4, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@85e6769, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@c5ee75e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@bf1ec20]
[INFO ] 2021-07-14 15:57:10 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 15:57:11 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 15:57:11 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 15:57:11 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 15:57:11 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 15:57:14 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 15:57:14 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 15:57:14 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 15:57:14 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 15:57:14 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 15:57:19 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 5bc3d24d166ba80ed80bad4c8a7f0dd4be6ecb8a44c746c9b3a6e3315ef6e4fd
[INFO ] 2021-07-14 15:57:22 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 5bc3d24d166ba80ed80bad4c8a7f0dd4be6ecb8a44c746c9b3a6e3315ef6e4fd
[INFO ] 2021-07-14 15:57:26 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT11.381726S
[INFO ] 2021-07-14 15:57:27 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 922 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 15:57:27 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 15:57:27 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 15:57:28 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 15:57:29 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 151 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 15:57:30 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@5f883d90' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 15:57:30 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 15:57:31 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 15:57:31 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 15:57:31 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 15:57:31 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 15:57:31 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4497 ms
[INFO ] 2021-07-14 15:57:32 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 15:57:32 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 15:57:33 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 15:57:33 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 15:57:33 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 15:57:34 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 15:57:34 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 15:57:34 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 15:57:34 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 15:57:34 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 83ms
[INFO ] 2021-07-14 15:57:34 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 15:57:34 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 20ms
[INFO ] 2021-07-14 15:57:34 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 15:57:34 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 18ms
[INFO ] 2021-07-14 15:57:34 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 15:57:34 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 22ms
[INFO ] 2021-07-14 15:57:34 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 15:57:34 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 36ms
[INFO ] 2021-07-14 15:57:35 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 15:57:35 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 846ms
[INFO ] 2021-07-14 15:57:35 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 15:57:35 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 58ms
[INFO ] 2021-07-14 15:57:35 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 15:57:35 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 15:57:35 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 15:57:35 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 15:57:35 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 15:57:35 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 15:57:36 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 15:57:38 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 15:57:38 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 15:57:40 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 15:57:40 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@7602da1a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6d985720, org.springframework.security.web.context.SecurityContextPersistenceFilter@3f514364, org.springframework.security.web.header.HeaderWriterFilter@5c14c284, org.springframework.web.filter.CorsFilter@2d1dbf4f, org.springframework.security.web.authentication.logout.LogoutFilter@463e0b6a, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@4f94b2a8, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@2f26634a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@32f35739, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@509e4bc4, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2810d9, org.springframework.security.web.session.SessionManagementFilter@3b30409, org.springframework.security.web.access.ExceptionTranslationFilter@6d5376b7, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@284e68ae]
[INFO ] 2021-07-14 15:57:42 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 56038 (http) with context path ''
[INFO ] 2021-07-14 15:57:42 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 16.062 seconds (JVM running for 33.363)
[INFO ] 2021-07-14 15:57:42 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 15:57:42 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 15:57:43 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 15:57:43 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 15:57:43 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
[ERROR] 2021-07-14 15:57:44 [http-nio-auto-1-exec-1] ERROR r.n.c.aspects.LoggingAspect - null
[ERROR] 2021-07-14 15:57:44 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler.uploadToDb(DefaultFileHandler.java:91)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$FastClassBySpringCGLIB$$8d823bb1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$EnhancerBySpringCGLIB$$f007c7fe.uploadToDb(<generated>)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository.saveFile(DefaultCloudServiceFileRepository.java:53)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$FastClassBySpringCGLIB$$b940889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$EnhancerBySpringCGLIB$$a7729852.saveFile(<generated>)
	at ru.netology.cloud_service_app.services.FileService.saveFile(FileService.java:33)
	at ru.netology.cloud_service_app.services.FileService$$FastClassBySpringCGLIB$$660dc7a6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.services.FileService$$EnhancerBySpringCGLIB$$ff6e87ab.saveFile(<generated>)
	at ru.netology.cloud_service_app.controllers.FileController.saveFile(FileController.java:66)
	at ru.netology.cloud_service_app.controllers.FileController$$FastClassBySpringCGLIB$$d5e7b2cc.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.controllers.FileController$$EnhancerBySpringCGLIB$$ae565d2f.saveFile(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 15:57:46 [SpringContextShutdownHook] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed from ACCEPTING_TRAFFIC to REFUSING_TRAFFIC
[INFO ] 2021-07-14 16:04:52 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 16:04:52 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 16:04:52 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 16:04:52 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 16:04:52 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@74a6a609, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5a411614, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@2374d36a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@54d18072, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1506f20f, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a5b70d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@424fd310, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1a45193b, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@38f116f6, org.springframework.test.context.event.EventPublishingTestExecutionListener@5286c33a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@6e6d5d29, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5c530d1e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6c25e6c4, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@85e6769, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@c5ee75e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@bf1ec20]
[INFO ] 2021-07-14 16:04:53 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 16:04:53 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 16:04:53 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 16:04:53 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 16:04:53 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 16:04:55 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 16:04:55 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 16:04:55 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 16:04:56 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 16:04:56 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 16:05:00 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 473ee282b88e6bc1721b54e4d5dd8acb711cfdcaeb7c92521dc57ada57e56fde
[INFO ] 2021-07-14 16:05:04 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 473ee282b88e6bc1721b54e4d5dd8acb711cfdcaeb7c92521dc57ada57e56fde
[INFO ] 2021-07-14 16:05:06 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT10.379745S
[INFO ] 2021-07-14 16:05:07 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 2166 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 16:05:07 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 16:05:07 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 16:05:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 16:05:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 82 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 16:05:09 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@14b95942' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:05:09 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:05:09 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 16:05:09 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 16:05:09 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 16:05:09 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 16:05:09 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2537 ms
[INFO ] 2021-07-14 16:05:10 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 16:05:10 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 16:05:10 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 16:05:11 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 16:05:11 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 16:05:11 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:05:11 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 16:05:11 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 16:05:11 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 16:05:11 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 42ms
[INFO ] 2021-07-14 16:05:11 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 16:05:11 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 19ms
[INFO ] 2021-07-14 16:05:11 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 16:05:11 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 41ms
[INFO ] 2021-07-14 16:05:11 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 16:05:11 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 20ms
[INFO ] 2021-07-14 16:05:11 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 16:05:11 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 21ms
[INFO ] 2021-07-14 16:05:12 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 16:05:12 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 747ms
[INFO ] 2021-07-14 16:05:12 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 16:05:12 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 57ms
[INFO ] 2021-07-14 16:05:12 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 16:05:12 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 16ms
[INFO ] 2021-07-14 16:05:12 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:05:12 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 16:05:12 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 16:05:13 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 16:05:13 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 16:05:14 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 16:05:14 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 16:05:15 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 16:05:15 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@8caffbd, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@25c3a441, org.springframework.security.web.context.SecurityContextPersistenceFilter@44bbf5e3, org.springframework.security.web.header.HeaderWriterFilter@7fd8f21, org.springframework.web.filter.CorsFilter@2057d8ec, org.springframework.security.web.authentication.logout.LogoutFilter@70290678, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@52bef30b, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@d56d9f6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2625eb84, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@51a42767, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@358f85b1, org.springframework.security.web.session.SessionManagementFilter@38d1c7d2, org.springframework.security.web.access.ExceptionTranslationFilter@254dfd34, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@375dc95c]
[INFO ] 2021-07-14 16:05:16 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 57975 (http) with context path ''
[INFO ] 2021-07-14 16:05:16 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 10.111 seconds (JVM running for 25.793)
[INFO ] 2021-07-14 16:05:16 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 16:05:16 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 16:05:17 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 16:05:17 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 16:05:17 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[ERROR] 2021-07-14 16:05:17 [http-nio-auto-1-exec-1] ERROR r.n.c.aspects.LoggingAspect - null
[ERROR] 2021-07-14 16:05:17 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler.uploadToDb(DefaultFileHandler.java:91)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$FastClassBySpringCGLIB$$8d823bb1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$EnhancerBySpringCGLIB$$2ff5d918.uploadToDb(<generated>)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository.saveFile(DefaultCloudServiceFileRepository.java:53)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$FastClassBySpringCGLIB$$b940889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$EnhancerBySpringCGLIB$$fb7c4f10.saveFile(<generated>)
	at ru.netology.cloud_service_app.services.FileService.saveFile(FileService.java:33)
	at ru.netology.cloud_service_app.services.FileService$$FastClassBySpringCGLIB$$660dc7a6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.services.FileService$$EnhancerBySpringCGLIB$$a86eca9.saveFile(<generated>)
	at ru.netology.cloud_service_app.controllers.FileController.saveFile(FileController.java:66)
	at ru.netology.cloud_service_app.controllers.FileController$$FastClassBySpringCGLIB$$d5e7b2cc.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.controllers.FileController$$EnhancerBySpringCGLIB$$ff47aa35.saveFile(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 16:05:19 [SpringContextShutdownHook] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed from ACCEPTING_TRAFFIC to REFUSING_TRAFFIC
[INFO ] 2021-07-14 16:05:52 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 16:05:52 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 16:05:52 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 16:05:52 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 16:05:52 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@74a6a609, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5a411614, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@2374d36a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@54d18072, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1506f20f, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a5b70d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@424fd310, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1a45193b, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@38f116f6, org.springframework.test.context.event.EventPublishingTestExecutionListener@5286c33a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@6e6d5d29, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5c530d1e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6c25e6c4, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@85e6769, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@c5ee75e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@bf1ec20]
[INFO ] 2021-07-14 16:05:52 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 16:05:53 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 16:05:53 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 16:05:53 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 16:05:53 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 16:05:55 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 16:05:55 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 16:05:55 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 16:05:55 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 16:05:56 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 16:06:00 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: d0d2e379ccef166db6f33371d92dc78edff84be0c67763ece0c99a5ee35e2cae
[INFO ] 2021-07-14 16:06:05 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: d0d2e379ccef166db6f33371d92dc78edff84be0c67763ece0c99a5ee35e2cae
[INFO ] 2021-07-14 16:06:07 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT11.274875S
[INFO ] 2021-07-14 16:06:07 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 2305 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 16:06:07 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 16:06:08 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 16:06:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 16:06:09 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 104 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 16:06:09 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@5889fc44' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:06:09 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:06:10 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 16:06:10 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 16:06:10 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 16:06:10 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 16:06:10 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2605 ms
[INFO ] 2021-07-14 16:06:10 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 16:06:11 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 16:06:11 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 16:06:12 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 16:06:12 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 16:06:12 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:06:12 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 16:06:12 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 16:06:12 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 16:06:12 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 46ms
[INFO ] 2021-07-14 16:06:12 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 16:06:12 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 25ms
[INFO ] 2021-07-14 16:06:12 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 16:06:12 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 20ms
[INFO ] 2021-07-14 16:06:12 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 16:06:12 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 19ms
[INFO ] 2021-07-14 16:06:12 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 16:06:12 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 14ms
[INFO ] 2021-07-14 16:06:13 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 16:06:13 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 679ms
[INFO ] 2021-07-14 16:06:13 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 16:06:13 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 52ms
[INFO ] 2021-07-14 16:06:13 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 16:06:13 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 18ms
[INFO ] 2021-07-14 16:06:13 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:06:13 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 16:06:13 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 16:06:13 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 16:06:13 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 16:06:14 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 16:06:14 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 16:06:15 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 16:06:16 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@33ef701e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1fd1deed, org.springframework.security.web.context.SecurityContextPersistenceFilter@3aee72d8, org.springframework.security.web.header.HeaderWriterFilter@72f4232, org.springframework.web.filter.CorsFilter@814b60b, org.springframework.security.web.authentication.logout.LogoutFilter@16bed816, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@515a897c, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@197d6cc9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3b538e2a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2625eb84, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@8caffbd, org.springframework.security.web.session.SessionManagementFilter@41843b88, org.springframework.security.web.access.ExceptionTranslationFilter@1cd7bc66, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@70f5f6c7]
[INFO ] 2021-07-14 16:06:17 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 58239 (http) with context path ''
[INFO ] 2021-07-14 16:06:17 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 9.905 seconds (JVM running for 26.259)
[INFO ] 2021-07-14 16:06:17 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 16:06:17 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 16:06:17 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 16:06:17 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 16:06:17 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[ERROR] 2021-07-14 16:06:18 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.web.multipart.MultipartException: Failed to parse multipart servlet request; nested exception is org.apache.commons.fileupload.FileUploadException: the request was rejected because no multipart boundary was found] with root cause
org.apache.commons.fileupload.FileUploadException: the request was rejected because no multipart boundary was found
	at org.apache.commons.fileupload.FileUploadBase$FileItemIteratorImpl.<init>(FileUploadBase.java:990)
	at org.apache.commons.fileupload.FileUploadBase.getItemIterator(FileUploadBase.java:310)
	at org.apache.commons.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:334)
	at org.apache.commons.fileupload.servlet.ServletFileUpload.parseRequest(ServletFileUpload.java:115)
	at org.springframework.web.multipart.commons.CommonsMultipartResolver.parseRequest(CommonsMultipartResolver.java:159)
	at org.springframework.web.multipart.commons.CommonsMultipartResolver.resolveMultipart(CommonsMultipartResolver.java:143)
	at org.springframework.web.servlet.DispatcherServlet.checkMultipart(DispatcherServlet.java:1201)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1035)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 16:07:28 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 16:07:28 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 16:07:28 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 16:07:28 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 16:07:28 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@74a6a609, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5a411614, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@2374d36a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@54d18072, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1506f20f, org.springframework.test.context.support.DirtiesContextTestExecutionListener@47a5b70d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@424fd310, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1a45193b, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@38f116f6, org.springframework.test.context.event.EventPublishingTestExecutionListener@5286c33a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@6e6d5d29, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5c530d1e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6c25e6c4, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@85e6769, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@c5ee75e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@bf1ec20]
[INFO ] 2021-07-14 16:07:29 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 16:07:29 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 16:07:29 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 16:07:29 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 16:07:29 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 16:07:32 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 16:07:32 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 16:07:32 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 16:07:32 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 16:07:32 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 16:07:36 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 19cdae3857cd32f1e0b7fa4fbfcdf4f738d8481051dd1f6873b00fb110b59e41
[INFO ] 2021-07-14 16:07:40 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 19cdae3857cd32f1e0b7fa4fbfcdf4f738d8481051dd1f6873b00fb110b59e41
[INFO ] 2021-07-14 16:07:41 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT9.558563S
[INFO ] 2021-07-14 16:07:42 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 2578 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 16:07:42 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 16:07:42 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 16:07:43 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 16:07:43 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 82 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 16:07:44 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@352f6727' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:07:44 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:07:44 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 16:07:44 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 16:07:44 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 16:07:44 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 16:07:44 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2318 ms
[INFO ] 2021-07-14 16:07:44 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 16:07:45 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 16:07:45 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 16:07:46 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 16:07:46 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 16:07:46 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:07:46 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 16:07:46 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 16:07:46 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 16:07:46 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 33ms
[INFO ] 2021-07-14 16:07:46 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 16:07:46 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 11ms
[INFO ] 2021-07-14 16:07:46 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 16:07:46 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 12ms
[INFO ] 2021-07-14 16:07:46 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 16:07:46 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 18ms
[INFO ] 2021-07-14 16:07:46 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 16:07:46 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 14ms
[INFO ] 2021-07-14 16:07:47 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 16:07:47 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 655ms
[INFO ] 2021-07-14 16:07:47 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 16:07:47 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 47ms
[INFO ] 2021-07-14 16:07:47 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 16:07:47 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 15ms
[INFO ] 2021-07-14 16:07:47 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:07:47 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 16:07:47 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 16:07:47 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 16:07:47 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 16:07:48 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 16:07:48 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 16:07:49 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 16:07:50 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@76aab1e3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4f9e32f2, org.springframework.security.web.context.SecurityContextPersistenceFilter@1ba00c0c, org.springframework.security.web.header.HeaderWriterFilter@5a07088b, org.springframework.web.filter.CorsFilter@432e242d, org.springframework.security.web.authentication.logout.LogoutFilter@4cbf1c30, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@537360e3, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@70f5f6c7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@72f4232, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7fd8f21, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4ec25389, org.springframework.security.web.session.SessionManagementFilter@7ef6a063, org.springframework.security.web.access.ExceptionTranslationFilter@3b30409, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4f94b2a8]
[INFO ] 2021-07-14 16:07:50 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 58635 (http) with context path ''
[INFO ] 2021-07-14 16:07:51 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 9.125 seconds (JVM running for 23.836)
[INFO ] 2021-07-14 16:07:51 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 16:07:51 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 16:07:51 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 16:07:51 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 16:07:51 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[ERROR] 2021-07-14 16:07:51 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.web.multipart.MultipartException: Failed to parse multipart servlet request; nested exception is org.apache.commons.fileupload.FileUploadException: the request was rejected because no multipart boundary was found] with root cause
org.apache.commons.fileupload.FileUploadException: the request was rejected because no multipart boundary was found
	at org.apache.commons.fileupload.FileUploadBase$FileItemIteratorImpl.<init>(FileUploadBase.java:990)
	at org.apache.commons.fileupload.FileUploadBase.getItemIterator(FileUploadBase.java:310)
	at org.apache.commons.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:334)
	at org.apache.commons.fileupload.servlet.ServletFileUpload.parseRequest(ServletFileUpload.java:115)
	at org.springframework.web.multipart.commons.CommonsMultipartResolver.parseRequest(CommonsMultipartResolver.java:159)
	at org.springframework.web.multipart.commons.CommonsMultipartResolver.resolveMultipart(CommonsMultipartResolver.java:143)
	at org.springframework.web.servlet.DispatcherServlet.checkMultipart(DispatcherServlet.java:1201)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1035)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 16:07:53 [SpringContextShutdownHook] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed from ACCEPTING_TRAFFIC to REFUSING_TRAFFIC
[INFO ] 2021-07-14 16:08:11 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 16:08:11 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 16:08:11 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 16:08:12 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 16:08:12 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@2e9fda69, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@17cdf2d0, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@1755e85b, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@736d6a5c, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@2371aaca, org.springframework.test.context.support.DirtiesContextTestExecutionListener@5b529706, org.springframework.test.context.transaction.TransactionalTestExecutionListener@63fdab07, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@7b5a12ae, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@5553d0f5, org.springframework.test.context.event.EventPublishingTestExecutionListener@1af687fe, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@14dda234, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@3f390d63, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@74a6a609, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@5a411614, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@2374d36a, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@54d18072, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@1506f20f]
[INFO ] 2021-07-14 16:08:12 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 16:08:14 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 16:08:14 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 16:08:14 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 16:08:14 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 16:08:16 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 16:08:16 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 16:08:16 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 16:08:17 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 16:08:17 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 16:08:21 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 0a0af41430d29d6bade6820b6906346c66d429c3cefbcd406712e7d696db9158
[INFO ] 2021-07-14 16:08:25 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 0a0af41430d29d6bade6820b6906346c66d429c3cefbcd406712e7d696db9158
[INFO ] 2021-07-14 16:08:27 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT10.463786S
[INFO ] 2021-07-14 16:08:28 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 2667 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 16:08:28 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 16:08:28 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 16:08:29 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 16:08:29 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 92 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 16:08:30 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@23c7cb18' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:08:30 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:08:31 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 16:08:31 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 16:08:31 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 16:08:31 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 16:08:31 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3005 ms
[INFO ] 2021-07-14 16:08:31 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 16:08:31 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 16:08:32 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 16:08:33 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 16:08:33 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 16:08:33 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:08:33 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 16:08:33 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 16:08:33 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 16:08:33 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 42ms
[INFO ] 2021-07-14 16:08:33 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 16:08:33 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 22ms
[INFO ] 2021-07-14 16:08:33 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 16:08:33 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 28ms
[INFO ] 2021-07-14 16:08:33 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 16:08:33 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 23ms
[INFO ] 2021-07-14 16:08:33 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 16:08:33 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 16:08:34 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 16:08:34 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 761ms
[INFO ] 2021-07-14 16:08:34 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 16:08:34 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 55ms
[INFO ] 2021-07-14 16:08:34 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 16:08:34 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 16ms
[INFO ] 2021-07-14 16:08:34 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:08:34 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 16:08:34 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 16:08:34 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 16:08:34 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 16:08:35 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 16:08:35 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 16:08:37 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 16:08:37 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@524250ec, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7432cb37, org.springframework.security.web.context.SecurityContextPersistenceFilter@2fc2d1f0, org.springframework.security.web.header.HeaderWriterFilter@2eb6e166, org.springframework.web.filter.CorsFilter@7602da1a, org.springframework.security.web.authentication.logout.LogoutFilter@beac39c, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@6d985720, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@2d1dbf4f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@15c48119, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3b30409, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4f94b2a8, org.springframework.security.web.session.SessionManagementFilter@1c1bc904, org.springframework.security.web.access.ExceptionTranslationFilter@3831fb48, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5ebd3708]
[INFO ] 2021-07-14 16:08:38 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 58853 (http) with context path ''
[INFO ] 2021-07-14 16:08:38 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 10.595 seconds (JVM running for 28.234)
[INFO ] 2021-07-14 16:08:38 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 16:08:38 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 16:08:39 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 16:08:39 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 16:08:39 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[ERROR] 2021-07-14 16:08:39 [http-nio-auto-1-exec-1] ERROR r.n.c.aspects.LoggingAspect - null
[ERROR] 2021-07-14 16:08:39 [http-nio-auto-1-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler.uploadToDb(DefaultFileHandler.java:91)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$FastClassBySpringCGLIB$$8d823bb1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.handlers.file_uploaders.DefaultFileHandler$$EnhancerBySpringCGLIB$$c3c868b3.uploadToDb(<generated>)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository.saveFile(DefaultCloudServiceFileRepository.java:53)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$FastClassBySpringCGLIB$$b940889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.repositories.file_repositories.DefaultCloudServiceFileRepository$$EnhancerBySpringCGLIB$$4fad2abd.saveFile(<generated>)
	at ru.netology.cloud_service_app.services.FileService.saveFile(FileService.java:33)
	at ru.netology.cloud_service_app.services.FileService$$FastClassBySpringCGLIB$$660dc7a6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.services.FileService$$EnhancerBySpringCGLIB$$b6df4d84.saveFile(<generated>)
	at ru.netology.cloud_service_app.controllers.FileController.saveFile(FileController.java:66)
	at ru.netology.cloud_service_app.controllers.FileController$$FastClassBySpringCGLIB$$d5e7b2cc.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:180)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at ru.netology.cloud_service_app.controllers.FileController$$EnhancerBySpringCGLIB$$a711265e.saveFile(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier.doFilterInternal(JwtTokenVerifier.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
[INFO ] 2021-07-14 16:13:45 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 16:13:45 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 16:13:45 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 16:13:45 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 16:13:45 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@2eced48b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@47c4ecdc, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@42f33b5d, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@5c8504fd, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@4b7e96a, org.springframework.test.context.support.DirtiesContextTestExecutionListener@6475472c, org.springframework.test.context.transaction.TransactionalTestExecutionListener@3f07b12c, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@4bd1f8dd, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@7096b474, org.springframework.test.context.event.EventPublishingTestExecutionListener@3e14c16d, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@3c989952, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@784b990c, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@3d3ba765, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@25bc0606, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@5d1659ea, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@793138bd, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@1951b871]
[INFO ] 2021-07-14 16:13:46 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 16:13:46 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 16:13:46 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 16:13:47 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 16:13:47 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 16:13:49 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 16:13:49 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 16:13:49 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 16:13:49 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 16:13:49 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 16:13:53 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 01783708aae83b3526915018158b4b7828015937f0fa6554f5d52318eef8f186
[INFO ] 2021-07-14 16:13:56 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 01783708aae83b3526915018158b4b7828015937f0fa6554f5d52318eef8f186
[INFO ] 2021-07-14 16:13:58 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT9.405874S
[INFO ] 2021-07-14 16:13:59 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 3618 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 16:13:59 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 16:13:59 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 16:14:00 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 16:14:00 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 86 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 16:14:01 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@78318ac2' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:14:01 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:14:01 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 16:14:01 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 16:14:01 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 16:14:02 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 16:14:02 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2522 ms
[INFO ] 2021-07-14 16:14:02 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 16:14:02 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 16:14:03 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 16:14:03 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 16:14:03 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 16:14:03 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:14:03 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 16:14:03 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 16:14:03 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 16:14:03 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 42ms
[INFO ] 2021-07-14 16:14:03 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 16:14:03 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 14ms
[INFO ] 2021-07-14 16:14:03 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 16:14:03 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 18ms
[INFO ] 2021-07-14 16:14:03 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 16:14:03 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 16:14:03 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 16:14:03 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 16ms
[INFO ] 2021-07-14 16:14:04 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 16:14:04 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 677ms
[INFO ] 2021-07-14 16:14:04 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 16:14:04 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 45ms
[INFO ] 2021-07-14 16:14:04 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 16:14:04 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 15ms
[INFO ] 2021-07-14 16:14:04 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:14:04 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 16:14:05 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 16:14:05 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 16:14:05 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 16:14:06 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 16:14:06 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 16:14:07 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 16:14:08 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@67e03fe4, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1ffcb4bb, org.springframework.security.web.context.SecurityContextPersistenceFilter@2810d9, org.springframework.security.web.header.HeaderWriterFilter@524250ec, org.springframework.web.filter.CorsFilter@6d66a248, org.springframework.security.web.authentication.logout.LogoutFilter@e822394, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@29617475, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@4f9871a2, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3644d12a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@70f5f6c7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@353b5d86, org.springframework.security.web.session.SessionManagementFilter@6d985720, org.springframework.security.web.access.ExceptionTranslationFilter@5ebd3708, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3d1b6816]
[INFO ] 2021-07-14 16:14:08 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 59053 (http) with context path ''
[INFO ] 2021-07-14 16:14:08 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 9.881 seconds (JVM running for 24.676)
[INFO ] 2021-07-14 16:14:08 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 16:14:08 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 16:14:43 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 16:14:43 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 16:14:44 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 16:14:44 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 16:14:44 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@5a411614, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@2374d36a, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@54d18072, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@1506f20f, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@47a5b70d, org.springframework.test.context.support.DirtiesContextTestExecutionListener@424fd310, org.springframework.test.context.transaction.TransactionalTestExecutionListener@1a45193b, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@38f116f6, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@5286c33a, org.springframework.test.context.event.EventPublishingTestExecutionListener@6e6d5d29, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@5c530d1e, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@6c25e6c4, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@85e6769, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@c5ee75e, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@bf1ec20, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@70efb718]
[INFO ] 2021-07-14 16:14:44 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 16:14:45 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 16:14:45 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 16:14:45 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 16:14:45 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 16:14:47 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 16:14:47 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 16:14:47 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 16:14:48 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 16:14:48 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 16:14:52 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: b38df38946194f1000eb36899995de63f27a3e615a7a0b39888fdcc78c01b9f4
[INFO ] 2021-07-14 16:14:55 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: b38df38946194f1000eb36899995de63f27a3e615a7a0b39888fdcc78c01b9f4
[INFO ] 2021-07-14 16:14:57 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT9.337001S
[INFO ] 2021-07-14 16:14:57 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 3759 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 16:14:57 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 16:14:58 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 16:14:58 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 16:14:58 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 82 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 16:14:59 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@667797f' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:14:59 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:15:00 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 16:15:00 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 16:15:00 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 16:15:00 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 16:15:00 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2345 ms
[INFO ] 2021-07-14 16:15:00 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 16:15:00 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 16:15:01 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 16:15:01 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 16:15:01 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 16:15:01 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:15:01 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 16:15:01 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 16:15:01 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 16:15:01 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 34ms
[INFO ] 2021-07-14 16:15:01 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 16:15:01 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 12ms
[INFO ] 2021-07-14 16:15:01 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 16:15:01 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 14ms
[INFO ] 2021-07-14 16:15:01 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 16:15:01 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 16ms
[INFO ] 2021-07-14 16:15:01 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 16:15:01 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 13ms
[INFO ] 2021-07-14 16:15:02 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 16:15:02 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 632ms
[INFO ] 2021-07-14 16:15:02 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 16:15:02 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 50ms
[INFO ] 2021-07-14 16:15:02 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 16:15:02 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 15ms
[INFO ] 2021-07-14 16:15:02 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:15:02 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 16:15:02 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 16:15:02 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 16:15:03 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 16:15:03 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 16:15:03 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 16:15:04 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 16:15:05 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@814b60b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@515a897c, org.springframework.security.web.context.SecurityContextPersistenceFilter@533ed36e, org.springframework.security.web.header.HeaderWriterFilter@beac39c, org.springframework.web.filter.CorsFilter@197d6cc9, org.springframework.security.web.authentication.logout.LogoutFilter@4c821dc7, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@8caffbd, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@25c3a441, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@44bbf5e3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3725471, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2057d8ec, org.springframework.security.web.session.SessionManagementFilter@7fd8f21, org.springframework.security.web.access.ExceptionTranslationFilter@509e4bc4, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7cff1930]
[INFO ] 2021-07-14 16:15:06 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 59070 (http) with context path ''
[INFO ] 2021-07-14 16:15:06 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 8.632 seconds (JVM running for 23.426)
[INFO ] 2021-07-14 16:15:06 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 16:15:06 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 16:15:06 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 16:15:06 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 16:15:06 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[INFO ] 2021-07-14 16:15:07 [http-nio-auto-1-exec-1] INFO  r.n.c.aspects.LoggingAspect - –û—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞, –≤–æ–∑–º–æ–∂–Ω–æ –ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
[INFO ] 2021-07-14 16:15:07 [http-nio-auto-1-exec-1] INFO  r.n.c.aspects.LoggingAspect - –í –ë–î –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ —Ñ–∞–π–ª–æ–≤, –ø—Ä–∏–≥–æ–¥–Ω—ã—Ö –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
[INFO ] 2021-07-14 16:15:41 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 16:15:41 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 16:15:41 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 16:15:42 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 16:15:42 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@17cdf2d0, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@1755e85b, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@736d6a5c, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@2371aaca, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@5b529706, org.springframework.test.context.support.DirtiesContextTestExecutionListener@63fdab07, org.springframework.test.context.transaction.TransactionalTestExecutionListener@7b5a12ae, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@5553d0f5, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@1af687fe, org.springframework.test.context.event.EventPublishingTestExecutionListener@14dda234, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@3f390d63, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@74a6a609, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@5a411614, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@2374d36a, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@54d18072, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@1506f20f, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@47a5b70d]
[INFO ] 2021-07-14 16:15:42 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 16:15:43 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 16:15:43 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 16:15:43 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 16:15:43 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 16:15:46 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 16:15:46 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 16:15:46 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 16:15:46 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 16:15:46 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 16:15:51 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 565752e7e8a4d2b28ff327797206aa7b6ef980914bc6d6600357314201ea2b04
[INFO ] 2021-07-14 16:15:54 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 565752e7e8a4d2b28ff327797206aa7b6ef980914bc6d6600357314201ea2b04
[INFO ] 2021-07-14 16:15:56 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT9.89662S
[INFO ] 2021-07-14 16:15:57 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 3899 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 16:15:57 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 16:15:57 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 16:15:58 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 16:15:58 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 131 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 16:15:59 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@5d3f99d7' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:15:59 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:15:59 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 16:15:59 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 16:15:59 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 16:15:59 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 16:15:59 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2773 ms
[INFO ] 2021-07-14 16:16:00 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 16:16:00 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 16:16:01 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 16:16:01 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 16:16:01 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 16:16:01 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:16:01 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 16:16:01 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 16:16:01 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 16:16:01 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 34ms
[INFO ] 2021-07-14 16:16:01 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 16:16:01 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 11ms
[INFO ] 2021-07-14 16:16:01 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 16:16:01 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 16:16:01 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 16:16:01 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 20ms
[INFO ] 2021-07-14 16:16:02 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 16:16:02 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 23ms
[INFO ] 2021-07-14 16:16:02 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 16:16:02 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 706ms
[INFO ] 2021-07-14 16:16:02 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 16:16:02 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 77ms
[INFO ] 2021-07-14 16:16:02 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 16:16:02 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 21ms
[INFO ] 2021-07-14 16:16:02 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:16:03 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 16:16:03 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 16:16:03 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 16:16:03 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 16:16:04 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 16:16:04 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 16:16:05 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 16:16:06 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@3ce74930, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4c58212, org.springframework.security.web.context.SecurityContextPersistenceFilter@43b1fdb7, org.springframework.security.web.header.HeaderWriterFilter@3831fb48, org.springframework.web.filter.CorsFilter@6236beac, org.springframework.security.web.authentication.logout.LogoutFilter@509e4bc4, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@1508bc71, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@1320d929, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@53fa630, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6354a50a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3b5d0c4d, org.springframework.security.web.session.SessionManagementFilter@63f1d374, org.springframework.security.web.access.ExceptionTranslationFilter@5acbef42, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4c821dc7]
[INFO ] 2021-07-14 16:16:07 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 59089 (http) with context path ''
[INFO ] 2021-07-14 16:16:07 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 10.409 seconds (JVM running for 26.93)
[INFO ] 2021-07-14 16:16:07 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 16:16:07 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 16:16:07 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 16:16:07 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 16:16:07 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[INFO ] 2021-07-14 16:16:08 [http-nio-auto-1-exec-1] INFO  r.n.c.aspects.LoggingAspect - –û—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞, –≤–æ–∑–º–æ–∂–Ω–æ –ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
[INFO ] 2021-07-14 16:16:08 [http-nio-auto-1-exec-1] INFO  r.n.c.aspects.LoggingAspect - –í –ë–î –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ —Ñ–∞–π–ª–æ–≤, –ø—Ä–∏–≥–æ–¥–Ω—ã—Ö –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
[INFO ] 2021-07-14 16:19:00 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 16:19:00 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 16:19:01 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 16:19:01 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 16:19:01 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@14d14731, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@2eced48b, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@47c4ecdc, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@42f33b5d, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@5c8504fd, org.springframework.test.context.support.DirtiesContextTestExecutionListener@4b7e96a, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6475472c, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@3f07b12c, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@4bd1f8dd, org.springframework.test.context.event.EventPublishingTestExecutionListener@7096b474, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@3e14c16d, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@3c989952, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@784b990c, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@3d3ba765, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@25bc0606, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@5d1659ea, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@793138bd]
[INFO ] 2021-07-14 16:19:01 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 16:19:02 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 16:19:02 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 16:19:02 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 16:19:02 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 16:19:04 [main] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 16:19:04 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 16:19:04 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 16:19:04 [main] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 16:19:04 [main] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 16:19:09 [main] INFO  üê≥ [postgres:13.2] - Starting container with ID: 70c3b3d2e14185bbc4de4591bc1d7904bee88b433714807ce1f010ac0434ec2f
[INFO ] 2021-07-14 16:19:12 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 70c3b3d2e14185bbc4de4591bc1d7904bee88b433714807ce1f010ac0434ec2f
[INFO ] 2021-07-14 16:19:14 [main] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT9.704152S
[INFO ] 2021-07-14 16:19:15 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 4391 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 16:19:15 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 16:19:15 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 16:19:16 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 16:19:16 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 83 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 16:19:16 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@2ae3235e' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:19:16 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:19:17 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 16:19:17 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 16:19:17 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 16:19:17 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 16:19:17 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2355 ms
[INFO ] 2021-07-14 16:19:17 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 16:19:17 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 16:19:18 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 16:19:18 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
[INFO ] 2021-07-14 16:19:18 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 16:19:19 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:19:19 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 16:19:19 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 16:19:19 [main] INFO  liquibase.changelog - SQL in file 001-create-users-table.sql executed
[INFO ] 2021-07-14 16:19:19 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/001/001-create-users-table.xml::001::Maxim ran successfully in 32ms
[INFO ] 2021-07-14 16:19:19 [main] INFO  liquibase.changelog - SQL in file 002-create-roles-table.sql executed
[INFO ] 2021-07-14 16:19:19 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/002/002-create-roles-table.xml::002::Maxim ran successfully in 11ms
[INFO ] 2021-07-14 16:19:19 [main] INFO  liquibase.changelog - SQL in file 003-create-authorities-table.sql executed
[INFO ] 2021-07-14 16:19:19 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/003/003-create-authorities-table.xml::003::Maxim ran successfully in 10ms
[INFO ] 2021-07-14 16:19:19 [main] INFO  liquibase.changelog - SQL in file 004-create-users-roles-table.sql executed
[INFO ] 2021-07-14 16:19:19 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/004/004-create-users-roles-table.xml::004::Maxim ran successfully in 19ms
[INFO ] 2021-07-14 16:19:19 [main] INFO  liquibase.changelog - SQL in file 005-create-roles-authorities-table.sql executed
[INFO ] 2021-07-14 16:19:19 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/005/005-create-roles-authorities-table.xml::005::Maxim ran successfully in 17ms
[INFO ] 2021-07-14 16:19:19 [main] INFO  liquibase.changelog - SQL in file 006-fill-tables-for-test.sql executed
[INFO ] 2021-07-14 16:19:19 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/006/006-fill-tables-for-test.xml::006::Maxim ran successfully in 648ms
[INFO ] 2021-07-14 16:19:19 [main] INFO  liquibase.changelog - SQL in file 007-add-roles-and-authorities.sql executed
[INFO ] 2021-07-14 16:19:19 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/007/007-add-roles-and-authorities.xml::007::Maxim ran successfully in 42ms
[INFO ] 2021-07-14 16:19:19 [main] INFO  liquibase.changelog - SQL in file 008-add-files-table.sql executed
[INFO ] 2021-07-14 16:19:19 [main] INFO  liquibase.changelog - ChangeSet db/changelog/migrations/008/008-add-files-table.xml::008::Maxim ran successfully in 14ms
[INFO ] 2021-07-14 16:19:19 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:19:20 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 16:19:20 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 16:19:20 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 16:19:20 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 16:19:21 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 16:19:21 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 16:19:22 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 16:19:22 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@76e56b17, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@31ee5a9, org.springframework.security.web.context.SecurityContextPersistenceFilter@357f0cc9, org.springframework.security.web.header.HeaderWriterFilter@7eaa52d6, org.springframework.web.filter.CorsFilter@67add4c9, org.springframework.security.web.authentication.logout.LogoutFilter@72de1d86, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@491afa9b, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@147a8d7c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5b6a9ef6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@230ea983, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@60bd11f7, org.springframework.security.web.session.SessionManagementFilter@5d52a17b, org.springframework.security.web.access.ExceptionTranslationFilter@3d2a164e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@45b7b254]
[INFO ] 2021-07-14 16:19:23 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 59110 (http) with context path ''
[INFO ] 2021-07-14 16:19:23 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 8.795 seconds (JVM running for 23.687)
[INFO ] 2021-07-14 16:19:23 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 16:19:23 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 16:19:24 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
[INFO ] 2021-07-14 16:19:24 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
[INFO ] 2021-07-14 16:19:24 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
[INFO ] 2021-07-14 16:19:24 [http-nio-auto-1-exec-1] INFO  r.n.c.aspects.LoggingAspect - –ü—Ä–∏–Ω—è—Ç –∑–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è max@mail.ru –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞ 111.jpeg, –Ω–∞ –Ω–æ–≤–æ–µ: 222.jpeg
[INFO ] 2021-07-14 16:19:24 [http-nio-auto-1-exec-1] INFO  r.n.c.aspects.LoggingAspect - –ü–æ–ª—å–∑–æ–≤–∞–µ—Ç–µ–ª—å max@mail.ru —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–∏–ª —Ñ–∞–π–ª 111.jpeg, –Ω–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞: 222.jpeg
[INFO ] 2021-07-14 16:19:24 [http-nio-auto-1-exec-2] INFO  r.n.c.aspects.LoggingAspect - –ü—Ä–∏–Ω—è—Ç –∑–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞–µ—Ç–µ–ª—è max@mail.ru –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
[INFO ] 2021-07-14 16:19:24 [http-nio-auto-1-exec-2] INFO  r.n.c.aspects.LoggingAspect - –û—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞, –≤–æ–∑–º–æ–∂–Ω–æ –ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
[INFO ] 2021-07-14 16:19:24 [http-nio-auto-1-exec-2] INFO  r.n.c.aspects.LoggingAspect - –í –ë–î –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ —Ñ–∞–π–ª–æ–≤, –ø—Ä–∏–≥–æ–¥–Ω—ã—Ö –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
[INFO ] 2021-07-14 16:19:24 [http-nio-auto-1-exec-2] INFO  r.n.c.aspects.LoggingAspect - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å max@mail.ru —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏–ª —Ñ–∞–π–ª
[INFO ] 2021-07-14 16:19:24 [http-nio-auto-1-exec-3] INFO  r.n.c.aspects.LoggingAspect - –ü—Ä–∏–Ω—è—Ç –∑–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞–µ—Ç–µ–ª—è max@mail.ru –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ 111.jpeg
[INFO ] 2021-07-14 16:19:24 [http-nio-auto-1-exec-3] INFO  r.n.c.aspects.LoggingAspect - –ü–æ–ª—å–∑–æ–≤–∞–µ—Ç–µ–ª—å max@mail.ru —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–∏–ª —Ñ–∞–π–ª 111.jpeg
[INFO ] 2021-07-14 16:19:24 [http-nio-auto-1-exec-4] INFO  r.n.c.aspects.LoggingAspect - –ü—Ä–∏–Ω—è—Ç –∑–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è max@mail.ru –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ 111.jpeg
[INFO ] 2021-07-14 16:19:24 [http-nio-auto-1-exec-4] INFO  r.n.c.aspects.LoggingAspect - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å max@mail.ru —É—Å–ø–µ—à–Ω–æ —Å–∫–∞—á–∞–ª —Ñ–∞–π–ª 111.jpeg
[INFO ] 2021-07-14 16:30:41 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 16:30:41 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 16:30:41 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 16:30:41 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 16:30:41 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@4b7e96a, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@6475472c, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@3f07b12c, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@4bd1f8dd, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@7096b474, org.springframework.test.context.support.DirtiesContextTestExecutionListener@3e14c16d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@3c989952, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@784b990c, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@3d3ba765, org.springframework.test.context.event.EventPublishingTestExecutionListener@25bc0606, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@5d1659ea, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@793138bd, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@1951b871, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@5c18016b, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@33aeca0b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@43aaf813, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@57ac5227]
[INFO ] 2021-07-14 16:30:42 [testcontainers-lifecycle-0] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 16:30:42 [testcontainers-lifecycle-0] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 16:30:42 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 16:30:43 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 16:30:43 [testcontainers-lifecycle-0] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 16:30:45 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 16:30:45 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 16:30:45 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 16:30:45 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 16:30:45 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 16:30:49 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Starting container with ID: 48d0d98b3c62b5dfdf1ab0c2001ce2a2de82edd37acf50aaf267993de69abb28
[INFO ] 2021-07-14 16:30:52 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 48d0d98b3c62b5dfdf1ab0c2001ce2a2de82edd37acf50aaf267993de69abb28
[INFO ] 2021-07-14 16:30:54 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT9.276862S
[INFO ] 2021-07-14 16:30:54 [main] INFO  üê≥ [cloud_service_app:1.0] - Creating container for image: cloud_service_app:1.0
[INFO ] 2021-07-14 16:30:54 [main] INFO  üê≥ [cloud_service_app:1.0] - Starting container with ID: d9e77c1232700c8861764eab229dcd152a57f360c53765fa2c94306affa01fbe
[INFO ] 2021-07-14 16:30:58 [main] INFO  üê≥ [cloud_service_app:1.0] - Container cloud_service_app:1.0 is starting: d9e77c1232700c8861764eab229dcd152a57f360c53765fa2c94306affa01fbe
[INFO ] 2021-07-14 16:31:18 [main] INFO  üê≥ [cloud_service_app:1.0] - Container cloud_service_app:1.0 started in PT24.091081S
[INFO ] 2021-07-14 16:31:18 [main] INFO  üê≥ [front_app:1.0] - Creating container for image: front_app:1.0
[INFO ] 2021-07-14 16:31:18 [main] INFO  üê≥ [front_app:1.0] - Starting container with ID: 475688bdca7e0a819b057619f54772f88ee7b4e77ad96708fd6f8908a69b9273
[INFO ] 2021-07-14 16:31:23 [main] INFO  üê≥ [front_app:1.0] - Container front_app:1.0 is starting: 475688bdca7e0a819b057619f54772f88ee7b4e77ad96708fd6f8908a69b9273
[INFO ] 2021-07-14 16:31:30 [main] INFO  üê≥ [front_app:1.0] - Container front_app:1.0 started in PT11.316974S
[INFO ] 2021-07-14 16:31:30 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 6532 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 16:31:30 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 16:31:31 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 16:31:32 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 16:31:32 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 102 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 16:31:33 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@670342a2' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:31:33 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:31:33 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 16:31:33 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 16:31:33 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 16:31:33 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 16:31:33 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2969 ms
[INFO ] 2021-07-14 16:31:34 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 16:31:34 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 16:31:35 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 16:31:36 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 16:31:36 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:31:36 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 16:31:36 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 16:31:36 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:31:36 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 16:31:36 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 16:31:36 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 16:31:36 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 16:31:38 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 16:31:38 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 16:31:39 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 16:31:40 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@424461ad, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7cc5bdbd, org.springframework.security.web.context.SecurityContextPersistenceFilter@3af17313, org.springframework.security.web.header.HeaderWriterFilter@2100b770, org.springframework.web.filter.CorsFilter@33c5cc0, org.springframework.security.web.authentication.logout.LogoutFilter@cf315f1, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@664c411d, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@7641d70, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@76b8b6a6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@56f8ab05, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@569d7074, org.springframework.security.web.session.SessionManagementFilter@2ca4b010, org.springframework.security.web.access.ExceptionTranslationFilter@2f29046b, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7066c00a]
[INFO ] 2021-07-14 16:31:41 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 59193 (http) with context path ''
[INFO ] 2021-07-14 16:31:41 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 10.842 seconds (JVM running for 60.802)
[INFO ] 2021-07-14 16:31:41 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 16:31:41 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 16:35:09 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 16:35:09 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 16:35:09 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 16:35:09 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 16:35:09 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@1506f20f, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@47a5b70d, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@424fd310, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@1a45193b, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@38f116f6, org.springframework.test.context.support.DirtiesContextTestExecutionListener@5286c33a, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6e6d5d29, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@5c530d1e, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@6c25e6c4, org.springframework.test.context.event.EventPublishingTestExecutionListener@85e6769, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@c5ee75e, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@bf1ec20, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@70efb718, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@b70da4c, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@4a11eb84, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@4e858e0a]
[INFO ] 2021-07-14 16:35:10 [testcontainers-lifecycle-0] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 16:35:11 [testcontainers-lifecycle-0] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 16:35:11 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 16:35:11 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 16:35:11 [testcontainers-lifecycle-0] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 16:35:13 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 16:35:13 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 16:35:13 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 16:35:13 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 16:35:13 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 16:35:17 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Starting container with ID: edcd63da45bc177e7cd64cc6abfc44d8566c58f10c655333197278911821e3ba
[INFO ] 2021-07-14 16:35:21 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: edcd63da45bc177e7cd64cc6abfc44d8566c58f10c655333197278911821e3ba
[INFO ] 2021-07-14 16:35:23 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT9.775083S
[INFO ] 2021-07-14 16:35:23 [main] INFO  üê≥ [cloud_service_app:1.0] - Creating container for image: cloud_service_app:1.0
[INFO ] 2021-07-14 16:35:23 [main] INFO  üê≥ [cloud_service_app:1.0] - Starting container with ID: 0b3966ccada280f02dc1ebec1f4d2cbabfd8082d441ebc4f0408315663290f79
[INFO ] 2021-07-14 16:35:47 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 16:35:47 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 16:35:48 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 16:35:48 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 16:35:48 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@781f10f2, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@2a79d4b1, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@2e9fda69, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@17cdf2d0, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1755e85b, org.springframework.test.context.support.DirtiesContextTestExecutionListener@736d6a5c, org.springframework.test.context.transaction.TransactionalTestExecutionListener@2371aaca, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@5b529706, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@63fdab07, org.springframework.test.context.event.EventPublishingTestExecutionListener@7b5a12ae, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@5553d0f5, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@1af687fe, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@14dda234, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@3f390d63, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@74a6a609, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@5a411614, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@2374d36a]
[INFO ] 2021-07-14 16:35:48 [testcontainers-lifecycle-0] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 16:35:50 [testcontainers-lifecycle-0] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 16:35:50 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 16:35:50 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 16:35:50 [testcontainers-lifecycle-0] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 16:35:52 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 16:35:52 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 16:35:52 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 16:35:52 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 16:35:53 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 16:35:57 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Starting container with ID: 19f708d7ec6a574d7bce8fd22a971653b34bf7b9b3f33db6c4f21681a2517032
[INFO ] 2021-07-14 16:36:01 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 19f708d7ec6a574d7bce8fd22a971653b34bf7b9b3f33db6c4f21681a2517032
[INFO ] 2021-07-14 16:36:03 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT10.664062S
[INFO ] 2021-07-14 16:36:03 [main] INFO  üê≥ [cloud_service_app:1.0] - Creating container for image: cloud_service_app:1.0
[INFO ] 2021-07-14 16:36:03 [main] INFO  üê≥ [cloud_service_app:1.0] - Starting container with ID: 63fd48b9e6acef9b2667490135b28303eeec6c6cbcc7c3caadcb9da57195a858
[INFO ] 2021-07-14 16:36:07 [main] INFO  üê≥ [cloud_service_app:1.0] - Container cloud_service_app:1.0 is starting: 63fd48b9e6acef9b2667490135b28303eeec6c6cbcc7c3caadcb9da57195a858
[INFO ] 2021-07-14 16:36:30 [main] INFO  üê≥ [cloud_service_app:1.0] - Container cloud_service_app:1.0 started in PT26.565202S
[INFO ] 2021-07-14 16:36:30 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 7403 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 16:36:30 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 16:36:30 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 16:36:31 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 16:36:31 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 69 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 16:36:32 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@5e1a5f' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:36:32 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:36:32 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 16:36:32 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 16:36:32 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 16:36:32 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 16:36:32 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2201 ms
[INFO ] 2021-07-14 16:36:33 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 16:36:33 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 16:36:33 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 16:36:34 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 16:36:34 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:36:34 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 16:36:34 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 16:36:34 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:36:34 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 16:36:34 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 16:36:34 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 16:36:35 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 16:36:36 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 16:36:36 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 16:36:36 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 16:36:37 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@3003d288, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@110b6c78, org.springframework.security.web.context.SecurityContextPersistenceFilter@3ae5cbb9, org.springframework.security.web.header.HeaderWriterFilter@3debeb5e, org.springframework.web.filter.CorsFilter@e62d757, org.springframework.security.web.authentication.logout.LogoutFilter@c32908c, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@597f2d3f, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@7746330a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5abf9a76, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4973dacf, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3de4f936, org.springframework.security.web.session.SessionManagementFilter@7315264e, org.springframework.security.web.access.ExceptionTranslationFilter@6c65c6f0, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7597ae32]
[INFO ] 2021-07-14 16:36:38 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 59227 (http) with context path ''
[INFO ] 2021-07-14 16:36:38 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 7.846 seconds (JVM running for 52.075)
[INFO ] 2021-07-14 16:36:38 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 16:36:38 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 16:38:18 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 16:38:18 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 16:38:18 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 16:38:18 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 16:38:18 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@2374d36a, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@54d18072, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@1506f20f, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@47a5b70d, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@424fd310, org.springframework.test.context.support.DirtiesContextTestExecutionListener@1a45193b, org.springframework.test.context.transaction.TransactionalTestExecutionListener@38f116f6, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@5286c33a, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@6e6d5d29, org.springframework.test.context.event.EventPublishingTestExecutionListener@5c530d1e, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@6c25e6c4, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@85e6769, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@c5ee75e, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@bf1ec20, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@70efb718, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@b70da4c]
[INFO ] 2021-07-14 16:38:18 [testcontainers-lifecycle-0] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 16:38:19 [testcontainers-lifecycle-0] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 16:38:19 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 16:38:19 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 16:38:19 [testcontainers-lifecycle-0] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 16:38:21 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 16:38:21 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 16:38:21 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 16:38:21 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 16:38:21 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 16:38:25 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Starting container with ID: 016412e5d74f36fd79e995ba99532102b55910ae12acecd71ca537849aef2ee3
[INFO ] 2021-07-14 16:38:28 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 016412e5d74f36fd79e995ba99532102b55910ae12acecd71ca537849aef2ee3
[INFO ] 2021-07-14 16:38:30 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT8.762015S
[INFO ] 2021-07-14 16:38:30 [main] INFO  üê≥ [cloud_service_app:1.0] - Creating container for image: cloud_service_app:1.0
[INFO ] 2021-07-14 16:38:30 [main] INFO  üê≥ [cloud_service_app:1.0] - Starting container with ID: 3abfa81f0870aab08af9185c4ea28d71b6318f64027fea2df48bd6a1e348b4e9
[INFO ] 2021-07-14 16:38:33 [main] INFO  üê≥ [cloud_service_app:1.0] - Container cloud_service_app:1.0 is starting: 3abfa81f0870aab08af9185c4ea28d71b6318f64027fea2df48bd6a1e348b4e9
[INFO ] 2021-07-14 16:38:54 [main] INFO  üê≥ [cloud_service_app:1.0] - Container cloud_service_app:1.0 started in PT23.537898S
[INFO ] 2021-07-14 16:38:54 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 7813 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 16:38:54 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 16:38:54 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 16:38:55 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 16:38:55 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 85 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 16:38:56 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@118acf70' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:38:56 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:38:56 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 16:38:56 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 16:38:56 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 16:38:56 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 16:38:56 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2359 ms
[INFO ] 2021-07-14 16:38:57 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 16:38:57 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 16:38:58 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 16:38:58 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 16:38:58 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:38:58 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 16:38:58 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 16:38:58 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:38:58 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 16:38:59 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 16:38:59 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 16:38:59 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 16:39:00 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 16:39:00 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 16:39:01 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 16:39:01 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@5e78dd7f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@cf315f1, org.springframework.security.web.context.SecurityContextPersistenceFilter@5037f491, org.springframework.security.web.header.HeaderWriterFilter@1d4ee936, org.springframework.web.filter.CorsFilter@7d440378, org.springframework.security.web.authentication.logout.LogoutFilter@466fd19b, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@6d1c15cb, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@7597ae32, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3debeb5e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7b237c2c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@615f61ec, org.springframework.security.web.session.SessionManagementFilter@688884e, org.springframework.security.web.access.ExceptionTranslationFilter@18b8518b, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3c84c32f]
[INFO ] 2021-07-14 16:39:02 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 59248 (http) with context path ''
[INFO ] 2021-07-14 16:39:02 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 8.493 seconds (JVM running for 45.262)
[INFO ] 2021-07-14 16:39:02 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 16:39:02 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 16:39:07 [SpringContextShutdownHook] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed from ACCEPTING_TRAFFIC to REFUSING_TRAFFIC
[INFO ] 2021-07-14 16:40:06 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 16:40:06 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 16:40:07 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 16:40:07 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 16:40:07 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@5a411614, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@2374d36a, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@54d18072, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@1506f20f, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@47a5b70d, org.springframework.test.context.support.DirtiesContextTestExecutionListener@424fd310, org.springframework.test.context.transaction.TransactionalTestExecutionListener@1a45193b, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@38f116f6, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@5286c33a, org.springframework.test.context.event.EventPublishingTestExecutionListener@6e6d5d29, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@5c530d1e, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@6c25e6c4, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@85e6769, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@c5ee75e, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@48a12036, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@bf1ec20, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@70efb718]
[INFO ] 2021-07-14 16:40:07 [testcontainers-lifecycle-0] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 16:40:08 [testcontainers-lifecycle-0] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 16:40:08 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 16:40:08 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 16:40:08 [testcontainers-lifecycle-0] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 16:40:10 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 16:40:10 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 16:40:10 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 16:40:10 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 16:40:10 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 16:40:14 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Starting container with ID: afe357ea006b82666a2e47be601be72644ddf5d5293fc4be0ebf565b104f3e82
[INFO ] 2021-07-14 16:40:18 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: afe357ea006b82666a2e47be601be72644ddf5d5293fc4be0ebf565b104f3e82
[INFO ] 2021-07-14 16:40:20 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT9.269619S
[INFO ] 2021-07-14 16:40:20 [main] INFO  üê≥ [cloud_service_app:1.0] - Creating container for image: cloud_service_app:1.0
[INFO ] 2021-07-14 16:40:20 [main] INFO  üê≥ [cloud_service_app:1.0] - Starting container with ID: f1261a7608430ca0a23258c56dddbe2d15f5bfc437927890dac2beee50df97b7
[INFO ] 2021-07-14 16:40:23 [main] INFO  üê≥ [cloud_service_app:1.0] - Container cloud_service_app:1.0 is starting: f1261a7608430ca0a23258c56dddbe2d15f5bfc437927890dac2beee50df97b7
[INFO ] 2021-07-14 16:40:45 [main] INFO  üê≥ [cloud_service_app:1.0] - Container cloud_service_app:1.0 started in PT24.809744S
[INFO ] 2021-07-14 16:40:45 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 8084 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 16:40:45 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 16:40:45 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 16:40:46 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 16:40:46 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 85 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 16:40:47 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@101bdd1c' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:40:47 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:40:47 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 16:40:47 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 16:40:47 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 16:40:48 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 16:40:48 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2528 ms
[INFO ] 2021-07-14 16:40:48 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 16:40:48 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 16:40:49 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 16:40:49 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 16:40:49 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:40:49 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 16:40:49 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 16:40:49 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:40:50 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 16:40:50 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 16:40:50 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 16:40:50 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 16:40:51 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 16:40:51 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 16:40:52 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 16:40:52 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@438a2337, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@593d5f39, org.springframework.security.web.context.SecurityContextPersistenceFilter@4973dacf, org.springframework.security.web.header.HeaderWriterFilter@1f15d346, org.springframework.web.filter.CorsFilter@5e537465, org.springframework.security.web.authentication.logout.LogoutFilter@62f8b2f4, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@4f27643d, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@5d267575, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@28806954, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@466fd19b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6e512d7f, org.springframework.security.web.session.SessionManagementFilter@4e132a9b, org.springframework.security.web.access.ExceptionTranslationFilter@7fcc8d9f, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@e62d757]
[INFO ] 2021-07-14 16:40:53 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 59269 (http) with context path ''
[INFO ] 2021-07-14 16:40:53 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 8.717 seconds (JVM running for 47.829)
[INFO ] 2021-07-14 16:40:53 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 16:40:53 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 16:41:31 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 16:41:31 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 16:41:31 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 16:41:31 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 16:41:31 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@5c8504fd, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@4b7e96a, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@6475472c, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@3f07b12c, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@4bd1f8dd, org.springframework.test.context.support.DirtiesContextTestExecutionListener@7096b474, org.springframework.test.context.transaction.TransactionalTestExecutionListener@3e14c16d, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@3c989952, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@784b990c, org.springframework.test.context.event.EventPublishingTestExecutionListener@3d3ba765, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@25bc0606, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5d1659ea, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@793138bd, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@1951b871, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@5c18016b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@33aeca0b, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@43aaf813]
[INFO ] 2021-07-14 16:41:31 [testcontainers-lifecycle-0] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 16:41:32 [testcontainers-lifecycle-0] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 16:41:32 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 16:41:32 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 16:41:32 [testcontainers-lifecycle-0] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 16:41:35 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 16:41:35 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 16:41:35 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 16:41:35 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 16:41:35 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 16:41:39 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Starting container with ID: 0f4b2f1018adde883f129b48d0a1730289c685a735b104ebfa0b702ea47b81a4
[INFO ] 2021-07-14 16:41:42 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 0f4b2f1018adde883f129b48d0a1730289c685a735b104ebfa0b702ea47b81a4
[INFO ] 2021-07-14 16:41:44 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT9.574418S
[INFO ] 2021-07-14 16:41:44 [main] INFO  üê≥ [cloud_service_app:1.0] - Creating container for image: cloud_service_app:1.0
[INFO ] 2021-07-14 16:41:45 [main] INFO  üê≥ [cloud_service_app:1.0] - Starting container with ID: 20268aba08e2a08b066de8b3ce4175001e293350a3f6393538fa0f8603680a69
[INFO ] 2021-07-14 16:41:48 [main] INFO  üê≥ [cloud_service_app:1.0] - Container cloud_service_app:1.0 is starting: 20268aba08e2a08b066de8b3ce4175001e293350a3f6393538fa0f8603680a69
[INFO ] 2021-07-14 16:42:09 [main] INFO  üê≥ [cloud_service_app:1.0] - Container cloud_service_app:1.0 started in PT24.974706S
[INFO ] 2021-07-14 16:42:09 [main] INFO  üê≥ [front_app:1.0] - Creating container for image: front_app:1.0
[INFO ] 2021-07-14 16:42:10 [main] INFO  üê≥ [front_app:1.0] - Starting container with ID: 1403a82d4c2b0f349b944f8fe452c2c82cc311be889062d73697cf50740ad5dc
[INFO ] 2021-07-14 16:42:13 [main] INFO  üê≥ [front_app:1.0] - Container front_app:1.0 is starting: 1403a82d4c2b0f349b944f8fe452c2c82cc311be889062d73697cf50740ad5dc
[INFO ] 2021-07-14 16:42:22 [main] INFO  üê≥ [front_app:1.0] - Container front_app:1.0 started in PT12.236581S
[INFO ] 2021-07-14 16:42:22 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 8292 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 16:42:22 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 16:42:23 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 16:42:23 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 16:42:23 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 89 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 16:42:24 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@790d8fdd' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:42:24 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:42:25 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 16:42:25 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 16:42:25 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 16:42:25 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 16:42:25 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2696 ms
[INFO ] 2021-07-14 16:42:25 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 16:42:25 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 16:42:26 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 16:42:27 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 16:42:27 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:42:27 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 16:42:27 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 16:42:27 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:42:27 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 16:42:27 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 16:42:28 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 16:42:28 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 16:42:29 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 16:42:29 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 16:42:30 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 16:42:30 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@2100d881, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@59881424, org.springframework.security.web.context.SecurityContextPersistenceFilter@387bbd7a, org.springframework.security.web.header.HeaderWriterFilter@36c45b54, org.springframework.web.filter.CorsFilter@59ac94ad, org.springframework.security.web.authentication.logout.LogoutFilter@394e0104, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@361a618e, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@1179731c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@15932faf, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6b02909d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@8497c23, org.springframework.security.web.session.SessionManagementFilter@5da08e9a, org.springframework.security.web.access.ExceptionTranslationFilter@6e512d7f, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@77c8b276]
[INFO ] 2021-07-14 16:42:31 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 59290 (http) with context path ''
[INFO ] 2021-07-14 16:42:31 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 9.588 seconds (JVM running for 62.001)
[INFO ] 2021-07-14 16:42:31 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 16:42:31 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
[INFO ] 2021-07-14 16:43:13 [main] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: no resource found for suffixes {-context.xml, Context.groovy}.
[INFO ] 2021-07-14 16:43:13 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest]: CloudServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO ] 2021-07-14 16:43:14 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.netology.cloud_service_app.CloudServiceAppApplication for test class ru.netology.cloud_service_app.integration_tests.CloudServiceIntegrationTest
[INFO ] 2021-07-14 16:43:14 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener]
[INFO ] 2021-07-14 16:43:14 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@47a86fbb, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@f478a81, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@19553973, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@7bb6ab3a, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@7fe7c640, org.springframework.test.context.support.DirtiesContextTestExecutionListener@4c4748bf, org.springframework.test.context.transaction.TransactionalTestExecutionListener@7ce97ee5, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@32c8e539, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@73dce0e6, org.springframework.test.context.event.EventPublishingTestExecutionListener@5a85c92, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@32811494, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@4795ded0, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@53dacd14, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@14d14731, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@2eced48b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@47c4ecdc, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@42f33b5d]
[INFO ] 2021-07-14 16:43:15 [testcontainers-lifecycle-0] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
[INFO ] 2021-07-14 16:43:16 [testcontainers-lifecycle-0] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
[INFO ] 2021-07-14 16:43:16 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
[INFO ] 2021-07-14 16:43:17 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 20.10.7
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 1987 MB
[INFO ] 2021-07-14 16:43:17 [testcontainers-lifecycle-0] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
[INFO ] 2021-07-14 16:43:20 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
[INFO ] 2021-07-14 16:43:20 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - Checking the system...
[INFO ] 2021-07-14 16:43:20 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker server version should be at least 1.6.0
[INFO ] 2021-07-14 16:43:21 [testcontainers-lifecycle-0] INFO  o.testcontainers.DockerClientFactory - ‚úîÔ∏é Docker environment should have more than 2GB free disk space
[INFO ] 2021-07-14 16:43:21 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Creating container for image: postgres:13.2
[INFO ] 2021-07-14 16:43:25 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Starting container with ID: 1fd93e587ae5e527ec2e332685f737d282332c1edcc70e41fdd1e06fe7b611a3
[INFO ] 2021-07-14 16:43:29 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 is starting: 1fd93e587ae5e527ec2e332685f737d282332c1edcc70e41fdd1e06fe7b611a3
[INFO ] 2021-07-14 16:43:32 [testcontainers-lifecycle-0] INFO  üê≥ [postgres:13.2] - Container postgres:13.2 started in PT11.536377S
[INFO ] 2021-07-14 16:43:32 [main] INFO  üê≥ [cloud_service_app:1.0] - Creating container for image: cloud_service_app:1.0
[INFO ] 2021-07-14 16:43:32 [main] INFO  üê≥ [cloud_service_app:1.0] - Starting container with ID: e5b67e1737fb38a86ea530c677de45f40019a9fac918a838926ec873c83b9211
[INFO ] 2021-07-14 16:43:36 [main] INFO  üê≥ [cloud_service_app:1.0] - Container cloud_service_app:1.0 is starting: e5b67e1737fb38a86ea530c677de45f40019a9fac918a838926ec873c83b9211
[INFO ] 2021-07-14 16:44:02 [main] INFO  üê≥ [cloud_service_app:1.0] - Container cloud_service_app:1.0 started in PT30.115835S
[INFO ] 2021-07-14 16:44:02 [main] INFO  üê≥ [front_app:1.0] - Creating container for image: front_app:1.0
[INFO ] 2021-07-14 16:44:02 [main] INFO  üê≥ [front_app:1.0] - Starting container with ID: db6ba24d82be4d34d03a3e37994e6a8cc77bfcf5678196db0587d4e27fc349e6
[INFO ] 2021-07-14 16:44:06 [main] INFO  üê≥ [front_app:1.0] - Container front_app:1.0 is starting: db6ba24d82be4d34d03a3e37994e6a8cc77bfcf5678196db0587d4e27fc349e6
[INFO ] 2021-07-14 16:44:21 [main] INFO  üê≥ [front_app:1.0] - Container front_app:1.0 started in PT18.365941S
[INFO ] 2021-07-14 16:44:22 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Starting CloudServiceIntegrationTest using Java 14.0.1 on MBP-Maksim.Dlink with PID 8498 (started by maksim in /Users/maksim/Desktop/CloudService/CloudServiceBackend)
[INFO ] 2021-07-14 16:44:22 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - No active profile set, falling back to default profiles: default
[WARN ] 2021-07-14 16:44:22 [background-preinit] WARN  o.s.h.c.j.Jackson2ObjectMapperBuilder - For Jackson Kotlin classes support please add "com.fasterxml.jackson.module:jackson-module-kotlin" to the classpath
[INFO ] 2021-07-14 16:44:23 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2021-07-14 16:44:23 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 137 ms. Found 2 JPA repository interfaces.
[INFO ] 2021-07-14 16:44:25 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@2fc49538' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:44:25 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[INFO ] 2021-07-14 16:44:26 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
[INFO ] 2021-07-14 16:44:26 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
[INFO ] 2021-07-14 16:44:26 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.46]
[INFO ] 2021-07-14 16:44:26 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2021-07-14 16:44:26 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4256 ms
[INFO ] 2021-07-14 16:44:27 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2021-07-14 16:44:27 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2021-07-14 16:44:28 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[INFO ] 2021-07-14 16:44:30 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
[INFO ] 2021-07-14 16:44:30 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:44:30 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
[WARN ] 2021-07-14 16:44:30 [main] WARN  liquibase.hub - Skipping auto-registration
[INFO ] 2021-07-14 16:44:30 [main] INFO  liquibase.lockservice - Successfully released change log lock
[INFO ] 2021-07-14 16:44:30 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
[INFO ] 2021-07-14 16:44:31 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
[INFO ] 2021-07-14 16:44:31 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[INFO ] 2021-07-14 16:44:31 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
[INFO ] 2021-07-14 16:44:33 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[INFO ] 2021-07-14 16:44:33 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
[WARN ] 2021-07-14 16:44:35 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
[INFO ] 2021-07-14 16:44:36 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.web.filter.CorsFilter@29aa29f5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2a742ee4, org.springframework.security.web.context.SecurityContextPersistenceFilter@619dc070, org.springframework.security.web.header.HeaderWriterFilter@76b8b6a6, org.springframework.web.filter.CorsFilter@4e41b993, org.springframework.security.web.authentication.logout.LogoutFilter@110b6c78, ru.netology.cloud_service_app.security.jwt.JwtUsernamePasswordAuthenticationFilter@915c47b, ru.netology.cloud_service_app.security.jwt.JwtTokenVerifier@7108b12d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1639ec7a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@12581426, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7a80b2e6, org.springframework.security.web.session.SessionManagementFilter@23b4f0a9, org.springframework.security.web.access.ExceptionTranslationFilter@1f7653ae, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7641d70]
[INFO ] 2021-07-14 16:44:37 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 59477 (http) with context path ''
[INFO ] 2021-07-14 16:44:37 [main] INFO  r.n.c.i.CloudServiceIntegrationTest - Started CloudServiceIntegrationTest in 16.244 seconds (JVM running for 86.906)
[INFO ] 2021-07-14 16:44:37 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT
[INFO ] 2021-07-14 16:44:37 [main] INFO  o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC
